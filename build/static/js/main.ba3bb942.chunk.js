(this.webpackJsonproleterminal=this.webpackJsonproleterminal||[]).push([[0],Array(30).concat([function(e,t,n){e.exports=n(78)},,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n(1),i=n(3),l=function(e){return e>9?"".concat(e):"0".concat(e)},s=function(e){return e.config.get("requireOffName")},u=function(e){return e.config.get("publicRoomId")},d=function(e){return e.config.get("allowedImages")},m=function(e){return e.config.get("gpsTracking")},f=function(e){return e.config.get("permissions")},p=function(e){return e.config.get("newsRoomId")},h=function(e,t){var n=t.date,a=t.offset,r=t.lockDate,o=new Date(n),c={},i=e.config,s=i.yearModification,u=i.dayModification;return a&&o.setHours(o.getHours()+a),r||Number.isNaN(s)||(s&&!Number.isNaN(s)&&o.setFullYear(o.getFullYear()+parseInt(s,10)),u&&!Number.isNaN(u)&&o.setDate(o.getDate()+parseInt(u,10))),c.mins=l(o.getMinutes()),c.hours=l(o.getHours()),c.seconds=l(o.getSeconds()),c.month=l(o.getMonth()+1),c.day=l(o.getDate()),c.year=o.getFullYear(),c.halfTime="".concat(c.hours,":").concat(c.mins),c.fullTime="".concat(c.halfTime,":").concat(c.seconds),c.halfDate="".concat(c.day,"/").concat(c.month),c.fullDate="".concat(c.halfDate,"/").concat(c.year),c.fullStamp="".concat(c.halfTime," ").concat(c.fullDate),c};function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var y=r.a.createElement("circle",{cx:12,cy:12,r:10}),b=r.a.createElement("polyline",{points:"12 6 12 12 16 14"}),E=function(e){var t=e.svgRef,n=e.title,a=g(e,["svgRef","title"]);return r.a.createElement("svg",v({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-clock",ref:t},a),n?r.a.createElement("title",null,n):null,y,b)},w=r.a.forwardRef((function(e,t){return r.a.createElement(E,v({svgRef:t},e))})),O=(n.p,n(10)),j=(n(40),r.a.forwardRef((function(e,t){var n=e.onClick,a=e.children,o=e.disabled,c=e.stopPropagation,i=e.classNames,l=void 0===i?[""]:i,s=e.type,u=void 0===s?"button":s;return r.a.createElement("button",{ref:t,className:"".concat(["Button"].concat(l).join(" ")),disabled:o,type:u,onClick:function(e){n(e),c&&e.stopPropagation()}},a)}))),k=r.a.memo(j);j.propTypes={onClick:O.func.isRequired,children:O.node.isRequired,type:Object(O.oneOf)(["button","submit"]),disabled:O.bool,classNames:Object(O.arrayOf)(O.string),stopPropagation:O.bool},j.defaultProps={type:"button",disabled:void 0,classNames:[],stopPropagation:void 0};var I=n(12),x=n(27),N="aliases",C="devices",S="docFiles",R="forums",P="forumPosts",T="forumThreads",L="gameCodes",F="invitations",A="messages",M="rooms",W="simpleMsgs",D="teams",H="transactions",B="users",q="wallets",U=n(8),V=n(4),z="update",Y="create",J="remove",G=function(e,t){var n=new Map(Object(V.a)(e)),a=t.type,r=t.payload,o=r.changeType,c=r[a];switch(o){case Y:return n.set(c.objectId,c),n;case z:var i=n.get(c.objectId)||{},l=Object(U.a)(Object(U.a)({},i),c);return i===l?e:(n.set(c.objectId,l),n);case J:return n.has(c.objectId)?(n.delete(c.objectId),n):e;default:return e}},K=function(e,t){var n=t.type,a=t.payload,r=a.reset,o=a.changeType,c=r?new Map:new Map(Object(V.a)(e)),i=a[n];switch(o){case Y:return i.forEach((function(e){return c.set(e.objectId,e)})),c;case z:return i.forEach((function(e){var t=c.get(e.objectId)||{},n=Object(U.a)(Object(U.a)({},t),e);t!==n&&c.set(e.objectId,n)})),c;case J:return i.forEach((function(e){return c.delete(e.objectId)})),c;default:return e}};var Q="chat",X="whisper",Z="news";var $="online",_="offline",ee="reconnecting";var te=0,ne=1,ae=4,re=function(e){var t=e.objectToAccess,n=e.toAuth;if(!t||!n)return{canSee:!1,hasFullAccess:!1,hasAccess:!1};var a=t.ownerId,r=t.ownerAliasId,o=t.teamId,c=t.isPublic,i=t.visibility,l=t.teamIds,s=void 0===l?[]:l,u=t.userIds,d=void 0===u?[]:u,m=t.userAdminIds,f=void 0===m?[]:m,p=t.teamAdminIds,h=void 0===p?[]:p,v=n.hasFullAccess,g=n.partOfTeams,y=void 0===g?[]:g,b=n.accessLevel,E=void 0===b?te:b,w=n.objectId,O=n.teamIds,j=void 0===O?[]:O,k=n.aliases,I=void 0===k?[]:k,x=r&&I.includes(r),N=o&&y.includes(o),C=d.concat([a]).includes(w),S=N||s.find((function(e){return j.includes(e)})),R=x||I.find((function(e){return d.includes(e)})),P=f.includes(w),T=x||I.find((function(e){return f.includes(e)})),L=N||h.find((function(e){return j.includes(e)})),F=a===w||v||E>=ae;return{canSee:F||c||C||S||R||E>=i,hasAccess:F||c||C||S||R,hasFullAccess:F||P||L||T}},oe=new Map;oe.set("broadcastId","111111111111111111111116"),oe.set("publicRoomId","111111111111111111111110"),oe.set("newsRoomId","111111111111111111111114"),oe.set("defaultForum","111111111111111111111120"),oe.set("defaultLanguage","en"),oe.set("centerCoordinates",{longitude:0,latitude:0}),oe.set("cornerOneCoordinates",{longitude:0,latitude:0}),oe.set("cornerTwoCoordinates",{longitude:0,latitude:0}),oe.set("defaultZoomLevel",15),oe.set("yearModification",0),oe.set("dayModification",0),oe.set("requireOffName",!1),oe.set("activateTermination",!1),oe.set("allowedImages",{CHAT:!1,PROFILE:!1,DOCFILE:!1}),oe.set("permissions",{CreateAlias:{name:"CreateAlias",accessLevel:ne},CreateUser:{name:"CreateUser",accessLevel:te}}),oe.set("anonymousUser",{accessLevel:te,followingRooms:[],objectId:"-1",isAnonymous:!0});var ce="wallet",ie="chat",le="worldMap",se="docFile",ue="news",de="dialogIdentity",me="dialogCreateRoom",fe="dialogRemoveRoom",pe="dialogRegister",he="dialogLogin",ve="dialogCreateAlias",ge="dialogCreateTransaction",ye="dialogCreateDocFile",be="dialogCreateNews",Ee="dialogJoinRoom",we=new Map;var Oe=Object(I.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"user"===t.type?G(e,t):t.type===B?K(e,t):e},aliases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"alias"===t.type?G(e,t):t.type===N?K(e,t):e},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"message"===t.type?G(e,t):t.type===A?K(e,t):e},online:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;if("online"===t.type){var n=t.payload,a=n.online;return a}return e},rooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"room"===t.type?G(e,t):t.type===M?K(e,t):e},userId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=arguments.length>1?arguments[1]:void 0;if("userId"===t.type){var n=t.payload,a=n.reset,r=n.userId;return a?"-1":r}return e},positions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"position"===t.type?G(e,t):"positions"===t.type?K(e,t):e},transactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"transaction"===t.type?G(e,t):t.type===H?K(e,t):e},wallets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"wallet"===t.type?G(e,t):t.type===q?K(e,t):e},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;if("config"===t.type){var n=t.payload,a=n.entries,r=new Map(Object(V.a)(e));return a.forEach((function(e){return r.set(e[0],e[1])})),r}return e},aliasId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if("aliasId"===t.type){var n=t.payload,a=n.reset,r=n.aliasId;return a?null:r}return e},windowOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;if("windowOrder"===t.type){var n=t.payload,a=n.id,r=n.value,o=n.changeType,c=new Map(Object(V.a)(e));if(o===z){if(c.size>0&&Object(V.a)(c.keys()).indexOf(a)===c.size-1){var l=c.get(a);if(Object.keys(r).length===Object.keys(l).length&&Object.keys(r).every((function(e){return l[e]===r[e]})))return e}var s=Object(U.a)({},r);if(c.get(a)){var u=Object(V.a)(c.entries()).sort((function(e,t){var n=e[1].index,a=t[1].index;return n>a?1:n<a?-1:0})),d=u.splice(u.findIndex((function(e){return Object(i.a)(e,1)[0]===a})),1),m=Object(i.a)(d,1),f=m[0];f[1]=Object(U.a)({},s),u.push(f),u.forEach((function(e,t){var n=Object(i.a)(e,2),a=n[0],r=n[1],o=Object(U.a)(Object(U.a)({},r),{},{index:t+1});c.set(a,o)}))}else s.index=c.size+1,c.set(a,s);return c}return o===J?(console.log(a),c.delete(a),c):e}if("windowOrders"===t.type){var p=t.payload,h=p.windows,v=new Map(Object(V.a)(e));return h.forEach((function(e){var t=e.id,n=e.value;return v.set(t,n)})),v}return e},teams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"team"===t.type?G(e,t):t.type===D?K(e,t):e},docFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;return"docFile"===t.type?G(e,t):t.type===S?K(e,t):e}}),je=Object(I.d)(Oe,Object(I.a)(x.a)),ke=r.a.memo((function(){var e=Object(a.useState)(new Date),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),l=Object(i.a)(c,2),s=l[0],u=l[1],d=h(je.getState(),{date:n});Object(a.useEffect)((function(){!function e(){setTimeout((function(){o(new Date),e()}),1e3)}()}),[]);var m=Object(a.useCallback)((function(){return u(!s)}),[s]);return r.a.createElement("div",{key:"clock",className:"Clock"},r.a.createElement(k,{onClick:m,classNames:["".concat(s?"hide":"")]},r.a.createElement(w,null)),r.a.createElement(k,{onClick:m,classNames:["".concat(s?"":"hide")]},d.halfTime))})),Ie=(n(41),r.a.forwardRef((function(e,t){var n=e.children,o=e.title,c=e.scrollTo,l=e.alwaysExpanded,s=void 0!==l&&l,u=e.checkWidth,d=void 0!==u&&u,m=e.dropdown,f=void 0!==m&&m,p=e.classNames,h=void 0===p?[]:p,v=Object(a.useRef)(null),g=Object(a.useRef)(null),y=Object(a.useState)(!s&&"undefined"!==typeof o),b=Object(i.a)(y,2),E=b[0],w=b[1],O=[],j=["List"].concat(h),k=function(e){f&&v.current&&(!d||!g.current||g.current.offsetWidth<600)&&(e.target!==v.current&&v.current.parentElement.contains(e.target)||w(!0))};return Object(a.useEffect)((function(){c&&v.current&&("bottom"===c.direction&&v.current.lastElementChild?v.current.lastElementChild.scrollIntoView(!1):"top"===c.direction&&v.current.firstElementChild&&v.current.firstElementChild.scrollIntoView(!1))})),Object(a.useEffect)((function(){f&&(E?document.removeEventListener("mousedown",k,!1):document.addEventListener("mousedown",k,!1))}),[E]),E?O.push("hide"):j.push("expanded"),f&&O.push("dropdown"),r.a.createElement("div",{key:"List",className:j.join(" ")},o&&r.a.createElement("header",{role:"button",tabIndex:0,key:"listHeader",className:"toggle ".concat(s?"":"clickable"),onClick:function(){s||w(!E)}},o),r.a.createElement("ul",{ref:function(e){v.current=e,t&&(t.current=e),e&&(g.current=e.closest(".Window"))},key:"listElem",className:"".concat(O.join(" ")),onClick:function(e){f&&(k(e),e.stopPropagation())}},n))}))),xe=r.a.memo(Ie);Ie.defaultProps={classNames:[],children:void 0,title:void 0,dropdown:!1,scrollTo:void 0,checkWidth:!1,alwaysExpanded:!1};var Ne=n(2),Ce=n.n(Ne),Se=n(5),Re="deviceId",Pe="token",Te="userId",Le="aliasId",Fe=function(e,t){"string"===typeof t?localStorage.setItem(e,t):localStorage.setItem(e,function(e){return JSON.stringify(e)}(t))},Ae=function(e){return localStorage.getItem(e)},Me=function(e){return localStorage.removeItem(e)},We=function(){return Me(Le)},De=function(){Me(Pe),Me(Te),We()},He=function(){return Ae(Re)},Be=function(){return Ae(Pe)},qe=function(e){var t=e.userId,n=e.token;return Fe(Pe,n),function(e){Fe(Te,e)}(t),{type:"userId",payload:{userId:t}}},Ue=function(){return De(),function(e){Object(c.b)((function(){e({type:"userId",payload:{reset:!0}}),e({type:"aliasId",payload:{reset:!0}})}))}},Ve=function(e){return e.online===$},ze=function(){return{type:"online",payload:{online:$}}},Ye=function(e){return e.aliasId},Je=function(e){return e.userId},Ge=function(e){return Ye(e)||Je(e)},Ke=function(e){var t=e.messages;return 1===t.length?{type:"message",payload:{changeType:Y,message:t[0]}}:{type:A,payload:{messages:t,changeType:Y}}},Qe="chatMsg",Xe="whisper",Ze=function(e){var t=e.wallets;return 1===t.length?{type:"wallet",payload:{wallet:t[0],changeType:z}}:{type:q,payload:{wallets:t,changeType:z}}},$e=function(e){var t=e.wallets;return 1===t.length?{type:"wallet",payload:{wallet:t[0],changeType:Y}}:{type:q,payload:{wallets:t,changeType:Y}}},_e=function(e){var t=e.forums;return 1===t.length?{type:"forum",payload:{forum:t[0],changeType:Y}}:{type:R,payload:{forums:t,changeType:Y}}},et=function(e){var t=e.gameCodes;return 1===t.length?{type:"gameCode",payload:{gameCode:t[0],changeType:Y}}:{type:L,payload:{gameCodes:t,changeType:Y}}},tt=function(e){var t=e.users;return 1===t.length?{type:"user",payload:{user:t[0],changeType:z}}:{type:B,payload:{users:t,changeType:z}}},nt=function(e){var t=e.users;return 1===t.length?{type:"user",payload:{user:t[0],changeType:Y}}:{type:B,payload:{users:t,changeType:Y}}},at=function(e){var t=e.user,n=e.wallet,a=e.room,r=e.forum,o=e.gameCode;return function(){var e=Object(Se.a)(Ce.a.mark((function e(i){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){i(nt({users:[t]})),i(rt({rooms:[a]})),i($e({wallets:[n]})),i(_e({forums:[r]})),i(et({gameCodes:[o]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},rt=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:Y,room:t[0]}}:{type:M,payload:{rooms:t,changeType:Y}}},ot=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:z,room:t[0]}}:{type:M,payload:{rooms:t,changeType:Y}}},ct=function(e){var t=e.rooms;return 1===t.length?{type:"room",payload:{changeType:J,room:t[0]}}:{type:M,payload:{rooms:t,changeType:J}}},it=function(e){var t=e.room,n=e.user;return function(e){Object(c.b)((function(){e(ot({rooms:[t]})),e(tt({users:[n]}))}))}},lt="room",st="followRoom",ut="user",dt=function(e){var t=e.aliasId;return t?(Fe(Le,t),{type:"aliasId",payload:{aliasId:t}}):(We(),{type:"aliasId",payload:{reset:!0}})},mt=function(e){var t=e.aliases;return 1===t.length?{type:"alias",payload:{alias:t[0],changeType:Y}}:{type:N,payload:{aliases:t,changeType:Y}}},ft=function(e){var t=e.alias,n=e.wallet,a=e.room;return function(){var e=Object(Se.a)(Ce.a.mark((function e(r){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){r(mt({aliases:[t]})),r(rt({rooms:[a]})),r($e({wallets:[n]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},pt="alias",ht="wallet",vt=function(e){var t=e.transaction,n=e.wallet;return function(e){Object(c.b)((function(){e(function(e){var t=e.transactions;return 1===t.length?{type:"transaction",payload:{transaction:t[0],changeType:Y}}:{type:H,payload:{transactions:t,changeType:Y}}}({transactions:[t]})),e(Ze({wallets:[n]}))}))}},gt="transaction",yt=function(e){var t=e.docFiles;return 1===t.length?{type:"docFile",payload:{docFile:t[0],changeType:Y}}:{type:S,payload:{docFiles:t,changeType:Y}}},bt="docFile",Et=function(){var e="undefined"!==typeof ioUri?ioUri:"/";return window.io(e,{forceNew:!0})}(),wt="createAlias",Ot="createUser",jt="sendMessage",kt="createRoom",It="createDocFile",xt="createTransaction",Nt="followRoom",Ct="getMessagesByRoom",St="removeRoom",Rt={ALIASES:"getAliases",USERS:"getUsers",MESSAGES:"getMessages",ROOMS:"getRooms",INVITATIONS:"getInvitations",DOCFILES:"getDocFiles",FORUMS:"getForums",FORUMPOSTS:"getForumPosts",FORUMTHREADS:"getForumThreads",GAMECODES:"getGameCodes",SIMPLEMSGS:"getSimpleMsgs",TEAMS:"getTeams",TRANSACTIONS:"getTransactions",WALLETS:"getWallets",DEVICES:"getDevices"},Pt="login",Tt="reconnect",Lt="startup",Ft="disconnect",At=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.event,a=t.callback,Et.on(n,(function(e){console.log(n,e),a(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mt=function(){je.getState().online!==ee&&(Et.disconnect(),Et.connect())},Wt=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a=arguments;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",new Promise((function(e,a){var r=n;r.token=Be(),Ve(je.getState())||Mt(),Et.emit(t,r,(function(t){var n=t.error,r=t.data;n?a(n):e(r)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();At({event:Tt,callback:function(){Je(je.getState)&&Wt("updateId",{}).then((function(){je.dispatch(ze())})).catch((function(e){console.log(e),je.dispatch(Ue())}))}}),At({event:Lt,callback:function(e){var t,n=e.data,a=Ae(Te),r=Be(),o=Ae(Le);a&&r&&je.dispatch(qe({userId:a,token:r})),o&&je.dispatch(dt({aliasId:o})),He()||Fe(Re,"1234567890123456"),je.dispatch((t=n,function(e){Object(c.b)((function(){e({type:"config",payload:{entries:Object.entries(t)}}),e(ze())}))})),(a||r)&&Wt("updateId",{}).then((function(){je.dispatch(ze())})).catch((function(e){console.log(e),je.dispatch(Ue())}))}}),At({event:Ft,callback:function(){je.dispatch({type:"online",payload:{online:_}}),Mt()}}),At({event:Qe,callback:function(e){var t=e.data,n=e.error;if(t&&t.message){var a=t.message;t.changeType===Y&&je.dispatch(Ke({messages:[a]}))}else console.log(Qe,n,t)}}),At({event:Xe,callback:function(e){var t=e.data,n=e.error;if(t&&t.message){var a=t.message;t.changeType===Y&&je.dispatch(Ke({messages:[a]}))}else console.log(Xe,n,t)}}),At({event:lt,callback:function(e){var t=e.error,n=e.data;if(n&&n.room){var a=n.room,r=n.changeType;r===Y?je.dispatch(rt({rooms:[a]})):r===z?je.dispatch(ot({rooms:[a]})):r===J&&je.dispatch(ct({rooms:[a]}))}else console.log(lt,t,n)}}),At({event:st,callback:function(e){var t=e.error,n=e.data;n&&n.room&&n.user?je.dispatch(function(){var e=Object(Se.a)(Ce.a.mark((function e(t){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(c.b)((function(){t(ot({rooms:[n.room]})),t(tt({users:[n.user]}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):console.log(st,t,n)}}),At({event:ut,callback:function(e){var t=e.error,n=e.data;if(n&&n.user){var a=n.user,r=n.changeType;r===Y?je.dispatch(nt({users:[a]})):r===z&&je.dispatch(tt({users:[a]}))}else console.log(ut,t,n)}}),At({event:pt,callback:function(e){var t=e.error,n=e.data;if(n&&n.alias){var a=n.alias,r=n.changeType;r===Y?je.dispatch(mt({aliases:[a]})):r===z&&je.dispatch(function(e){var t=e.aliases;return 1===t.length?{type:"alias",payload:{alias:t[0],changeType:z}}:{type:N,payload:{aliases:t,changeType:z}}}({aliases:[a]}))}else console.log(pt,t,n)}}),At({event:ht,callback:function(e){var t=e.error,n=e.data;if(n&&n.wallet){var a=n.wallet,r=n.changeType;r===Y?je.dispatch($e({wallets:[a]})):r===z&&je.dispatch(Ze({wallets:[a]}))}else console.log(ht,t,n)}}),At({event:gt,callback:function(e){var t=e.error,n=e.data;if(n&&n.transaction&&(n.changeType===z||n.wallet)){var a=n.transaction,r=n.changeType;r===Y?je.dispatch(vt(n)):r===z&&je.dispatch(function(e){var t=e.transactions;return 1===t.length?{type:"transaction",payload:{transaction:t[0],changeType:z}}:{type:H,payload:{transactions:t,changeType:z}}}({transactions:[a]}))}else console.log(gt,t,n)}}),At({event:bt,callback:function(e){var t=e.error,n=e.data;if(n&&n.docFile){var a=n.docFile,r=n.changeType;r===Y?je.dispatch(yt({docFiles:[a]})):r===z&&je.dispatch(function(e){var t=e.docFiles;return 1===t.length?{type:"docFile",payload:{docFile:t[0],changeType:z}}:{type:S,payload:{docFiles:t,changeType:z}}}({docFiles:[a]}))}else console.log(bt,t,n)}});var Dt=function(){var e=Object(Se.a)(Ce.a.mark((function e(t,n){var a,r,o;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt(Pt,{user:{username:t,password:n}});case 2:return a=e.sent,r=a.user,o=a.token,je.dispatch(qe({userId:r.objectId,token:o})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(Se.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:je.dispatch(Ue());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Bt=n(13),qt=n(7),Ut=n.n(qt),Vt=function(e){return e.aliases},zt=function(e,t){var n=t.id;return e.aliases.get(n)},Yt=function(e){return e.users},Jt=function(e,t){var n=t.id;return e.users.get(n)},Gt=function(e){return e.users.get(Je(e))||function(e){return e.config.get("anonymousUser")}(e)},Kt=Object(Bt.createSelector)([Gt],(function(e){return e.accessLevel})),Qt=Ut()([Yt,Vt],(function(e,t){return[].concat(Object(V.a)(e.values()),Object(V.a)(t.values()))}))((function(){return"identities"})),Xt=Ut()([Yt,Vt,function(e,t){return t.ids}],(function(e,t,n){var a=new Map;return n.forEach((function(n){return a.set(n,e.get(n)||t.get(n))})),a}))((function(e,t){var n=t.ids;return"identities-".concat(n.join(" "))})),Zt=Ut()([Yt,Vt,function(e){return e.teams},function(e,t){return t.ids}],(function(e,t,n,a){var r=new Map;return a.forEach((function(a){return r.set(a,n.get(a)||e.get(a)||t.get(a))})),r}))((function(e,t){var n=t.ids;return"identities-teams-".concat(n.join(" "))})),$t=Object(Bt.createSelector)([Jt,zt],(function(e,t){return e||t})),_t=Object(Bt.createSelector)([Jt,zt,function(e,t){var n=t.id;return e.teams.get(n)}],(function(e,t,n){return n||t||e})),en=Ut()([Qt,Je],(function(e,t){return e.filter((function(e){return e.objectId!==t&&e.ownerId!==t&&!e.userIds.includes(t)})).map((function(e){return e.objectId}))}))((function(){return"other-identity-ids"})),tn=Ut()([Qt,Je],(function(e,t){return e.filter((function(e){return e.objectId===t||e.ownerId===t||e.userIds.includes(t)}))}))((function(){return"current-identities"})),nn=(n(43),function(e){var t=e.children,n=e.onClick,a=e.elementId,o=e.stopPropagation,c=void 0!==o&&o,i=e.classNames,l=void 0===i?[]:i;return r.a.createElement("li",{id:a,className:["ListItem","".concat(n?"clickable":"")].concat(l).join(" "),onClick:function(e){n&&n(e),"UL"===e.target.parentElement.tagName&&e.target.parentElement.click(),c&&e.stopPropagation()}},t)}),an=r.a.memo(nn);function rn(){return(rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function on(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}nn.defaultProps={onClick:void 0,classNames:[],stopPropagation:!1,elementId:void 0};var cn=r.a.createElement("line",{x1:3,y1:12,x2:21,y2:12}),ln=r.a.createElement("line",{x1:3,y1:6,x2:21,y2:6}),sn=r.a.createElement("line",{x1:3,y1:18,x2:21,y2:18}),un=function(e){var t=e.svgRef,n=e.title,a=on(e,["svgRef","title"]);return r.a.createElement("svg",rn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-menu",ref:t},a),n?r.a.createElement("title",null,n):null,cn,ln,sn)},dn=r.a.forwardRef((function(e,t){return r.a.createElement(un,rn({svgRef:t},e))})),mn=(n.p,function(e){var t=e.windows;if(1===t.length){var n=Object(i.a)(t,1)[0],a=n.value;return{type:"windowOrder",payload:{id:n.id,value:a,changeType:z}}}return{type:"windowOrders",payload:{windows:t,changeType:z}}}),fn=function(e){return{type:"windowOrder",payload:{id:e.id,changeType:J}}},pn=r.a.memo((function(){var e=Object(c.d)(Kt),t=Object(c.d)(f),n=[];return e===t.CreateUser.accessLevel&&n.push(r.a.createElement(an,{stopPropagation:!0,key:"register",onClick:function(){return je.dispatch(mn({windows:[{id:pe,value:{type:pe}}]}))}},"Create user")),e===te&&n.push(r.a.createElement(an,{stopPropagation:!0,key:"login",onClick:function(){return je.dispatch(mn({windows:[{id:he,value:{type:he}}]}))}},"Login")),e>=t.CreateAlias.accessLevel&&n.push(r.a.createElement(an,{stopPropagation:!0,key:"alias",onClick:function(){return je.dispatch(mn({windows:[{id:ve,value:{type:ve}}]}))}},"Create alias")),e>=ne&&n.push(r.a.createElement(an,{stopPropagation:!0,key:"logout",onClick:function(){Ht()}},"Logout")),r.a.createElement(xe,{dropdown:!0,title:r.a.createElement(dn,null)},n)}));n(44);function hn(){return(hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function vn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var gn=r.a.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}),yn=function(e){var t=e.svgRef,n=e.title,a=vn(e,["svgRef","title"]);return r.a.createElement("svg",hn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-message-square",ref:t},a),n?r.a.createElement("title",null,n):null,gn)},bn=r.a.forwardRef((function(e,t){return r.a.createElement(yn,hn({svgRef:t},e))}));n.p;function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function wn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var On=r.a.createElement("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),jn=r.a.createElement("line",{x1:8,y1:2,x2:8,y2:18}),kn=r.a.createElement("line",{x1:16,y1:6,x2:16,y2:22}),In=function(e){var t=e.svgRef,n=e.title,a=wn(e,["svgRef","title"]);return r.a.createElement("svg",En({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map",ref:t},a),n?r.a.createElement("title",null,n):null,On,jn,kn)},xn=r.a.forwardRef((function(e,t){return r.a.createElement(In,En({svgRef:t},e))}));n.p;function Nn(){return(Nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Cn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Sn=r.a.createElement("rect",{x:1,y:4,width:22,height:16,rx:2,ry:2}),Rn=r.a.createElement("line",{x1:1,y1:10,x2:23,y2:10}),Pn=function(e){var t=e.svgRef,n=e.title,a=Cn(e,["svgRef","title"]);return r.a.createElement("svg",Nn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-credit-card",ref:t},a),n?r.a.createElement("title",null,n):null,Sn,Rn)},Tn=r.a.forwardRef((function(e,t){return r.a.createElement(Pn,Nn({svgRef:t},e))}));n.p;function Ln(){return(Ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Fn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var An=r.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),Mn=r.a.createElement("polyline",{points:"14 2 14 8 20 8"}),Wn=r.a.createElement("line",{x1:16,y1:13,x2:8,y2:13}),Dn=r.a.createElement("line",{x1:16,y1:17,x2:8,y2:17}),Hn=r.a.createElement("polyline",{points:"10 9 9 9 8 9"}),Bn=function(e){var t=e.svgRef,n=e.title,a=Fn(e,["svgRef","title"]);return r.a.createElement("svg",Ln({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-text",ref:t},a),n?r.a.createElement("title",null,n):null,An,Mn,Wn,Dn,Hn)},qn=r.a.forwardRef((function(e,t){return r.a.createElement(Bn,Ln({svgRef:t},e))}));n.p;function Un(){return(Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Vn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var zn=r.a.createElement("path",{d:"M4 11a9 9 0 0 1 9 9"}),Yn=r.a.createElement("path",{d:"M4 4a16 16 0 0 1 16 16"}),Jn=r.a.createElement("circle",{cx:5,cy:19,r:1}),Gn=function(e){var t=e.svgRef,n=e.title,a=Vn(e,["svgRef","title"]);return r.a.createElement("svg",Un({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-rss",ref:t},a),n?r.a.createElement("title",null,n):null,zn,Yn,Jn)},Kn=r.a.forwardRef((function(e,t){return r.a.createElement(Gn,Un({svgRef:t},e))})),Qn=(n.p,r.a.memo((function(){var e=Object(c.d)(Kt),t=function(e){var t=e.id,n=e.value;return je.dispatch(mn({windows:[{id:t,value:n}]}))};return r.a.createElement(xe,{classNames:["OpenApps"]},r.a.createElement(an,{key:"chat"},r.a.createElement(k,{onClick:function(){return t({id:ie,value:{type:ie}})}},r.a.createElement(bn,null))),r.a.createElement(an,{key:"news"},r.a.createElement(k,{onClick:function(){return t({id:ue,value:{type:ue}})}},r.a.createElement(Kn,null))),r.a.createElement(an,{key:"docFile"},r.a.createElement(k,{onClick:function(){return t({id:se,value:{type:se}})}},r.a.createElement(qn,null))),r.a.createElement(an,{key:"map"},r.a.createElement(k,{onClick:function(){return t({id:le,value:{type:le}})}},r.a.createElement(xn,null))),e>=ne&&r.a.createElement(an,{key:"wallet"},r.a.createElement(k,{onClick:function(){return t({id:ce,value:{type:ce}})}},r.a.createElement(Tn,null))))})));function Xn(){return(Xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Zn(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var $n=r.a.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),_n=r.a.createElement("circle",{cx:12,cy:7,r:4}),ea=function(e){var t=e.svgRef,n=e.title,a=Zn(e,["svgRef","title"]);return r.a.createElement("svg",Xn({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-user",ref:t},a),n?r.a.createElement("title",null,n):null,$n,_n)},ta=r.a.forwardRef((function(e,t){return r.a.createElement(ea,Xn({svgRef:t},e))})),na=(n.p,n(45),function(e){var t=e.useIcon,n=void 0!==t&&t,a=Object(c.d)(tn),o=Object(c.d)(Ge),i=a.find((function(e){return e.objectId===o})),l=i?i.aliasName||i.username:"---";return r.a.createElement(xe,{dropdown:!0,classNames:["IdentityPicker"],title:n?r.a.createElement(ta,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(ta,null),r.a.createElement("span",null,l))},(n?a:a.filter((function(e){return e.objectId!==o}))).map((function(e){return r.a.createElement(an,{classNames:["".concat(e.objectId===o?"selected":"")],key:e.objectId,onClick:function(){return je.dispatch(dt({aliasId:e.aliasName?e.objectId:void 0}))}},e.aliasName||e.username)})))}),aa=r.a.memo(na);na.defaultProps={useIcon:void 0};var ra=r.a.memo((function(){var e=Object(c.d)(Ve),t=Object(c.d)(Kt),n=[],a=[];return e||a.push("warning"),r.a.createElement("div",{className:"".concat(a.join(" ")),id:"MenuBar"},r.a.createElement(pn,null),r.a.createElement(Qn,null),n,r.a.createElement("div",{className:"rightAligned"},t>=ne&&r.a.createElement(aa,{useIcon:!0}),r.a.createElement(ke,null)))})),oa=n(9),ca=function(){var e=Object(c.c)(),t=Object(c.d)(Je);return Object(a.useEffect)((function(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.reset;[{type:B,event:Rt.USERS},{type:N,event:Rt.ALIASES},{type:A,event:Rt.MESSAGES},{type:M,event:Rt.ROOMS},{type:F,event:Rt.INVITATIONS},{type:S,event:Rt.DOCFILES},{type:R,event:Rt.FORUMS},{type:P,event:Rt.FORUMPOSTS},{type:T,event:Rt.FORUMTHREADS},{type:L,event:Rt.GAMECODES},{type:W,event:Rt.SIMPLEMSGS},{type:D,event:Rt.TEAMS},{type:H,event:Rt.TRANSACTIONS},{type:q,event:Rt.WALLETS},{type:C,event:Rt.DEVICES}].forEach(function(){var t=Object(Se.a)(Ce.a.mark((function t(a){var r,o;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a.event,o=a.type,Wt(r,{}).then((function(t){e({type:o,payload:Object(oa.a)({reset:n,changeType:Y},o,t[o])})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}({reset:!0})}),[t]),r.a.createElement(r.a.Fragment,null)},ia=n(29);n(50);function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function sa(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ua=r.a.createElement("polyline",{points:"15 3 21 3 21 9"}),da=r.a.createElement("polyline",{points:"9 21 3 21 3 15"}),ma=r.a.createElement("line",{x1:21,y1:3,x2:14,y2:10}),fa=r.a.createElement("line",{x1:3,y1:21,x2:10,y2:14}),pa=function(e){var t=e.svgRef,n=e.title,a=sa(e,["svgRef","title"]);return r.a.createElement("svg",la({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-maximize-2",ref:t},a),n?r.a.createElement("title",null,n):null,ua,da,ma,fa)},ha=r.a.forwardRef((function(e,t){return r.a.createElement(pa,la({svgRef:t},e))}));n.p;function va(){return(va=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ga(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ya=r.a.createElement("line",{x1:18,y1:6,x2:6,y2:18}),ba=r.a.createElement("line",{x1:6,y1:6,x2:18,y2:18}),Ea=function(e){var t=e.svgRef,n=e.title,a=ga(e,["svgRef","title"]);return r.a.createElement("svg",va({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x",ref:t},a),n?r.a.createElement("title",null,n):null,ya,ba)},wa=r.a.forwardRef((function(e,t){return r.a.createElement(Ea,va({svgRef:t},e))}));n.p;function Oa(){return(Oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ja(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ka=r.a.createElement("circle",{cx:12,cy:12,r:3}),Ia=r.a.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}),xa=function(e){var t=e.svgRef,n=e.title,a=ja(e,["svgRef","title"]);return r.a.createElement("svg",Oa({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-settings",ref:t},a),n?r.a.createElement("title",null,n):null,ka,Ia)},Na=r.a.forwardRef((function(e,t){return r.a.createElement(xa,Oa({svgRef:t},e))})),Ca=(n.p,n(51),r.a.memo((function(e){var t=e.onDoubleClick,n=e.title,a=e.done;return r.a.createElement("div",{onDoubleClick:t,className:"TopBar"},r.a.createElement("div",{className:"TopBarHandle"},r.a.createElement("span",{className:"title"},n)),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{classNames:["settings"],stopPropagation:!0,type:"button",onClick:function(){}},r.a.createElement(Na,null)),r.a.createElement(k,{type:"button",onClick:t},r.a.createElement(ha,null)),r.a.createElement(k,{stopPropagation:!0,type:"button",onClick:a},r.a.createElement(wa,null))))}))),Sa=function(e){var t=e.onClick,n=e.children,o=e.menu,c=e.done,l=e.index,s=(e.type,e.title),u=void 0===s?"app":s,d=e.classNames,m=void 0===d?[]:d,f={width:640,height:480},p=Object(a.useState)(f),h=Object(i.a)(p,2),v=h[0],g=h[1],y=Object(a.useState)({x:0,y:0}),b=Object(i.a)(y,2),E=b[0],w=b[1],O=["Window"].concat(m),j=Object(a.useCallback)((function(){"100%"===v.width&&"100%"===v.height?g(f):(w({x:0,y:0}),g({width:"100%",height:"100%"}))}),[v,E]);return r.a.createElement(ia.a,{style:{zIndex:l},onClick:t,position:E,className:"rnd",size:v,minWidth:300,minHeight:200,maxHeight:"100%",maxWidth:"100%",bounds:"parent",dragHandleClassName:"TopBarHandle",enableResizing:{top:!0,topRight:!0,topLeft:!0,right:!0,bottom:!0,left:!0,bottomRight:!0,bottomLeft:!0},resizeHandleStyles:{top:{top:"0",width:"5px"},left:{left:"0",width:"5px"},right:{right:"0",width:"5px"},bottom:{bottom:"0",height:"5px"},bottomLeft:{bottom:"0",left:"0",width:"10px",height:"10px"},bottomRight:{bottom:"0",right:"0",width:"10px",height:"10px"},topRight:{right:"0",top:"0",width:"10px",height:"10px"},topLeft:{left:"0",top:"0",width:"10px",height:"10px"}},onDragStart:t,onDragStop:function(e,t){var n=t.node,a=t.x,r=t.y;E&&a===E.x&&r===E.y||(0===a&&"100%"!==v.width?(g({width:"50%",height:"100%"}),w({x:0,y:0})):a+n.offsetWidth>=window.innerWidth&&"100%"!==v.width?(g({width:"50%",height:"100%"}),w({x:window.innerWidth/2,y:0})):w({x:a,y:r}))},onResizeStart:t,onResizeStop:function(e,t,n,a,r){n.offsetWidth===v.width&&n.offsetHeight===v.height||(g({width:n.offsetWidth,height:n.offsetHeight}),w(r))}},r.a.createElement("div",{className:"".concat(O.join(" "))},r.a.createElement(Ca,{done:c,title:u,onDoubleClick:j}),r.a.createElement("div",{className:"windowBox"},o&&r.a.createElement("div",{className:"menu"},o),r.a.createElement("div",{className:"content"},n))))},Ra=r.a.memo(Sa);Sa.defaultProps={done:void 0,classNames:[],title:"app",menu:void 0,type:"window"};var Pa=Ut()([function(e){return e.transactions},function(e,t){return t.ids}],(function(e,t){return Object(V.a)(e.values()).filter((function(e){var n=e.fromWalletId,a=e.toWalletId;return t.includes(n)||t.includes(a)})).map((function(e){return e.objectId})).reverse()}))((function(e,t){var n=t.ids;return"transaction-ids-".concat(n.join(" "))})),Ta=(n(52),r.a.memo((function(e){var t=e.transactionId,n=Object(c.d)((function(e){return function(e,t){var n=t.id;return e.transactions.get(n)}(e,{id:t})})),a=Object(c.d)((function(e){return _t(e,{id:n.fromWalletId})})),o=Object(c.d)((function(e){return _t(e,{id:n.toWalletId})}));return r.a.createElement(an,{classNames:["TransactionItem"]},r.a.createElement("p",null,h(je.getState(),{date:new Date(n.customTimeCreated||n.timeCreated)}).fullStamp),r.a.createElement("p",null,"".concat(a.teamName||a.aliasName||a.username," -> ").concat(o.teamName||o.aliasName||o.username)),r.a.createElement("p",null,"Amount: ".concat(n.amount)),n.note&&r.a.createElement("p",null,n.note))}))),La=r.a.memo((function(e){var t=e.walletIds,n=Object(c.d)((function(e){return Pa(e,{ids:t})}));return r.a.createElement(xe,{scrollTo:{buffer:!0,direction:"top"}},n.map((function(e){return r.a.createElement(Ta,{key:e,transactionId:e})})))})),Fa=function(e){return e.wallets},Aa=function(e,t){var n=t.id;return e.wallets.get(n)},Ma=Ut()([Fa,Gt],(function(e,t){return Object(V.a)(e.values()).filter((function(e){return e.ownerId===t.objectId||t.aliases.includes(e.ownerAliasId)})).map((function(e){return e.objectId}))}))((function(){return"wallet-ids-current-user"})),Wa=r.a.memo((function(e){var t=e.identityId,n=Object(c.d)((function(e){return $t(e,{id:t})}));return r.a.createElement(an,{stopPropagation:!0,key:n.objectId,onClick:function(){je.dispatch(mn({windows:[{id:"".concat(de,"-").concat(n.objectId),value:{identityId:n.objectId,type:de}}]}))}},n.username||n.aliasName)})),Da=r.a.memo((function(){var e=Object(c.d)(en);return r.a.createElement(xe,{dropdown:!0,checkWidth:!0,classNames:["IdentityList"],title:"Users"},e.map((function(e){return r.a.createElement(Wa,{key:e,identityId:e})})))})),Ha=function(e){var t=e.walletId,n=e.onChange,a=e.classNames,o=void 0===a?[]:a,i=Object(c.d)((function(e){return Aa(e,{id:t})})),l=Object(c.d)((function(e){return _t(e,{id:t})}));return r.a.createElement(an,{classNames:["WalletItem"].concat(o),onClick:function(){return n(t)}},l?"".concat(l.teamName||l.aliasName||l.username,": ").concat(i.amount):"Show all")},Ba=r.a.memo(Ha);Ha.defaultProps={classNames:[]};var qa=r.a.memo((function(e){var t=e.onChange,n=e.walletId,a=Object(c.d)(Ma);return r.a.createElement(xe,{dropdown:!0,checkWidth:!0,title:"Wallets",classNames:["WalletList"]},r.a.createElement(Ba,{classNames:["showAll"===n?"selected":""],key:"showAll",onChange:t,walletId:"showAll"}),a.map((function(e){return r.a.createElement(Ba,{key:e,walletId:e,onChange:t,classNames:[n===e?"selected":""]})})))})),Ua=r.a.memo((function(e){var t=e.onChange,n=e.walletId,a=Object(c.d)(Fa);return r.a.createElement(xe,{dropdown:!0,checkWidth:!0,title:"[ADMIN]",classNames:["WalletList"]},Object(V.a)(a.values()).map((function(e){var a=e.objectId;return r.a.createElement(Ba,{key:a,walletId:a,onChange:t,classNames:[n===a?"selected":""]})})))})),Va=(n(53),r.a.memo((function(e){var t=e.id,n=e.index,o=Object(a.useState)("showAll"),l=Object(i.a)(o,2),s=l[0],u=l[1],d=Object(c.d)(Ma),m=Object(c.d)((function(e){return _t(e,{id:s})})),f=Object(c.d)(Kt),p=Object(a.useCallback)((function(){je.dispatch(mn({windows:[{id:t,value:{type:ce}}]}))}),[]),h=Object(a.useCallback)((function(){return je.dispatch(fn({id:t}))}),[t]),v=Object(a.useCallback)((function(e){return u(e)}),[]),g=Object(a.useMemo)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(qa,{key:"walletList",onChange:v,walletId:s}),r.a.createElement(Da,{key:"identityList"}),f>=ae&&r.a.createElement(Ua,{key:"adminWalletList",onChange:v,walletId:s}))}),[v,s]);return r.a.createElement(Ra,{classNames:["Wallet"],index:n,done:h,title:"Wallet".concat(m?": ".concat(m.teamName||m.aliasName||m.username):"s"),onClick:p,menu:g},r.a.createElement(La,{key:"transactionList",walletIds:"showAll"!==s?[s]:d}))}))),za=(n(54),function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),n=(t[0],t[1]),o=Object(a.useRef)();return Object(a.useEffect)((function(){!function e(){if("undefined"!==typeof window.google&&"undefined"!==typeof window.MarkerClusterer&&"undefined"!==typeof window.MapLabel){var t=new window.google.maps.Map(o.current,{disableDefaultUI:!0,fullscreenControl:!1,keyboardShortcuts:!1,mapTypeControl:!1,noClear:!0,zoomControl:!1,panControl:!1,overviewMapControl:!1,rotateControl:!1,scaleControl:!1,streetViewControl:!1,center:{lat:-34.397,lng:150.644},zoom:8,styles:[{elementType:"geometry",stylers:[{color:"#13002d"}]},{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"administrative",stylers:[{color:"#370087"}]},{featureType:"landscape.natural.terrain",stylers:[{color:"#44003a"}]},{featureType:"road",stylers:[{color:"#6e6c6d"},{weight:.5}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#7d006c"}]}]});n(t)}else setTimeout(e,1e3)}()}),[]),r.a.createElement("div",{ref:o,className:"MapView"})}),Ya=function(e){return e.positions},Ja=function(e){return Object(Bt.createSelector)([Ya],(function(t){return Object(V.a)(t.values()).filter((function(t){var n=t.positionType;return e===n})).map((function(e){return{positionName:e.positionName,objectId:e.objectId}}))}))},Ga=function(e){var t=e.title,n=e.positionType,o=Object(a.useMemo)(Ja,[]),i=Object(c.d)((function(e){return o(e,n)}));return r.a.createElement("div",{key:"positionsList",className:"PositionsList"},r.a.createElement(xe,{title:t},i.map((function(e){return r.a.createElement(an,{key:e.objectId,onClick:function(){console.log(e.objectId)}},e.positionName)}))))},Ka=r.a.memo(Ga);Ga.defaultProps={title:void 0};var Qa=function(e){var t=e.positionTypes,n=void 0===t?[]:t;return r.a.createElement("div",{className:"lists Positions"},n.map((function(e){return r.a.createElement(Ka,{title:e,positionType:e})})))},Xa=(n(55),r.a.memo((function(e){var t=e.id,n=e.index,o=Object(a.useCallback)((function(){je.dispatch(mn({windows:[{id:t,value:{type:le}}]}))}),[]);return r.a.createElement(Ra,{index:n,done:function(){return je.dispatch(fn({id:t}))},classNames:["WorldMap"],title:"map",onClick:o,menu:r.a.createElement(r.a.Fragment,null,r.a.createElement(Qa,null))},r.a.createElement(za,null))}))),Za=function(e){return e.rooms},$a=function(e,t){var n=t.id;return e.rooms.get(n)},_a=Ut()([Za],(function(e){return Object(V.a)(e.values()).filter((function(e){return!e.isWhisper&&!e.isUser}))}))((function(){return"normalRooms"})),er=Ut()([Za],(function(e){return Object(V.a)(e.values()).filter((function(e){return e.isWhisper})).map((function(e){return{objectId:e.objectId,participantIds:e.participantIds}}))}))((function(){return"whisperRooms"})),tr=Ut()([_a,Gt],(function(e,t){return e.filter((function(e){return!t.followingRooms.includes(e.objectId)})).map((function(e){return{roomName:e.roomName,objectId:e.objectId}})).sort((function(e,t){var n=e.roomName.toLowerCase(),a=t.roomName.toLowerCase();return n>a||a<n?1:0})).map((function(e){return e.objectId}))}))((function(){return"unfollowedRooms"})),nr=Ut()([_a,Gt],(function(e,t){return e.filter((function(e){return t.followingRooms.includes(e.objectId)})).map((function(e){return e.objectId}))}))((function(){return"followedRooms"})),ar=Ut()([er,function(e,t){return{identityId:t.identityId,currentIdentityId:t.currentIdentityId}},function(e,t){var n=t.identityId;return $a(e,{id:n})}],(function(e,t,n){var a=t.currentIdentityId,r=t.identityId;return e.find((function(e){return e.participantIds.includes(a)&&e.participantIds.includes(r)}))||n}))((function(e,t){var n=t.currentIdentityId,a=t.identityId;return"whisper-".concat(n,"-").concat(a)})),rr=Ut()([Xt,tn,function(e,t){return t.ids}],(function(e,t,n){var a=e.get(n[0]),r=e.get(n[1]);return t.find((function(e){var t=e.objectId;return a.objectId===t||a.ownerId===t||a.userIds.includes(t)}))?"".concat(a.username||a.aliasName," > ").concat(r.username||a.aliasName):"".concat(r.username||a.aliasName," > ").concat(a.username||a.aliasName)}))((function(e,t){var n=t.ids;return"w-name-".concat(n.join(" "))}));function or(){return(or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function cr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ir=r.a.createElement("rect",{x:3,y:11,width:18,height:11,rx:2,ry:2}),lr=r.a.createElement("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}),sr=function(e){var t=e.svgRef,n=e.title,a=cr(e,["svgRef","title"]);return r.a.createElement("svg",or({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-lock",ref:t},a),n?r.a.createElement("title",null,n):null,ir,lr)},ur=r.a.forwardRef((function(e,t){return r.a.createElement(sr,or({svgRef:t},e))})),dr=(n.p,n(56),r.a.memo((function(e){var t=e.roomId,n=Object(c.d)((function(e){return $a(e,{id:t})}));return r.a.createElement(an,{classNames:["RoomItem"],key:t,onClick:function(){return je.dispatch(mn({windows:[{id:"".concat(Ee,"-").concat(t),value:{type:Ee,roomId:t}}]}))}},n.roomName,n.isLocked&&r.a.createElement("div",{className:"lock"},r.a.createElement(ur,null)))}))),mr=r.a.memo((function(e){var t=e.onChange,n=Object(c.d)(tr);return r.a.createElement(xe,{dropdown:!0,checkWidth:!0,key:"roomList",classNames:["RoomList"],title:"Rooms"},n.map((function(e){return r.a.createElement(dr,{key:e,roomId:e,onChange:t})})))})),fr=r.a.memo((function(e){var t=e.room,n=e.onChange,a=Object(c.d)((function(e){return rr(e,{ids:t.participantIds})}));return r.a.createElement(an,{key:t.objectId,onClick:function(){n({roomId:t.objectId,roomName:a})}},a)})),pr=r.a.memo((function(e){var t=e.onChange,n=Object(c.d)(er);return r.a.createElement(xe,{dropdown:!0,checkWidth:!0,key:"whisperList",classNames:["WhisperList"],title:"PM"},n.map((function(e){return r.a.createElement(fr,{key:e.objectId,room:e,onChange:t})})))})),hr=function(e){var t=e.roomId,n=e.onChange,a=e.classNames,o=void 0===a?[]:a,i=Object(c.d)((function(e){return $a(e,{id:t})}));return r.a.createElement(an,{classNames:["FollowingItem"].concat(o),key:t,onClick:function(){n({roomId:t})}},i.roomName)},vr=r.a.memo(hr);hr.defaultProps={classNames:[]};var gr=r.a.memo((function(e){var t=e.onChange,n=e.roomId,a=Object(c.d)(nr);return r.a.createElement(xe,{dropdown:!0,checkWidth:!0,key:"followingList",classNames:["FollowingList"],title:"Joined"},a.map((function(e){return r.a.createElement(vr,{classNames:["".concat(e===n?"selected":"")],key:e,roomId:e,onChange:t})})))})),yr=r.a.memo((function(e){var t=e.onChange,n=e.roomId,a=Object(c.d)(Kt);return r.a.createElement(r.a.Fragment,null,a>=ne&&r.a.createElement(r.a.Fragment,null,r.a.createElement(gr,{roomId:n,key:"following",onChange:t}),r.a.createElement(pr,{key:"whisper",onChange:t}),r.a.createElement(mr,{key:"room",onChange:t})),r.a.createElement(Da,{onDone:t,key:"user"}))})),br=n(6);function Er(){return(Er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function wr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Or=r.a.createElement("polyline",{points:"4 14 10 14 10 20"}),jr=r.a.createElement("polyline",{points:"20 10 14 10 14 4"}),kr=r.a.createElement("line",{x1:14,y1:10,x2:21,y2:3}),Ir=r.a.createElement("line",{x1:3,y1:21,x2:10,y2:14}),xr=function(e){var t=e.svgRef,n=e.title,a=wr(e,["svgRef","title"]);return r.a.createElement("svg",Er({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-minimize-2",ref:t},a),n?r.a.createElement("title",null,n):null,Or,jr,kr,Ir)},Nr=r.a.forwardRef((function(e,t){return r.a.createElement(xr,Er({svgRef:t},e))})),Cr=(n.p,n(57),r.a.forwardRef((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=e.onRemove,o=e.width,c=e.height,l=e.classNames,s=void 0===l?[]:l,u=e.altText,d=void 0===u?"":u,m=e.fullImage,f=e.fullWidth,p=e.fullHeight,h=arguments.length>1?arguments[1]:void 0,v=Object(a.useRef)(null),g=Object(a.useState)(!1),y=Object(i.a)(g,2),b=y[0],E=y[1];Object(a.useEffect)((function(){!b&&v.current&&v.current.scrollIntoView()}),[b]);var w=function(e){m&&(E(!b),e.stopPropagation())};return r.a.createElement("div",{role:"complementary",ref:v,className:"".concat(["Image",b?"full":""].concat(s).join(" ")),onClick:w},n&&r.a.createElement("div",{className:"clickable",role:"complementary",onClick:function(e){n(),e.stopPropagation()}},"X"),m&&r.a.createElement("div",{onClick:w,className:"clickable",role:"complementary"},b?r.a.createElement(Nr,null):r.a.createElement(ha,null)),r.a.createElement("img",{className:m?"clickable":"",onClick:w,width:b?f:o,height:b?p:c,ref:h,src:b?m:t,alt:d}))}))),Sr=Cr;function Rr(){return(Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Pr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}Cr.defaultProps={altText:"",classNames:[],onRemove:void 0,width:void 0,height:void 0,fullImage:void 0,fullWidth:void 0,fullHeight:void 0};var Tr=r.a.createElement("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2}),Lr=r.a.createElement("circle",{cx:8.5,cy:8.5,r:1.5}),Fr=r.a.createElement("polyline",{points:"21 15 16 10 5 21"}),Ar=function(e){var t=e.svgRef,n=e.title,a=Pr(e,["svgRef","title"]);return r.a.createElement("svg",Rr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-image",ref:t},a),n?r.a.createElement("title",null,n):null,Tr,Lr,Fr)},Mr=r.a.forwardRef((function(e,t){return r.a.createElement(Ar,Rr({svgRef:t},e))})),Wr=(n.p,n(58),r.a.memo((function(e){var t=e.useIcon,n=void 0!==t&&t,o=Object(br.c)(),c=o.register,l=o.setValue,s=Object(a.useRef)(null),u=Object(a.useState)(),d=Object(i.a)(u,2),m=d[0],f=d[1],p=Object(br.d)({name:"image"});Object(a.useEffect)((function(){c("image")}),[]),Object(a.useEffect)((function(){l("image",m||void 0)}),[m]),Object(a.useEffect)((function(){console.log(p),p||f()}),[p]);return r.a.createElement("div",{className:"ImageUpload"},r.a.createElement("input",{key:"uploadInput",className:"hide",ref:s,type:"file",accept:"image/png, image/jpeg, image/pjpeg",onChange:function(e){var t=(e.target.files||[])[0];if(t){var n=new FileReader;n.addEventListener("load",(function(){if(n.result){var e={imageName:t.name,source:n.result};f(e)}})),n.readAsDataURL(t)}}}),r.a.createElement(Sr,{onRemove:function(){return f()},classNames:["previewImage"].concat([m?"":"hide"]),image:m?m.source:"",altText:"Image preview"}),r.a.createElement(k,{type:"button",onClick:function(){s.current.click()}},r.a.createElement(Mr,null),!n&&r.a.createElement("span",null,"Upload image")))}))),Dr=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a,r,o,c,i,l;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.text,a=t.roomId,r=t.image,o=$a(je.getState(),{id:a}),c=o.isWhisper?o.participantIds:[],i={roomId:a,ownerAliasId:Ye(je.getState())||void 0,text:n.split("\n")},o.isUser?(i.messageType=X,c.push(Ge(je.getState())),c.push(a)):o.isWhisper?i.messageType=X:i.messageType=Q,e.next=7,Wt(jt,{message:i,image:r,participantIds:c});case 7:return l=e.sent,je.dispatch(Ke({messages:[l.message]})),e.abrupt("return",{message:l.message,switchRoom:!0});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hr=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a,r,o,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,a=t.text,r=t.image,o={messageType:Z,text:[n].concat(a.split("\n")),roomId:p(je.getState())},e.next=4,Wt(jt,{message:o,image:r});case 4:return c=e.sent,je.dispatch(Ke({messages:[c.message]})),e.abrupt("return",{message:c.message});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Br=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.next=3,Wt(Ct,{roomId:n});case 3:return a=e.sent,je.dispatch(Ke({messages:a.messages})),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function qr(){return(qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ur(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Vr=r.a.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),zr=r.a.createElement("circle",{cx:12,cy:10,r:3}),Yr=function(e){var t=e.svgRef,n=e.title,a=Ur(e,["svgRef","title"]);return r.a.createElement("svg",qr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map-pin",ref:t},a),n?r.a.createElement("title",null,n):null,Vr,zr)},Jr=r.a.forwardRef((function(e,t){return r.a.createElement(Yr,qr({svgRef:t},e))}));n.p;function Gr(){return(Gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Kr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Qr=r.a.createElement("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),Xr=r.a.createElement("line",{x1:7,y1:7,x2:7.01,y2:7}),Zr=function(e){var t=e.svgRef,n=e.title,a=Kr(e,["svgRef","title"]);return r.a.createElement("svg",Gr({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-tag",ref:t},a),n?r.a.createElement("title",null,n):null,Qr,Xr)},$r=r.a.forwardRef((function(e,t){return r.a.createElement(Zr,Gr({svgRef:t},e))}));n.p;function _r(){return(_r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function eo(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var to=r.a.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),no=r.a.createElement("polyline",{points:"14 2 14 8 20 8"}),ao=r.a.createElement("line",{x1:12,y1:18,x2:12,y2:12}),ro=r.a.createElement("line",{x1:9,y1:15,x2:15,y2:15}),oo=function(e){var t=e.svgRef,n=e.title,a=eo(e,["svgRef","title"]);return r.a.createElement("svg",_r({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-file-plus",ref:t},a),n?r.a.createElement("title",null,n):null,to,no,ao,ro)},co=r.a.forwardRef((function(e,t){return r.a.createElement(oo,_r({svgRef:t},e))})),io=(n.p,n(59),function(e){var t=e.roomId,n=e.onSend,o=e.minAccessLevel,i=void 0===o?ne:o,l=Object(br.b)(),s=Object(a.useRef)(null),u=Object(a.useRef)(null),f=Object(c.d)(Ve),p=Object(c.d)(Kt),h=Object(c.d)(d),v=Object(c.d)(m),g=function(){if(s.current){var e=s.current;e.style.height&&e.scrollHeight.toString()===e.style.height.split("px")[0]||(e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px"),s.current.scrollIntoView())}};return r.a.createElement("div",{className:"InputArea"},r.a.createElement(br.a,l,r.a.createElement("form",{onSubmit:l.handleSubmit((function(e){var a=e.text,r=e.image;Dr({roomId:t,image:r,text:a}).then((function(e){var t=e.message,a=e.switchRoom;l.setValue("text",""),l.setValue("image",void 0),g(),a&&n({roomId:t.roomId})})).catch((function(e){console.log("error",e)}))}))},p>=i&&r.a.createElement("div",{key:"buttonBox",className:"buttonBox"},h.CHAT&&r.a.createElement(Wr,{useIcon:!0}),r.a.createElement(k,{onClick:function(){}},r.a.createElement($r,null)),r.a.createElement(k,{onClick:function(){}},r.a.createElement(co,null)),v&&r.a.createElement(k,{onClick:function(){}},r.a.createElement(Jr,null)),r.a.createElement(aa,null)),r.a.createElement("div",{className:"input"},r.a.createElement("textarea",{maxLength:600,name:"text",key:"input",rows:1,ref:function(e){l.register(e),s.current=e},onKeyDown:function(e){var t=e.key;e.altKey&&"Enter"===t&&u.current&&u.current.click()},placeholder:f?"Alt+Enter to send message":"Offline. Reconnecting to server...",className:[].join(" "),onChange:function(e){return g(e.target)}}),r.a.createElement(k,{ref:u,disabled:!f,key:"send",type:"submit",classNames:["sendButton"],onClick:function(){}},"Send")))))}),lo=r.a.memo(io);io.defaultProps={minAccessLevel:ne};var so=function(e,t){var n=t.id;return e.messages.get(n)},uo=function(e){return e.messages},mo=Ut()([uo,function(e,t){return t.roomId}],(function(e,t){return Object(V.a)(e.values()).filter((function(e){return e.roomId===t}))}))((function(e,t){return t.roomId})),fo=Ut()([uo],(function(e){return Object(V.a)(e.values()).filter((function(e){return e.messageType===Z}))}))((function(){return"news"})),po=Ut()([fo],(function(e){return e.map((function(e){return{objectId:e.objectId,points:e.points}}))}))((function(){return"news-ids"})),ho=Ut()([mo],(function(e){return e.map((function(e){return e.objectId}))}))((function(e,t){var n=t.roomId;return"id-".concat(n)})),vo=(n(60),r.a.memo((function(e){var t=e.identityId,n=e.timeCreated,a=Object(c.d)((function(e){return $t(e,{id:t})})),o=Object(c.d)((function(e){return h(e,{date:n})}));return r.a.createElement("p",{className:"MessageInfo"},r.a.createElement("span",{role:"button",tabIndex:0,className:"clickable username",onClick:function(e){a&&je.dispatch(mn({windows:[{id:"".concat(de,"-").concat(a.objectId),value:{identityId:a.objectId,type:de}}]})),e.stopPropagation()}},a?a.username||a.aliasName:"-"),r.a.createElement("span",{className:"time"},o.fullStamp))}))),go=(n(61),function(e){var t=e.previousMessageId,n=e.messageId,a=Object(c.d)((function(e){return so(e,{id:t})})),o=Object(c.d)((function(e){return so(e,{id:n})})),i=re({objectToAccess:o,toAuth:Gt(je.getState())}).hasFullAccess;return r.a.createElement(an,{classNames:["MessageItem","".concat(i?"clickable":"")],key:n},!(!!a&&!(new Date(o.lastUpdated).getTime()-9e5>new Date(a.lastUpdated).getTime())&&(!(!a.ownerAliasId||!o.ownerAliasId||a.ownerAliasId!==o.ownerAliasId)||!a.ownerAliasId&&!o.ownerAliasId&&a.ownerId===o.ownerId))&&r.a.createElement(vo,{identityId:o.ownerAliasId||o.ownerId,timeCreated:o.customTimeCreated||o.timeCreated}),r.a.createElement("div",{className:"text"},o.text.map((function(e,t){return r.a.createElement("p",{key:t},e)})),o.image&&o.image.thumbFileName&&r.a.createElement(Sr,{image:"/upload/images/".concat(o.image.thumbFileName),altText:"pic",width:o.image.thumbWidth,height:o.image.thumbHeight,fullImage:"/upload/images/".concat(o.image.fileName),fullWidth:o.image.width,fullHeight:o.image.height})))}),yo=r.a.memo(go);go.defaultProps={previousMessageId:void 0};n(62);var bo=function(e){var t=e.roomId,n=Object(c.d)((function(e){return ho(e,{roomId:t})}));return r.a.createElement(xe,{scrollTo:{buffer:!0,direction:"bottom"},classNames:["MessageList"]},n.map((function(e,t,n){return r.a.createElement(yo,{key:e,previousMessageId:n[t-1],messageId:e})})))},Eo=r.a.memo(bo);bo.defaultProps={roomId:void 0};n(63);var wo=function(e){var t=e.roomId,n=e.onSend,a=Object(c.d)(Kt);return r.a.createElement("div",{className:"Messages"},r.a.createElement("div",{className:"spacer"}),r.a.createElement(Eo,{key:"messagesList",roomId:t}),a>=ne&&r.a.createElement(lo,{onSend:n,roomId:t,key:"inputArea"}))},Oo=r.a.memo(wo);wo.defaultProps={roomId:void 0};var jo=r.a.memo((function(e){var t=e.children;return r.a.createElement(xe,{dropdown:!0,checkWidth:!0,classNames:["FileMenu"],title:"File"},t)})),ko=(n(64),function(e){var t=e.id,n=e.roomId,o=e.index,l=Object(a.useState)(n||u(je.getState())),s=Object(i.a)(l,2),d=s[0],m=s[1],f=Object(c.d)((function(e){return $a(e,{id:d})})),p=Object(c.d)(Gt);Object(a.useEffect)((function(){p&&!p.isAnonymous&&f||d===u(je.getState())||m(u(je.getState()))}),[f,p]),Object(a.useEffect)((function(){n&&d!==n&&m(n)}),[n]);var h=function(){if(!f)return"Chat";if(f.isUser){var e=$t(je.getState(),{id:d});return"PM: ".concat(e.aliasName||e.username)}return f.isWhisper?"PM: ".concat(rr(je.getState(),{ids:f.participantIds})):"Chat: ".concat(f.roomName)}(),v=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roomId;m(t)}),[]),g=Object(a.useCallback)((function(){je.dispatch(mn({windows:[{id:t,value:{type:ie}}]}))}),[]),y=Object(a.useCallback)((function(){return je.dispatch(fn({id:t}))}),[t]),b=Object(a.useCallback)((function(){return je.dispatch(mn({windows:[{id:me,value:{type:me}}]}))}),[]),E=re({objectToAccess:f,toAuth:p}).hasFullAccess;return r.a.createElement(Ra,{index:o,done:y,classNames:["Chat"],title:h,onClick:g,menu:r.a.createElement(r.a.Fragment,null,!p.isAnonymous&&r.a.createElement(jo,{key:"fileMenu"},r.a.createElement(an,{stopPropagation:!0,key:"createRoom",onClick:b},"New room"),E&&r.a.createElement(an,{stopPropagation:!0,key:"configRoom",onClick:function(){}},"Config room"),E&&!f.isWhisper&&!f.isUser&&!f.isSystemRoom&&!f.isTeam&&r.a.createElement(an,{stopPropagation:!0,key:"removeRoom",onClick:function(){return je.dispatch(mn({windows:[{id:fe,value:{type:fe,roomId:d}}]}))}},"Delete room")),r.a.createElement(yr,{roomId:d,key:"rooms",onChange:v}))},r.a.createElement(Oo,{key:"messages",roomId:d,onSend:v}))}),Io=r.a.memo(ko);ko.defaultProps={roomId:void 0};var xo=function(e){return e.windowOrder},No=(Ut()([xo,function(e,t){return t.id}],(function(e,t){return Object(V.a)(e.keys()).indexOf(t)}))((function(e,t){var n=t.id;return"index-".concat(n)})),n(65),n(66),function(e){var t=e.children,n=e.title,a=e.error,o=e.text,c=e.done,i=e.onClick,l=e.index,s=e.classNames,u=void 0===s?[]:s;return r.a.createElement(Ra,{index:l,type:"dialog",done:c,title:n,classNames:["Dialog"].concat(u),onClick:i},a&&r.a.createElement("div",{className:"error"},r.a.createElement("span",null,a.message)),o&&r.a.createElement("div",null,o),t)}),Co=r.a.memo(No);No.defaultProps={children:void 0,error:void 0,title:void 0,text:void 0,classNames:[]};var So=r.a.memo((function(e){var t=e.id,n=e.identityId,a=e.index,o=Object(c.d)((function(e){return $t(e,{id:n})})),i=Object(c.d)(Ge);return r.a.createElement(Co,{index:a,title:"User: ".concat(o.aliasName||o.username),onClick:function(){je.dispatch(mn({windows:[{id:t,value:{type:de,identityId:n}}]}))},done:function(){return je.dispatch(fn({id:t}))}},"-1"!==i&&r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{stopPropagation:!0,type:"button",onClick:function(){return Object(c.b)((function(){je.dispatch(mn({windows:[{id:"".concat(ge,"-").concat(n),value:{type:ge,toWalletId:n}}]})),je.dispatch(fn({id:t}))}))}},r.a.createElement(Tn,null)),r.a.createElement(k,{stopPropagation:!0,type:"button",onClick:function(){var e=ar(je.getState(),{identityId:n,currentIdentityId:i});Object(c.b)((function(){je.dispatch(mn({windows:[{id:ie,value:{type:ie,roomId:e.objectId}}]})),je.dispatch(fn({id:t}))}))}},r.a.createElement(bn,null))))})),Ro=function(e){var t=e.onChange,n=e.name,o=e.shouldEqual,c=e.maxLength,l=e.minLength,s=e.type,u=void 0===s?"text":s,d=e.required,m=void 0!==d&&d,f=e.placeholder,p=void 0===f?"":f,h=Object(br.c)(),v=h.register,g=h.getValues,y=Object(a.useState)(!1),b=Object(i.a)(y,2),E=b[0],w=b[1],O=Object(a.useState)(!1),j=Object(i.a)(O,2),k=j[0],I=j[1];return r.a.createElement("input",{minLength:l,maxLength:c,required:m,name:n,ref:v({maxLength:c,minLength:l,validate:function(e){return!o||e===g(o)||"Must match ".concat(o)}}),type:u,defaultValue:"",className:"Input ".concat(k?"empty":""),onFocus:function(){E?k&&I(!1):w(!0)},onBlur:function(e){E&&m&&I(!e.target.value||""===e.target.value)},onChange:function(e){t&&t(e.target.value)},placeholder:p})},Po=r.a.memo(Ro);Ro.defaultProps={placeholder:"",required:!1,type:"text",onChange:void 0,shouldEqual:void 0,maxLength:void 0,minLength:void 0};var To=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a,r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.room,a=Object(U.a)(Object(U.a)({},n),{},{ownerAliasId:Ye(je.getState())||void 0}),e.next=4,Wt(kt,{room:a});case 4:return r=e.sent,e.next=7,je.dispatch(it({room:r.room,user:r.user}));case 7:return e.abrupt("return",{room:r.room});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lo=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a,r,o;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,a=t.password,r={roomId:n,password:a,aliasId:Ye(je.getState())||void 0},e.next=4,Wt(Nt,r);case 4:return o=e.sent,e.next=7,Br({roomId:n});case 7:return e.next=9,je.dispatch(it({room:o.room,user:o.user}));case 9:return e.abrupt("return",{room:o.room,user:o.user});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fo=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.roomId,e.next=3,Wt(St,{roomId:n});case 3:return a=e.sent,e.next=6,je.dispatch(ct({rooms:[{objectId:n}]}));case 6:return e.abrupt("return",{room:a.room});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ao=r.a.memo((function(e){var t=e.id,n=e.index,a=Object(br.b)();return a.errors.repeatPassword&&a.setValue("repeatPassword",""),r.a.createElement(Co,{index:n,classNames:["CreateRoomDialog"],onClick:function(){je.dispatch(mn({windows:[{id:t,value:{type:me}}]}))},done:function(){return je.dispatch(fn({id:t}))},title:"New room"},r.a.createElement(br.a,a,r.a.createElement("form",{onSubmit:a.handleSubmit((function(e){var n=e.roomName,a=e.password,r=e.topic;To({room:{roomName:n,password:a,topic:r}}).then((function(e){var n=e.room;Object(c.b)((function(){je.dispatch(mn({windows:[{id:ie,value:{type:ie,roomId:n.objectId}}]})),je.dispatch(fn({id:t}))}))})).catch((function(e){return console.log(e)}))}))},r.a.createElement("div",{className:"identity"},r.a.createElement("span",null,"You are: "),r.a.createElement(aa,null)),r.a.createElement(Po,{required:!0,maxLength:20,name:"roomName",placeholder:"Name of the room"}),r.a.createElement(Po,{maxLength:300,name:"topic",placeholder:"(opt) Topic (shown when joining the room)"}),r.a.createElement(Po,{minLength:4,maxLength:100,name:"password",type:"password",placeholder:"(opt) Password"}),r.a.createElement(Po,{minLength:4,maxLength:100,shouldEqual:"password",name:"repeatPassword",type:"password",placeholder:"".concat(a.errors.repeatPassword?"Error. Passwords must match!":"(opt) Repeat password")}),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{type:"submit",onClick:function(){}},"Create")))))})),Mo=r.a.memo((function(e){var t=e.id,n=e.roomId,o=e.index,l=Object(a.useState)(),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(c.d)((function(e){return $a(e,{id:n})}));return r.a.createElement(Co,{index:o,classNames:["RemoveRoomDialog"],error:u,onClick:function(){je.dispatch(mn({windows:[{id:t,value:{type:fe,roomId:n}}]}))},done:function(){return je.dispatch(fn({id:t}))},title:"Delete room ".concat(m?m.roomName:""),text:"Are you sure you want to delete ".concat(m?m.roomName:"","?")},r.a.createElement(k,{type:"button",onClick:function(){return je.dispatch(fn({id:t}))}},"No"),r.a.createElement(k,{type:"submit",onClick:function(){Fo({roomId:n}).then((function(){Object(c.b)((function(){je.dispatch(mn({windows:[{id:ie,value:{type:ie}}]})),je.dispatch(fn({id:t}))}))})).catch((function(e){return d(e)}))}},"Yes"))})),Wo=r.a.memo((function(e){var t=e.id,n=e.index,o=Object(br.b)(),c=Object(a.useState)(),l=Object(i.a)(c,2),s=l[0],u=l[1],d=function(){var e=Object(Se.a)(Ce.a.mark((function e(n){var a,r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.username,r=n.password,Dt(a,r).then((function(){je.dispatch(fn({id:t}))})).catch((function(e){u(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Co,{index:n,classNames:["LoginDialog"],onClick:function(){je.dispatch(mn({windows:[{id:t,value:{type:he}}]}))},done:function(){return je.dispatch(fn({id:t}))},error:s,title:"Login"},r.a.createElement(br.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit(d)},r.a.createElement(Po,{name:"username",placeholder:"Username"}),r.a.createElement(Po,{name:"password",placeholder:"Password",type:"password"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{type:"submit",onClick:function(){}},"Login")))))})),Do=function(e){var t=e.onChange,n=e.children,o=e.name,c=e.defaultValue,l=e.required,s=void 0!==l&&l,u=e.placeholder,d=void 0===u?"":u,m=e.multiple,f=void 0!==m&&m,p=Object(br.c)().register,h=Object(a.useState)(!1),v=Object(i.a)(h,2),g=v[0],y=v[1],b=Object(a.useState)(!1),E=Object(i.a)(b,2),w=E[0],O=E[1],j=function(e){var t=Array.from(e.target.selectedOptions).filter((function(e){return""!==e.value}));g&&s&&O(0===t.length)};return r.a.createElement("select",{defaultValue:c,required:s,name:o,ref:p,className:"Select ".concat(w?"empty":""),onFocus:function(){return y(!0)},onBlur:j,onChange:function(e){j(e),t&&t(Array.from(e.target.selectedOptions).map((function(e){return e.value})).filter((function(e){return""!==e})))},placeholder:d,multiple:f},n)},Ho=Do;Do.defaultProps={multiple:!1,children:void 0,placeholder:"",required:!1,onChange:void 0};var Bo=function(e){var t=e.onChange,n=e.name,o=e.maxLength,c=e.required,l=void 0!==c&&c,s=e.placeholder,u=void 0===s?"":s,d=Object(br.c)().register,m=Object(a.useState)(!1),f=Object(i.a)(m,2),p=f[0],h=f[1],v=Object(a.useState)(!1),g=Object(i.a)(v,2),y=g[0],b=g[1];return r.a.createElement("textarea",{maxLength:o,required:l,name:n,ref:d({maxLength:o}),defaultValue:"",className:y?"empty":"",onFocus:function(){return h(!0)},onBlur:function(e){var t=e.target.value.trim();p&&l&&b(""!==t)},onChange:function(e){t&&t(e.target.value)},placeholder:u})},qo=Bo;Bo.defaultProps={placeholder:"",required:!1,onChange:void 0,maxLength:void 0};var Uo=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t).user.registerDevice=He(),e.next=4,Wt(Ot,n);case 4:return a=e.sent,e.next=7,je.dispatch(at(a));case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vo=r.a.memo((function(e){var t=e.id,n=e.index,o=Object(br.b)(),l=Object(a.useState)(),u=Object(i.a)(l,2),d=u[0],m=(u[1],Object(a.useState)()),f=Object(i.a)(m,2),p=f[0],h=f[1],v=Object(c.d)(s),g=function(){var e=Object(Se.a)(Ce.a.mark((function e(n){var a,r,o,c,i,l,s;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.offName,r=n.username,o=n.password,c=n.repeatPassword,i=n.pronouns,l=n.description,(!v||a)&&r&&o&&c&&i){e.next=3;break}return e.abrupt("return");case 3:if(o===c){e.next=5;break}return e.abrupt("return");case 5:return s={image:d,user:{offName:a,username:r,password:o,pronouns:i,description:l?l.split("\n"):void 0}},e.prev=6,e.next=9,Uo(s);case 9:return e.next=11,Dt(r,o);case 11:je.dispatch(fn({id:t})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),h(e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Co,{index:n,error:p,onClick:function(){je.dispatch(mn({windows:[{id:t,value:{type:pe}}]}))},done:function(){return je.dispatch(fn({id:t}))},title:"Register user"},r.a.createElement(br.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit(g)},v&&r.a.createElement(Po,{required:!0,name:"offName",placeholder:"Out-of-game name"}),r.a.createElement(Po,{required:!0,name:"username",placeholder:"Username"}),r.a.createElement(Ho,{multiple:!0,required:!0,name:"pronouns"},r.a.createElement("option",{value:""},"---Choose pronouns---"),r.a.createElement("option",{value:"they"},"They/Them"),r.a.createElement("option",{value:"she"},"She/Her"),r.a.createElement("option",{value:"he"},"He/Him"),r.a.createElement("option",{value:"it"},"It")),r.a.createElement(Po,{required:!0,name:"password",placeholder:"Password",type:"password"}),r.a.createElement(Po,{required:!0,shouldEqual:"password",name:"repeatPassword",placeholder:"Repeat password",type:"password"}),r.a.createElement(qo,{name:"description",placeholder:"Description"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{type:"submit",onClick:function(){}},"Register")))))})),zo=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt(wt,t);case 2:return n=e.sent,e.next=5,je.dispatch(ft(n));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yo=r.a.memo((function(e){var t=e.id,n=e.index,o=Object(br.b)(),c=Object(a.useState)(),l=Object(i.a)(c,2),s=l[0],u=(l[1],function(){var e=Object(Se.a)(Ce.a.mark((function e(n){var a,r,o;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.aliasName,r=n.pronouns,o=n.description,zo({image:s,alias:{aliasName:a,pronouns:r,description:o}}).then((function(){return je.dispatch(fn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(Co,{index:n,title:"New alias",onClick:function(){je.dispatch(mn({windows:[{id:t,value:{type:ve}}]}))},done:function(){return je.dispatch(fn({id:t}))}},r.a.createElement(br.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit(u)},r.a.createElement(Po,{required:!0,name:"aliasName",placeholder:"Alias name"}),r.a.createElement(Ho,{multiple:!0,required:!0,name:"pronouns"},r.a.createElement("option",{value:""},"---Choose pronouns---"),r.a.createElement("option",{value:"they"},"They/Them"),r.a.createElement("option",{value:"she"},"She/Her"),r.a.createElement("option",{value:"he"},"He/Him"),r.a.createElement("option",{value:"it"},"It")),r.a.createElement(qo,{name:"description",placeholder:"Description"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{stopPropagation:!0,type:"submit",onClick:function(){}},"Create")))))})),Jo=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a,r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,a=Object(U.a)(Object(U.a)({},n),{},{ownerAliasId:Ye(je.getState())||void 0}),e.next=4,Wt(xt,{transaction:a});case 4:return r=e.sent,e.next=7,je.dispatch(vt(r));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Go=r.a.memo((function(e){var t=e.id,n=e.toWalletId,a=e.index,o=Object(br.b)(),i=Object(c.d)(Ge),l=Object(c.d)(Ma),s=Object(c.d)((function(e){return Zt(e,{ids:l})})),u=Object(c.d)((function(e){return _t(e,{id:n})})),d=[],m=function(){var e=Object(Se.a)(Ce.a.mark((function e(a){var r,o,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.note,o=a.amount,c=a.fromWalletId,Jo({transaction:{note:r,amount:o,fromWalletId:c,toWalletId:n}}).then((function(){return je.dispatch(fn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.forEach((function(e){d.push(r.a.createElement("option",{key:e.objectId,value:e.objectId},e.teamName||e.aliasName||e.username))})),r.a.createElement(Co,{index:a,title:"Transfer to ".concat(u.teamName||u.aliasName||u.username),onClick:function(){je.dispatch(mn({windows:[{id:t,value:{type:ge,toWalletId:n}}]}))},done:function(){return je.dispatch(fn({id:t}))}},r.a.createElement(br.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit(m)},r.a.createElement("p",null,"You are making a transfer to ".concat(u.teamName||u.aliasName||u.username)),r.a.createElement("div",null,r.a.createElement("span",null,"From your wallet: "),r.a.createElement(Ho,{required:!0,defaultValue:i,name:"fromWalletId"},r.a.createElement("option",{value:""},"---Choose wallet---"),r.a.createElement(r.a.Fragment,null,d))),r.a.createElement(Po,{required:!0,name:"amount",placeholder:"Amount"}),r.a.createElement(Po,{name:"note",placeholder:"Note"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{stopPropagation:!0,type:"submit",onClick:function(){}},"Transfer")))))})),Ko=(n(67),function(e,t){var n=t.id;return e.docFiles.get(n)}),Qo=Ut()([function(e){return e.docFiles}],(function(e){return Object(V.a)(e.values()).map((function(e){return{objectId:e.objectId,title:e.title}}))}))((function(){return"docFile-ids-names"})),Xo=(n(68),r.a.memo((function(e){var t=e.docFileId,n=Object(c.d)((function(e){return Ko(e,{id:t})}));return r.a.createElement(an,{stopPropagation:!0,classNames:["DocFileItem"],key:n.objectId,onClick:function(){n.isLocked?console.log("clocked"):je.dispatch(mn({windows:[{id:se,value:{type:se,docFileId:t}}]}))}},n.title,n.isLocked&&r.a.createElement("div",{className:"lock"},r.a.createElement(ur,null)))}))),Zo=r.a.memo((function(){var e=Object(c.d)(Qo);return r.a.createElement(xe,{dropdown:!0,checkWidth:!0,title:"Documents"},e.sort((function(e,t){var n=e.title.toLowerCase(),a=t.title.toLowerCase();return n>a?1:n<a?-1:0})).map((function(e){var t=e.objectId;return r.a.createElement(Xo,{key:t,docFileId:t})})))})),$o=(n(69),r.a.memo((function(e){var t=e.docFileId,n=Object(c.d)((function(e){return Ko(e,{id:t})})),a=Object(c.d)((function(e){return _t(e,{id:n.ownerAliasId||n.ownerId})}));return r.a.createElement("div",{className:"DocFileViewer"},r.a.createElement("h1",{className:"title"},n.title),r.a.createElement("div",{className:"info"},r.a.createElement("p",{className:"author"},"Author: ".concat(a.teamName||a.aliasName||a.username)),r.a.createElement("p",{className:"code"},"Code: ".concat(n.code)),r.a.createElement("p",{className:"public"},"Public: ".concat(n.isPublic?"Yes":"No"))),r.a.createElement("div",{className:"text"},n.text.join("\n")))}))),_o=function(e){var t=e.id,n=e.docFileId,o=e.index,l=Object(a.useState)(),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(c.d)((function(e){return Ko(e,{id:n})}));Object(a.useEffect)((function(){n&&u!==n&&d(n)}),[n]);var f=Object(a.useCallback)((function(){je.dispatch(mn({windows:[{id:t,value:{type:se}}]}))}),[]),p=Object(a.useCallback)((function(){return je.dispatch(fn({id:t}))}),[t]),h=Object(a.useCallback)((function(e){return d(e)}),[]),v=Object(a.useCallback)((function(){return je.dispatch(mn({windows:[{id:ye,value:{type:ye}}]}))}));return r.a.createElement(Ra,{index:o,done:p,classNames:["DocFile"],title:"".concat(m?"Document: ".concat(m.title):"Documents"),onClick:f,menu:r.a.createElement(r.a.Fragment,null,r.a.createElement(jo,null,r.a.createElement(an,{stopPropagation:!0,onClick:v,key:"createDocFile"},"New document")),r.a.createElement(Zo,{onChange:h}))},!u&&r.a.createElement("div",null),u&&r.a.createElement($o,{key:"viewer",docFileId:u}))},ec=r.a.memo(_o);_o.defaultProps={docFileId:void 0};var tc=function(){var e=Object(Se.a)(Ce.a.mark((function e(t){var n,a,r,o;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.docFile,a=t.images,r=Object(U.a)(Object(U.a)({},n),{},{code:""!==n.code?n.code:void 0,ownerAliasId:Ye(je.getState())||void 0,text:n.text.split("\n")}),e.next=4,Wt(It,{docFile:r,images:a});case 4:return o=e.sent,e.next=7,je.dispatch(yt({docFiles:[o.docFile]}));case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nc=(n(70),r.a.memo((function(e){var t=e.id,n=e.index,o=Object(br.b)(),c=Object(a.useState)(),l=Object(i.a)(c,2),s=l[0],u=(l[1],function(){var e=Object(Se.a)(Ce.a.mark((function e(n){var a,r,o,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.title,r=n.text,o=n.code,c=n.isPublic,tc({images:s?[s]:void 0,docFile:{title:a,text:r,code:o,isPublic:c}}).then((function(){return je.dispatch(fn({id:t}))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement(Co,{index:n,classNames:["CreateDocFileDialog"],title:"New document",onClick:function(){je.dispatch(mn({windows:[{id:t,value:{type:ye}}]}))},done:function(){return je.dispatch(fn({id:t}))}},r.a.createElement(br.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit(u)},r.a.createElement("div",{className:"identity"},r.a.createElement("span",null,"You are:"),r.a.createElement(aa,null)),r.a.createElement("div",{className:"public"},r.a.createElement(Po,{type:"checkbox",name:"isPublic"}),r.a.createElement("span",null,"Do you want it to be available to the public? (A user with the right code can always access the document)")),r.a.createElement(Po,{required:!0,maxLength:40,name:"title",placeholder:"Title"}),r.a.createElement(Po,{name:"code",placeholder:"Code"}),r.a.createElement(qo,{required:!0,maxLength:3500,name:"text",placeholder:"Text"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{stopPropagation:!0,type:"submit",onClick:function(){}},"Create")))))})));n(71);function ac(){return(ac=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function rc(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var oc=r.a.createElement("line",{x1:5,y1:12,x2:19,y2:12}),cc=r.a.createElement("polyline",{points:"12 5 19 12 12 19"}),ic=function(e){var t=e.svgRef,n=e.title,a=rc(e,["svgRef","title"]);return r.a.createElement("svg",ac({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-arrow-right",ref:t},a),n?r.a.createElement("title",null,n):null,oc,cc)},lc=r.a.forwardRef((function(e,t){return r.a.createElement(ic,ac({svgRef:t},e))})),sc=(n.p,r.a.memo((function(e){var t=e.message;return r.a.createElement(an,{key:t.objectId,onClick:function(){return je.dispatch(mn({windows:[{id:ue,value:{type:ue,messageId:t.objectId}}]}))}},r.a.createElement("p",null,t.text[0],r.a.createElement(lc,null)))}))),uc=r.a.memo((function(){var e=Object(c.d)(Gt),t=Object(c.d)((function(t){return Aa(t,{id:e.objectId})})),n=Object(c.d)(fo),a=function(){return n&&0!==n.length?Object(V.a)(n).reverse().sort((function(e,t){var n=e.points,a=t.points;return n>a?-1:n<a?1:0})).slice(0,5).map((function(e){return r.a.createElement(sc,{key:e.objectId,message:e})})):[r.a.createElement(an,{key:"noNews"},"There are no news.")]};return r.a.createElement("div",{className:"Dashboard"},e.isAnonymous&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Welcome!"),r.a.createElement("p",null,h(je.getState(),{date:new Date}).fullDate),r.a.createElement(xe,{alwaysExpanded:!0,title:"Top News",classNames:["news"]},a())),!e.isAnonymous&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Welcome, ".concat(e.username,"!")),r.a.createElement("p",null,"Today's date is ".concat(h(je.getState(),{date:new Date}).fullDate)),t&&r.a.createElement("p",null,"You have ".concat(t.amount," in your wallet.")),r.a.createElement(xe,{alwaysExpanded:!0,title:"News",classNames:["news"]},a())))}));function dc(){return(dc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function mc(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var fc=r.a.createElement("polyline",{points:"6 9 12 15 18 9"}),pc=function(e){var t=e.svgRef,n=e.title,a=mc(e,["svgRef","title"]);return r.a.createElement("svg",dc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-down",ref:t},a),n?r.a.createElement("title",null,n):null,fc)},hc=r.a.forwardRef((function(e,t){return r.a.createElement(pc,dc({svgRef:t},e))}));n.p;function vc(){return(vc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function gc(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var yc=r.a.createElement("polyline",{points:"18 15 12 9 6 15"}),bc=function(e){var t=e.svgRef,n=e.title,a=gc(e,["svgRef","title"]);return r.a.createElement("svg",vc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-chevron-up",ref:t},a),n?r.a.createElement("title",null,n):null,yc)},Ec=r.a.forwardRef((function(e,t){return r.a.createElement(bc,vc({svgRef:t},e))})),wc=(n.p,n(72),function(e){var t=e.messageId,n=e.expand,o=void 0!==n&&n,l=e.classNames,s=void 0===l?[]:l,u=Object(a.useRef)(null),d=Object(a.useState)(o),m=Object(i.a)(d,2),f=m[0],p=m[1],v=Object(c.d)((function(e){return so(e,{id:t})})),g=Object(c.d)((function(e){return _t(e,{id:v.teamId||v.ownerAliasId||v.ownerId})}));return Object(a.useEffect)((function(){p(o)}),[o]),Object(a.useEffect)((function(){f&&u.current&&u.current.scrollIntoView()}),[f]),r.a.createElement(an,{elementId:"news-".concat(t),onClick:function(){return p(!f)},classNames:["NewsItem"].concat(s,[f?"expanded":""])},r.a.createElement("div",{ref:u,className:"title"},r.a.createElement("p",null,v.text[0]),r.a.createElement("p",{className:"info"},r.a.createElement("span",null,"".concat(h(je.getState(),{date:v.customTimeCreated||v.timeCreated}).halfDate," "),h(je.getState(),{date:v.customTimeCreated||v.timeCreated}).halfTime),r.a.createElement("span",null," By: ".concat(g.teamName||g.aliasName||g.username)),!f&&r.a.createElement(hc,null),f&&r.a.createElement(Ec,null))),f&&v.image&&v.image.thumbFileName&&r.a.createElement(Sr,{image:"/upload/images/".concat(v.image.thumbFileName),fullImage:"/upload/images/".concat(v.image.fileName),altText:"pic",width:v.image.thumbWidth,height:v.image.thumbHeight,fullWidth:v.image.width,fullHeight:v.image.height}),f&&r.a.createElement("div",{className:"text"},v.text.slice(1).map((function(e,t){return r.a.createElement("p",{key:t},e)}))))}),Oc=r.a.memo(wc);wc.defaultProps={classNames:[],expand:!1};n(73);var jc=function(e){var t=e.messageId,n=Object(a.useRef)(null),o=Object(c.d)(po);Object(a.useEffect)((function(){if(t&&n.current){var e=n.current.querySelector("#news-".concat(t));e&&e.scrollIntoView()}}),[t]);return r.a.createElement(xe,{ref:n,scrollTo:{buffer:!0,direction:"top"},classNames:["NewsList"]},0===o.length&&r.a.createElement(an,{key:"noNews"},r.a.createElement("p",null,"There are no news")),Object(V.a)(o).reverse().filter((function(e){return e.points&&e.points>0})).sort((function(e,t){var n=e.points,a=t.points;return n>a?-1:n<a?1:0})).slice(0,3).map((function(e){return r.a.createElement(Oc,{key:"top-".concat(e.objectId),messageId:e.objectId,classNames:["topNews"]})})),Object(V.a)(o).reverse().map((function(e){return r.a.createElement(Oc,{expand:e.objectId===t,key:e.objectId,messageId:e.objectId})})))},kc=r.a.memo(jc);jc.defaultProps={messageId:void 0};n(74);var Ic=function(e){var t=e.id,n=e.messageId,o=e.index,i=Object(c.d)((function(e){return $a(e,{id:p(e)})})),l=Object(a.useCallback)((function(){je.dispatch(mn({windows:[{id:t,value:{type:ue,messageId:n}}]}))}),[n]),s=Object(a.useCallback)((function(){return je.dispatch(fn({id:t}))}),[t]),u=Object(a.useCallback)((function(){return je.dispatch(mn({windows:[{id:be,value:{type:be}}]}))}),[]);return r.a.createElement(Ra,{index:o,done:s,classNames:["News"],title:"News",onClick:l,menu:r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(jo,null,r.a.createElement(an,{stopPropagation:!0,key:"createNews",onClick:u},"New article")))},r.a.createElement(kc,{messageId:n}))},xc=r.a.memo(Ic);Ic.defaultProps={messageId:void 0};var Nc=r.a.memo((function(e){var t=e.id,n=e.index,o=Object(br.b)(),l=Object(a.useState)(),s=Object(i.a)(l,2),u=s[0];s[1];return r.a.createElement(Co,{index:n,classNames:["CreateNewsDialog"],onClick:function(){je.dispatch(mn({windows:[{id:t,value:{type:be}}]}))},done:function(){return je.dispatch(fn({id:t}))},error:u,title:"New news article"},r.a.createElement(br.a,o,r.a.createElement("form",{onSubmit:o.handleSubmit((function(e){var n=e.title,a=e.text,r=e.image;console.log(n,a,r),r&&Hr({title:n,text:a,image:r}).then((function(e){var n=e.message;Object(c.b)((function(){je.dispatch(mn({windows:[{id:ue,value:{type:ue,messageId:n.objectId}}]})),je.dispatch(fn({id:t}))}))})).catch((function(e){return console.log(e)}))}))},r.a.createElement("div",{className:"identity"},r.a.createElement("span",null,"You are:"),r.a.createElement(aa,null)),r.a.createElement(Po,{required:!0,maxLength:150,name:"title",placeholder:"Title"}),r.a.createElement(Wr,null),r.a.createElement(qo,{required:!0,maxLength:550,name:"text",placeholder:"Text"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{type:"submit",onClick:function(){}},"Create")))))}));function Cc(){return(Cc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Sc(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Rc=r.a.createElement("rect",{x:3,y:11,width:18,height:11,rx:2,ry:2}),Pc=r.a.createElement("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"}),Tc=function(e){var t=e.svgRef,n=e.title,a=Sc(e,["svgRef","title"]);return r.a.createElement("svg",Cc({width:32,height:32,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-unlock",ref:t},a),n?r.a.createElement("title",null,n):null,Rc,Pc)},Lc=r.a.forwardRef((function(e,t){return r.a.createElement(Tc,Cc({svgRef:t},e))})),Fc=(n.p,r.a.memo((function(e){var t=e.roomId,n=e.id,o=e.index,l=Object(a.useState)(),s=Object(i.a)(l,2),u=s[0],d=s[1],m=Object(c.d)((function(e){return $a(e,{id:t})})),f=Object(c.d)(Gt),p=Object(br.b)(),h=re({objectToAccess:m,toAuth:f}).hasAccess;return r.a.createElement(Co,{error:u,index:o,classNames:["JoinRoomDialog"],onClick:function(){je.dispatch(mn({windows:[{id:n,value:{type:Ee,roomId:t}}]}))},done:function(){return je.dispatch(fn({id:n}))},title:h?"Join room ".concat(m.roomName):"Unlock room ".concat(m.roomName)},r.a.createElement(br.a,p,r.a.createElement("form",{onSubmit:p.handleSubmit((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.password;Lo({roomId:t,password:a}).then((function(){Object(c.b)((function(){je.dispatch(mn({windows:[{id:ie,value:{type:ie,roomId:t}}]})),je.dispatch(fn({id:n}))}))})).catch((function(e){var t=Object(U.a)({},e);console.log(e),"not allowed"===e.type&&(t.message="Incorrect password"),d(t)}))}))},r.a.createElement("div",{className:"identity"},r.a.createElement("span",null,"You are: "),r.a.createElement(aa,null)),r.a.createElement("div",null,h&&r.a.createElement("p",null,"Do you want to join room ".concat(m.roomName,"?")),h&&m.topic&&r.a.createElement("p",null,"Topic: ".concat(m.topic)),!h&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The room is locked."),r.a.createElement("p",null,"Enter the password to continue:"))),!h&&r.a.createElement(Po,{required:!h,minLength:4,maxLength:100,name:"password",type:"password",placeholder:"Password"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(k,{stopPropagation:!0,type:"button",onClick:function(){return je.dispatch(fn({id:n}))}},h?"No":"Cancel"),r.a.createElement(k,{stopPropagation:!0,type:"submit",onClick:function(){}},!h&&r.a.createElement(Lc,null),r.a.createElement("span",null,h?"Join":"Unlock"))))))}))),Ac=r.a.memo((function(){var e=Object(c.d)(xo),t=[];return e.forEach((function(e,n){var a=e.type;a===ie?t.push(r.a.createElement(Io,{key:n,id:n,roomId:e.roomId,index:e.index})):a===ce?t.push(r.a.createElement(Va,{key:n,id:n,index:e.index})):a===le?t.push(r.a.createElement(Xa,{key:n,id:n,index:e.index})):a===se?t.push(r.a.createElement(ec,{key:n,id:n,docFileId:e.docFileId,index:e.index})):a===ue?t.push(r.a.createElement(xc,{key:n,id:n,messageId:e.messageId,index:e.index})):a===de?t.push(r.a.createElement(So,{key:n,id:n,identityId:e.identityId,index:e.index})):a===me?t.push(r.a.createElement(Ao,{key:n,id:n,index:e.index})):a===he?t.push(r.a.createElement(Wo,{key:n,id:n,index:e.index})):a===pe?t.push(r.a.createElement(Vo,{key:n,id:n,index:e.index})):a===fe?t.push(r.a.createElement(Mo,{key:n,id:n,roomId:e.roomId,index:e.index})):a===ve?t.push(r.a.createElement(Yo,{key:n,id:n,index:e.index})):a===ge?t.push(r.a.createElement(Go,{key:n,id:n,toWalletId:e.toWalletId,index:e.index})):a===ye?t.push(r.a.createElement(nc,{key:n,id:n,index:e.index})):a===be?t.push(r.a.createElement(Nc,{key:n,id:n,index:e.index})):a===Ee&&t.push(r.a.createElement(Fc,{key:n,id:n,roomId:e.roomId,index:e.index}))})),r.a.createElement("div",{id:"MainWindow"},r.a.createElement(uc,null),t)}));var Mc=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(ca,null),r.a.createElement(ra,null),r.a.createElement(Ac,null)))},Wc=(n(75),n(76));Object(o.render)(r.a.createElement(c.a,{store:je},r.a.createElement(Mc,null)),document.getElementById("root")),Wc.ElementQueries.listen()}]),[[30,1,2]]]);
//# sourceMappingURL=main.ba3bb942.chunk.js.map