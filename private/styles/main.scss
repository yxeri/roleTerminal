/*
 Copyright 2018 Aleksandar Jankovic
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at
 http://www.apache.org/licenses/LICENSE-2.0
 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */

$background-color: rgba(0, 0, 0, 0.98);
$second-background-color: #23001e;
$text-color: white;
$second-text-color: #00ffef;
$second-color: #ff00d7;
$darker-color: #23001e;
$warning-color: #910001;
$greyed-out: #6f6f6f;
$focus-color: #000691;
$new-color: #009100;
$darker-new-color: #005f00;
$header-color: #2e001a;
$border-color: #ff00d7;
$dark-border-color: #730066;

$p-margin: .4em;
$border-width: .1em;
$top-row-height: 1.3em;
$map-box-padding: .5em;
$padding: .3em;
$border: $border-width solid $border-color;
$menu-min-width: 7em;
$menu-max-width: 11em;

html, body, div, span, p, a, img, ul, li, video, textarea, button, input, fieldset {
  margin: 0;
  padding: 0;
  border: 0;
  font: inherit;
  font-size: 100%;
  vertical-align: baseline;
}

button::-moz-focus-inner,
input::-moz-focus-inner {
  padding: 0;
  border: none;
}

html, body {
  height: 100%;
  width: 100%;
  background-color: $background-color;
  color: $text-color;
  font-family: monospace;
  font-size: 1em;
  -webkit-overflow-scrolling: touch;
}


span.clickable {
  cursor: pointer;
  text-decoration: underline;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}

h1, h2, h3, h4, h5, h6 {
  margin: 0;
  padding: 0;
}

ul, li {
  list-style: none;
  -webkit-overflow-scrolling: touch;
}

textarea {
  width: 100%;
  border-radius: 0;
}

textarea[readonly], input[readonly] {
  background-color: $greyed-out;
}

button {
  background-color: $darker-color;
  color: $second-text-color;
  box-sizing: border-box;
  border: $border;
  padding: $padding;
}

header {
  background-color: $header-color;
  box-sizing: border-box;
  border-top: $border;
  border-bottom: $border;
  color: $second-text-color;
}

span, p {
  min-height: 1em;
}

::-webkit-scrollbar {
  display: none;
}

.msgInfo {
  background-color: $header-color;
  color: $second-text-color;
}

.msgInfo:hover {
  background-color: $second-color;
}

.cover {
  background-color: rgba(0, 0, 0, .6);
  z-index: 9;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/****************
 * View Wrapper *
 ****************/

.column {
  overflow: hidden;
}

.viewWrapper {
  display: flex;
  height: 100%;
  width: 100%;
  flex-flow: row wrap;
}

.one {
  width: 100%;
}

.oneOfTwo {
  width: 50%;
  box-sizing: border-box;
}

.oneOfThree {
  width: 33%;
  box-sizing: border-box;
}

.withTopRow {
  height: calc(100% - #{$top-row-height});
  order: 2;
}

/**********
 * Dialog *
 **********/

.dialog {
  max-height: calc(99% - 4em);
  max-width: 30em;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  background-color: $background-color;
  border: $border-width solid $text-color;
  position: absolute;
  top: 2em;
  left: 0;
  right: 0;
  margin: 0 auto;
  padding: .5em;
  z-index: 10;

  input {
    width: 99%;
    padding: .1em;
    margin-bottom: $p-margin;
  }

  input:last-child {
    margin-bottom: 0;
  }

  #lowerButtons {
    float: right;
    padding-top: $p-margin;

    span {
      margin-right: $p-margin;
    }

    span:last-child {
      margin-right: 0;
    }
  }
}

/**********
 * Inputs *
 **********/

/*
 * A required input field that has been left empty.
 * The class is most commonly added when the input is blurred.
 */
.emptyInput {
  background-color: $warning-color;
}

/*********
 * Views *
 *********/

.docFileView, .forumView, .walletView, .worldMapView, .teamView, .chatView {
  .oneOfTwo {
    width: 0;
  }

  .oneOfTwo:first-child {
    flex-grow: 1;
    min-width: $menu-min-width;
    max-width: $menu-max-width;
  }

  .oneOfTwo:last-child {
    flex-grow: 5;
  }
}

.docFileView {
  .docFileHeader {
    border-bottom: $border-width solid $second-color;
    padding-bottom: $padding;
    margin-bottom: $padding;
    display: flex;
    flex-direction: column;

    span:first-child {
      font-size: 1.5em;
    }
  }

  .oneOfTwo:last-child {
    word-wrap: break-word;

    p {
      padding: $padding $padding;
    }
  }
}

.forumView, .docFileView {
  .column {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}

.columnList {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto;
}

/**************
 * Forum View *
 **************/

.forum {
  .postContainer {
    padding-left: 1em;
  }

  .subContainer {
    padding-left: 1em;
  }
}

/*************
 * Chat View *
 *************/

$msgList-msgInfo-border: .1em solid $second-color;
$msgList-li-padding: .5em;
$msgList-msgLine-side-padding: .2em;
$msgList-msgInfo-padding: .1em;
$msgList-textarea-border: .3em solid $darker-color;

.chatView {
  .msgList {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    word-wrap: break-word;

    li {
      padding-bottom: $msgList-li-padding;
    }

    .msgInfo {
      border-top: $msgList-msgInfo-border;
      border-bottom: $msgList-msgInfo-border;
      padding: $msgList-msgInfo-padding ($msgList-msgLine-side-padding / 2);
      margin-bottom: $p-margin;

      span {
        padding: 0 .2em;
      }

      span:first-child {
        padding-left: 0;
      }

      span:last-child {
        padding-right: 0;
      }
    }

    .msgLine {
      padding: 0 $msgList-msgLine-side-padding;
      margin-bottom: $p-margin;
    }

    .msgLine:last-child {
      margin-bottom: 0;
    }

    .msgRoomName:before {
      content: '[';
    }

    .msgRoomName:after {
      content: ']';
    }
  }

  .inputArea {
    padding-top: .5em;
    margin-top: auto;

    textarea {
      width: calc(100% - (#{$msgList-msgLine-side-padding} * 2));
      padding: 0 $msgList-msgLine-side-padding;
      border-top: $msgList-textarea-border;
      border-bottom: $msgList-textarea-border;
    }
  }

  .columnChat {
    overflow-y: auto;
    display: flex;
    flex-direction: column;
  }
}

.userRoomList {
  li:first-child {
    padding-top: $padding;
  }
}

.columnRoomList, .columnPositionList {
  padding-top: $padding;

  .list {
    margin-bottom: $padding;
  }

  .list:last-child {
    margin-bottom: 0;
  }

  li {
    border-bottom: $border;
    border-color: $dark-border-color;
    padding-top: .1em;
    padding-bottom: .1em;
  }
}

/*********
 * Lists *
 *********/

/*
 * Generic list.
 */

.list {
  word-wrap: break-word;
}

/*
 * A list of rooms.
 */
.roomList, .userList {
  li:hover {
    background-color: $second-color;
  }
}

.positionList {
  display: inline-block;
  border-bottom: 10px $darker-color solid;
  width: 20%;
}

/*
 * A list item that has focus in a list.
 */
.focusListItem {
  background-color: $focus-color;
  text-decoration: underline;
}

/*
 * A marked list item in a list.
 * A list item will be marked when the object that it's connected to is updated.
 */
.markListItem {
  background-color: $darker-new-color;
}

/**
 * A new list item in the list.
 * A list item added to a list will temporarily have the newListItem class.
 * The class is removed after a set amount of time.
 */
.newListItem {
  animation: flash;
  animation-timing-function: ease-in-out;
  animation-iteration-count: 1;
  animation-duration: .4s;
}

.flash {
  animation: flash;
  animation-timing-function: ease-in-out;
  animation-iteration-count: 1;
  animation-duration: .4s;
}

@keyframes flash {
  0% {
    background-color: $new-color;
    color: $new-color;
  }

  100% {
    color: inherit;
    background-color: inherit;
    text-shadow: inherit;
  }
}

/**
 * A list item that will be removed from a list.
 * The class is removed after a set amount of time.
 */
.removeListItem {
  background-color: $warning-color;
  color: $warning-color;
}

/*************
 * World Map *
 *************/

$map-box-border-weight: .1em;
$map-box-border: $map-box-border-weight solid $second-color;
$map-box-left: .2em;
$map-padding-fix: 2em;

.worldMapPage {
  padding-top: $map-padding-fix; // Gmaps fix
  overflow: hidden;
  height: 100%;
  width: 100%;

  a {
    display: none !important;
  }
}

.mapLeftClickBox {
  position: absolute;
  z-index: 3;
  top: $map-box-left;
  left: $map-box-left;
  width: calc(100% - ((#{$map-box-left} * 2) + (#{$map-box-padding} * 2) + (#{$map-box-border-weight} * 2)));
  max-width: 30em;
  max-height: calc(100% - (#{$map-padding-fix * 1.5} + (#{$map-box-left} * 2) + (#{$map-box-padding} * 2) + (#{$map-box-border-weight} * 2)));
  padding: $map-box-padding;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  background-color: $background-color;
  border: $map-box-border;

  header {
    border: 0;
    background-color: inherit;
    font-size: 1.1em;
  }

  p {
    margin-bottom: $p-margin;
  }
}

.mapRightClickBox {
  position: fixed;
  z-index: 3;
  background-color: $background-color;
  border: $map-box-border;
  padding: .2em;
  max-width: 15em;
}

.fallbackMapRightClickBox {
  position: absolute;
  z-index: 3;
  top: $map-box-left;
  left: $map-box-left;
  max-width: 15em;
  padding: .2em;
  background-color: $background-color;
  border: $map-box-border;
}

/********
 * Misc *
 ********/

#main {
  height: 100%;
  width: 100%;

  .viewWrapper {
    > .oneOfTwo {
      border-right: $border;
    }

    > .oneOfTwo:last-child {
      border-right: 0;
    }

    > .oneOfThree {
      border-right: $border;
    }

    > .oneOfThree:last-child {
      border-right: $border;
    }
  }
}

.clickable {
  cursor: pointer;
}

.statusBar {
  order: 1;
  width: 100%;
  box-sizing: border-box;
  border-bottom: $border;
  background-color: $header-color;
  display: flex;
  z-index: 8;
  color: $text-color;
  font-size: 1.1em;

  > span {
    margin-right: .5em;
  }

  > span:last-child {
    margin-right: 0;
  }

  > div {
    margin-right: .5em;
  }

  .clickable {
    text-decoration: none;
  }

  .topMenuButton {
    font-weight: bold;
    background-color: $text-color;
    color: $darker-color;
    padding-left: .1em;
    padding-right: .1em;
  }

  .topMenu {
    position: absolute;
    background-color: $second-background-color;
    max-width: 12em;
    z-index: 9;

    button {
      width: 100%;
    }

    p {
      background-color: $darker-color;
      color: $text-color;
      box-sizing: border-box;
      border-bottom: $border;
      border-left: $border;
      border-right: $border;
      width: 100%;
      padding: .3em 0;
      text-align: center;

      span {
        padding: 0 .3em;
      }
    }
  }
}

.hide {
  display: none;
}

.hideOverflow {
  overflow: hidden;
}

@media (orientation: portrait) {
  #main {
    > .viewWrapper {
      > .oneOfTwo:last-child {
        display: none;
      }

      > .oneOfTwo {
        border-right: 0;
      }

      > .oneOfThree {
        border-right: 0;
      }
    }
  }

  .viewWrapper {
    width: 100%;
  }

  .oneOfTwo {
    width: 100%;
  }

  .mapLeftClickBox {
    left: 0;
    width: calc(100% - ((#{$map-box-padding} * 2) + (#{$map-box-border-weight} * 2)));
  }
}
