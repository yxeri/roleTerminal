{"version":3,"sources":["library/components/common/ImageUpload/imageIcon.png","library/TextTools.js","library/redux/selectors/config.js","library/components/MenuBar/sub-components/Clock.jsx","library/components/common/lists/List/List.jsx","library/AccessCentral.js","library/icons/maximize.svg","library/icons/close.svg","library/components/common/sub-components/Button/Button.jsx","library/components/common/Window/TopBar/TopBar.jsx","library/components/common/Window/Window.jsx","library/components/common/dialogs/Dialog/Dialog.jsx","library/redux/actionTypes.js","library/redux/reducers/root.js","library/redux/reducers/online.js","library/redux/reducers/config.js","library/redux/reducers/windowOrder.js","library/redux/reducers/index.js","library/redux/reducers/users.js","library/redux/reducers/aliases.js","library/redux/reducers/messages.js","library/redux/reducers/rooms.js","library/redux/reducers/userId.js","library/redux/reducers/positions.js","library/redux/reducers/transactions.js","library/redux/reducers/wallets.js","library/redux/reducers/aliasId.js","library/redux/store.js","library/StorageManager.js","library/Converters.js","library/redux/actions/auth.js","library/redux/selectors/online.js","library/redux/actions/online.js","library/redux/selectors/userId.js","library/redux/selectors/aliasId.js","library/redux/actions/messages.js","library/socket/listeners/messages.js","library/redux/actions/users.js","library/redux/actions/rooms.js","library/socket/listeners/rooms.js","library/socket/listeners/users.js","library/socket/SocketManager.js","library/socket/actions/auth.js","library/components/common/sub-components/Input.jsx","library/components/common/dialogs/LoginDialog.jsx","library/components/common/sub-components/Select.jsx","library/components/common/sub-components/Textarea.jsx","library/socket/actions/users.js","library/components/common/dialogs/RegisterDialog.jsx","library/redux/selectors/aliases.js","library/redux/selectors/users.js","library/components/helper.jsx","library/components/common/lists/List/Item/ListItem.jsx","library/icons/menu.svg","library/components/MenuBar/lists/MainList.jsx","library/icons/chat.svg","library/icons/map.svg","library/icons/wallet.svg","library/redux/actions/windowOrder.js","library/components/MenuBar/lists/OpenApps.jsx","library/components/MenuBar/MenuBar.jsx","library/components/DataHandler.jsx","library/redux/selectors/wallets.js","library/redux/selectors/transactions.js","library/components/Wallet/lists/Transaction/Item/TransactionItem.jsx","library/components/Wallet/lists/Transaction/TransactionList.jsx","library/components/Wallet/Wallet.jsx","library/components/WorldMap/views/MapView.jsx","library/redux/selectors/positions.js","library/components/WorldMap/lists/Position/PositionList.jsx","library/components/WorldMap/views/Positions.jsx","library/components/WorldMap/WorldMap.jsx","library/redux/selectors/rooms.js","library/components/common/dialogs/UserDialog.jsx","library/components/common/lists/UserList.jsx","library/socket/actions/messages.js","library/socket/actions/rooms.js","library/components/Chat/lists/Room/Item/RoomItem.jsx","library/components/Chat/lists/Room/RoomList.jsx","library/components/Chat/lists/Whisper/Item/WhisperItem.jsx","library/components/Chat/lists/Whisper/WhisperList.jsx","library/components/Chat/lists/Following/Item/FollowingItem.jsx","library/components/Chat/lists/Following/FollowingList.jsx","library/components/Chat/views/Rooms.jsx","library/components/common/sub-components/Image.jsx","library/components/common/ImageUpload/ImageUpload.jsx","library/components/Chat/sub-components/InputArea/InputArea.jsx","library/redux/selectors/messages.js","library/components/Chat/sub-components/MessageInfo/MessageInfo.jsx","library/components/Chat/lists/Message/Item/MessageItem.jsx","library/components/Chat/lists/Message/MessageList.jsx","library/components/Chat/views/Messages/Messages.jsx","library/components/common/lists/FileMenu.jsx","library/components/Chat/dialogs/CreateRoomDialog.jsx","library/components/Chat/dialogs/RemoveRoomDialog.jsx","library/components/Chat/Chat.jsx","library/redux/selectors/windowOrder.js","library/components/MainWindow/MainWindow.jsx","App.jsx","index.jsx"],"names":["module","exports","beautifyNumber","number","getRequireOffName","state","config","get","getPublicRoomId","getAllowedImages","getTimestamp","date","offset","lockDate","newDate","Date","timestamp","yearModification","dayModification","setHours","getHours","Number","isNaN","setFullYear","getFullYear","parseInt","setDate","getDate","mins","getMinutes","hours","seconds","getSeconds","month","getMonth","day","year","halfTime","fullTime","halfDate","fullDate","fullStamp","Clock","useState","now","useSelector","useEffect","updateTime","setTimeout","key","className","ListItems","React","memo","items","List","children","title","scrollTo","dropdown","classNames","listRef","useRef","windowRef","hidden","setHidden","listClasses","classes","concat","current","direction","lastElementChild","scrollIntoView","push","join","role","tabIndex","onClick","ref","element","closest","offsetWidth","defaultProps","undefined","AccessLevels","hasAccessTo","objectToAccess","toAuth","canSee","hasFullAccess","hasAccess","ownerId","ownerAliasId","teamId","isPublic","visibility","teamIds","userIds","userAdminIds","teamAdminIds","partOfTeams","accessLevel","authUserId","objectId","authTeamIds","aliases","foundOwnerAlias","includes","partOfTeam","userHasAccess","teamHasAccess","find","id","aliasHasAccess","aliasId","userHasAdminAccess","aliasHasAdminAccess","teamHasAdminAccess","adminId","isAdmin","_extends","Object","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","points","x1","y1","x2","y2","_ref","svgRef","props","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ForwardRef","forwardRef","Button","disabled","stopPropagation","type","event","propTypes","func","isRequired","node","oneOf","bool","arrayOf","string","onDoubleClick","done","Window","order","menu","defaultSize","size","setSize","coordinates","setCoordinates","windowClasses","position","style","zIndex","minWidth","minHeight","maxHeight","maxWidth","bounds","dragHandleClassName","enableResizing","top","right","bottom","left","topRight","bottomRight","bottomLeft","topLeft","onDragStart","onDragStop","newX","x","newY","y","offsetHeight","window","innerHeight","innerWidth","onResizeStart","onResizeStop","Dialog","error","text","ALIASES","DEVICES","DOCFILES","FORUMS","FORUMPOSTS","FORUMTHREADS","GAMECODES","INVITATIONS","MESSAGES","ROOMS","SIMPLEMSGS","TEAMS","TRANSACTIONS","USERS","WALLETS","ChangeTypes","rootReducerSingle","action","newState","Map","payload","changeType","object","set","existing","updated","has","delete","rootReducerMultiple","reset","objects","forEach","Status","defaultState","longitude","latitude","CHAT","PROFILE","DOCFILE","followingRooms","isAnonymous","WindowTypes","combineReducers","users","messages","online","rooms","userId","positions","transactions","wallets","entries","keyValue","windowOrder","windows","createStore","rootReducer","applyMiddleware","thunk","StorageType","setLocalValue","name","value","localStorage","setItem","JSON","stringify","stringifyObject","getLocalValue","getItem","removeLocalValue","removeItem","resetUser","getDeviceId","getToken","login","token","setUserId","logout","dispatch","isOnline","getUserId","getCurrentIdentityId","getAliasId","createMessages","message","events","updateUsers","user","updateRooms","room","removeRooms","followRoom","batch","socket","socketUri","ioUri","console","log","io","forceNew","SendEvents","GetEvents","ActionEvents","ListenerEvents","addSocketListener","a","callback","on","params","reconnect","store","getState","disconnect","connect","emitSocketEvent","Promise","resolve","reject","paramsToSend","getStoredToken","emit","data","then","catch","logoutAction","loginAction","sentRoom","createRooms","sentUser","createUsers","username","password","result","Input","onChange","required","placeholder","hasFocus","setHasFocus","isEmpty","setIsEmpty","defaultValue","onFocus","onBlur","setUsername","setPassword","setError","onSubmit","loginError","Select","multiple","checkEmpty","selectedOptions","Array","from","filter","option","map","Textarea","trim","createUser","registerDevice","offName","setOffName","repeatPassword","setRepeatPassword","description","setDescription","pronouns","setPronouns","image","requireOffName","getAllAliases","getAllUsers","getCurrentUser","getAnonymousUser","getCurrentAccessLevel","createSelector","getIdentities","values","getIdentitiesByIds","createCachedSelector","_","ids","getIdentityById","alias","getOthersIdentities","identities","identity","getCurrentUserIdentities","createDialog","dialog","createPortal","document","querySelector","ListItem","MainList","onDialog","d","rx","ry","changeWindowOrder","changeOrder","MenuBar","setDialog","content","DataHandler","useDispatch","getter","retrieveAll","getWalletById","walletId","getWalletIdsByCurrentUser","currentUser","wallet","getAllTransactions","getTransactionById","transactionId","transaction","getIdentityIdsByTransaction","toWallet","toWalletId","fromWallet","fromWalletId","walletIds","to","amount","aliasName","transactionIds","getTransactionIdsByWallets","large","useCallback","MapView","setMap","mapRef","createMap","google","MarkerClusterer","MapLabel","worldMap","maps","disableDefaultUI","fullscreenControl","keyboardShortcuts","mapTypeControl","noClear","zoomControl","panControl","overviewMapControl","rotateControl","scaleControl","streetViewControl","center","lat","lng","zoom","styles","elementType","stylers","color","featureType","weight","getAllPositions","getPositionNamesByType","positionType","positionName","PositionList","positionsSelector","useMemo","Positions","positionTypes","getAllRooms","getRoom","getRooms","isWhisper","isUser","getWhisperRooms","participantIds","getUnfollowedRoomIds","roomName","sort","roomA","roomB","toLowerCase","b","getFollowedRoomsIds","getWhisperRoom","identityId","currentIdentityId","getWhisperRoomName","currentIdentities","participant","secondParticipant","roomId","onDone","UserDialog","MessageType","sendMessage","split","messageType","switchRoom","getMessagesByRoom","createRoom","followRoomAction","removeRoom","followError","roomIds","Image","onRemove","altText","src","alt","ImageUpload","inputRef","previewRef","previewImage","setPreviewImage","onChangeFunc","file","files","reader","FileReader","addEventListener","imageName","naturalWidth","naturalHeight","readAsDataURL","accept","click","imageIcon","InputArea","onSend","minAccessLevel","useForm","register","handleSubmit","buttonRef","setImage","allowedImages","resize","textarea","scrollHeight","toString","rows","onKeyDown","altKey","getMessageIdsByRoom","timeCreated","messageId","getMessageById","customTimeCreated","line","index","MessageList","messageIds","buffer","Messages","setRoomName","topic","setTopic","newRoom","createError","removeError","setRoomId","newRoomId","createRoomDialog","createRemoveDialog","getOrder","App","ElementQueries","require","render","getElementById","listen"],"mappings":"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","file":"static/js/main.c82bfb18.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWAQMAAAAGz+OhAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+LUNEtwAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAAABlBMVEUAAAAA/+8G9rtUAAAAAXRSTlMAQObYZgAAAfNJREFUSMfl1jtOxDAQBuBYLlz6CDmKb4ZDxbWMKLhGEAVtJAoiEcX4PTP2LKSj2K12P+1m/9gzE0/T/b1mD6+1GCJ/ZJLYfDZNzA2Xqxc0xLZkltg+/G35Y0HtvGU0Xg7ImepsSXbAcohqG1ojk0y39ck36pI5ZPqiqWLL/5ldBpPtnsF0WxuwOS85MVNrApn19c/BWp2ACSi8X0222vnb9s4Ua9+MvTG2MuYu/vbzZpaHMbMIK9TfmwyfewuR6Fpt8d02rN8cLtqvvQk7SvbIxWY86V4uqRnJnvvceEtXGzGRwzW05yZbUa3Fd3FWbF1NxlmxdxZnxdFZnBVnZ6l7qYV4H94/EQvxXrx/JRbiPcavYgvxwiW/iMU6t6Vgq8XVM53ZcM9zZ3FLNDXh064Rk/GTpKbi8gtqOrUXtdyGlphJ7WqI2VRtM7HcNRqbyB2nsMn8QWJTvn4dTJfux1anhEVmyjQxyGxpkBlZbWoNJupAQHsu6zBBpnzb5WY1HrY2xJDVeGRODv0L8ZCJcV5BPGSKmYmamZ38jD2YGbtP44wd5jjEI7PETeNsGp4LEA8M4oFBPDCI18xBvLa/zxCv2TvEK7WhQn/C48zUaoR4kwfrnvFXzwdXzxvcWYU903BnH+6MxJ2luDMXdzZjz3D39PoBF4cEYKUUl6gAAAAASUVORK5CYII=\"","/**\n * Beautifies number by adding a 0 before the number if it is lower than 10\n * @param {Number} number Number to be beautified\n * @returns {string} String with number or with 0 + number\n */\n// TODO Use built-in padding\nexport const beautifyNumber = (number) => (number > 9\n  ? `${number}`\n  : `0${number}`\n);\n","import { beautifyNumber } from '../../TextTools';\n\nexport const getRequireOffName = (state) => state.config.get('requireOffName');\nexport const getPublicRoomId = (state) => state.config.get('publicRoomId');\nexport const getBroadcastId = (state) => state.config.get('broadcastId');\nexport const getAnonymousUser = (state) => state.config.get('anonymousUser');\nexport const getAllowedImages = (state) => state.config.get('allowedImages');\n\n/**\n * Takes date and returns shorter human-readable time.\n * @static\n * @param {Object} params Parameters.\n * @param {Date|number} params.date Date.\n * @param {Number} [params.offset] Should hours be modified from the final time?\n * @param {boolean} [params.lockDate] Should the year stay unmodified?\n * @returns {Object} Human-readable time and date.\n */\nexport const getTimestamp = (state, { date, offset, lockDate }) => {\n  const newDate = new Date(date);\n  const timestamp = {};\n  const { yearModification, dayModification } = state.config;\n\n  if (offset) {\n    newDate.setHours(newDate.getHours() + offset);\n  }\n\n  if (!lockDate && !Number.isNaN(yearModification)) {\n    if (yearModification && !Number.isNaN(yearModification)) {\n      newDate.setFullYear(newDate.getFullYear() + parseInt(yearModification, 10));\n    }\n\n    if (dayModification && !Number.isNaN(dayModification)) {\n      newDate.setDate(newDate.getDate() + parseInt(dayModification, 10));\n    }\n  }\n\n  timestamp.mins = beautifyNumber(newDate.getMinutes());\n  timestamp.hours = beautifyNumber(newDate.getHours());\n  timestamp.seconds = beautifyNumber(newDate.getSeconds());\n  timestamp.month = beautifyNumber(newDate.getMonth() + 1);\n  timestamp.day = beautifyNumber(newDate.getDate());\n  timestamp.year = newDate.getFullYear();\n  timestamp.halfTime = `${timestamp.hours}:${timestamp.mins}`;\n  timestamp.fullTime = `${timestamp.halfTime}:${timestamp.seconds}`;\n  timestamp.halfDate = `${timestamp.day}/${timestamp.month}`;\n  timestamp.fullDate = `${timestamp.halfDate}/${timestamp.year}`;\n  timestamp.fullStamp = `${timestamp.fullTime} ${timestamp.fullDate}`;\n\n  return timestamp;\n};\n","import React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { getTimestamp } from '../../../redux/selectors/config';\n\nconst Clock = () => {\n  const [date, setDate] = useState(Date.now());\n  const timestamp = useSelector((state) => getTimestamp(state, { date }));\n\n  const updateTime = () => {\n    setTimeout(() => {\n      setDate(Date.now());\n      updateTime();\n    }, 400);\n  };\n\n  useEffect(() => {\n    updateTime();\n  }, []);\n\n  return (\n    <div\n      key=\"clock\"\n      className=\"Clock\"\n    >\n      <span>{timestamp.halfTime}</span>\n    </div>\n  );\n};\n\nexport default Clock;\n","import React, { useEffect, useRef, useState } from 'react';\nimport {\n  string,\n  arrayOf,\n  bool,\n  node,\n  shape,\n} from 'prop-types';\n\nimport './List.scss';\n\n// eslint-disable-next-line react/prop-types\nconst ListItems = React.memo(({ items }) => (<>{items}</>));\n\nconst List = ({\n  children,\n  title,\n  scrollTo,\n  dropdown = false,\n  classNames = [],\n}) => {\n  const listRef = useRef(null);\n  const windowRef = useRef(null);\n  const [hidden, setHidden] = useState(typeof title !== 'undefined');\n  const listClasses = [];\n  const classes = ['List'].concat(classNames);\n\n  useEffect(() => {\n    if (scrollTo && listRef.current) {\n      if (scrollTo.direction === 'bottom' && listRef.current.lastElementChild) {\n        listRef.current.lastElementChild.scrollIntoView();\n      }\n    }\n  });\n\n  if (!hidden) {\n    classes.push('expanded');\n  } else {\n    listClasses.push('hide');\n  }\n\n  if (dropdown) {\n    listClasses.push('dropdown');\n  }\n\n  return (\n    <div\n      key=\"List\"\n      className={classes.join(' ')}\n    >\n      { title && (\n        <header\n          role=\"button\"\n          tabIndex={0}\n          key=\"listHeader\"\n          className=\"toggle clickable\"\n          onClick={() => {\n            setHidden(!hidden);\n          }}\n        >\n          {title}\n        </header>\n      )}\n      <ul\n        ref={(element) => {\n          listRef.current = element;\n\n          if (element) {\n            windowRef.current = element.closest('.Window');\n          }\n        }}\n        key=\"listElem\"\n        className={`${listClasses.join(' ')}`}\n        onClick={() => {\n          if (dropdown && (!windowRef.current || windowRef.current.offsetWidth < 600)) {\n            setHidden(true);\n          }\n        }}\n      >\n        <ListItems items={children} />\n      </ul>\n    </div>\n  );\n};\n\nexport default React.memo(List);\n\nList.propTypes = {\n  children: node,\n  title: node,\n  classNames: arrayOf(string),\n  dropdown: bool,\n  scrollTo: shape({\n    direction: string,\n    buffer: bool,\n  }),\n};\n\nList.defaultProps = {\n  classNames: [],\n  children: undefined,\n  title: undefined,\n  dropdown: false,\n  scrollTo: undefined,\n};\n","export const AccessLevels = {\n  ANONYMOUS: 0,\n  STANDARD: 1,\n  PRIVILEGED: 2,\n  MODERATOR: 3,\n  ADMIN: 4,\n  SUPERUSER: 5,\n  GOD: 6,\n};\n\n/**\n * Checks if user has access, is admin or can see the object.\n * @param {Object} params Parameter.\n * @param {Object} params.objectToAccess Object to access.\n * @param {Object} params.toAuth Object to auth.\n * @returns {Object} Does the user have access to the object?\n */\nexport const hasAccessTo = ({\n  objectToAccess,\n  toAuth,\n}) => {\n  if (!objectToAccess || !toAuth) {\n    return {\n      canSee: false,\n      hasFullAccess: false,\n      hasAccess: false,\n    };\n  }\n\n  const {\n    ownerId,\n    ownerAliasId,\n    teamId,\n    isPublic,\n    visibility,\n    teamIds = [],\n    userIds = [],\n    userAdminIds = [],\n    teamAdminIds = [],\n  } = objectToAccess;\n  const {\n    hasFullAccess,\n    partOfTeams = [],\n    accessLevel = AccessLevels.ANONYMOUS,\n    objectId: authUserId,\n    teamIds: authTeamIds = [],\n    aliases = [],\n  } = toAuth;\n\n  const foundOwnerAlias = ownerAliasId && aliases.includes(ownerAliasId);\n  const partOfTeam = teamId && partOfTeams.includes(teamId);\n\n  const userHasAccess = userIds.concat([ownerId]).includes(authUserId);\n  const teamHasAccess = partOfTeam || teamIds.find((id) => authTeamIds.includes(id));\n  const aliasHasAccess = foundOwnerAlias || aliases.find((aliasId) => userIds.includes(aliasId));\n  const userHasAdminAccess = userAdminIds.includes(authUserId);\n  const aliasHasAdminAccess = foundOwnerAlias || aliases.find((aliasId) => userAdminIds.includes(aliasId));\n  const teamHasAdminAccess = partOfTeam || teamAdminIds.find((adminId) => authTeamIds.includes(adminId));\n  const isAdmin = ownerId === authUserId || hasFullAccess || accessLevel >= AccessLevels.ADMIN;\n\n  return {\n    canSee: isAdmin || isPublic || userHasAccess || teamHasAccess || aliasHasAccess || accessLevel >= visibility,\n    hasAccess: isAdmin || isPublic || userHasAccess || teamHasAccess || aliasHasAccess,\n    hasFullAccess: isAdmin || userHasAdminAccess || teamHasAdminAccess || aliasHasAdminAccess,\n  };\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"polyline\", {\n  points: \"15 3 21 3 21 9\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"polyline\", {\n  points: \"9 21 3 21 3 15\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 21,\n  y1: 3,\n  x2: 14,\n  y2: 10\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 3,\n  y1: 21,\n  x2: 10,\n  y2: 14\n});\n\nvar SvgMaximize = function SvgMaximize(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-maximize-2\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMaximize, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/maximize.392be9ed.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 18,\n  y1: 6,\n  x2: 6,\n  y2: 18\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 6,\n  y1: 6,\n  x2: 18,\n  y2: 18\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-x\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.f8019df0.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport {\n  arrayOf,\n  bool,\n  func,\n  node,\n  oneOf, string,\n} from 'prop-types';\n\nimport './Button.scss';\n\nconst Button = React.forwardRef(({\n  onClick,\n  children,\n  disabled,\n  stopPropagation,\n  classNames = [''],\n  type = 'button',\n}, ref) => (\n  <button\n    ref={ref}\n    className={`${['Button'].concat(classNames).join(' ')}`}\n    disabled={disabled}\n    type={type} /* eslint-disable-line react/button-has-type */\n    onClick={(event) => {\n      if (stopPropagation) {\n        event.stopPropagation();\n      }\n\n      onClick(event);\n    }}\n  >\n    {children}\n  </button>\n));\n\nexport default Button;\n\nButton.propTypes = {\n  onClick: func.isRequired,\n  children: node.isRequired,\n  type: oneOf(['button', 'submit']),\n  disabled: bool,\n  classNames: arrayOf(string),\n  stopPropagation: bool,\n};\n\nButton.defaultProps = {\n  type: 'button',\n  disabled: undefined,\n  classNames: [],\n  stopPropagation: undefined,\n};\n","import React from 'react';\nimport {\n  func,\n  string,\n} from 'prop-types';\n\nimport { ReactComponent as Maximize } from '../../../../icons/maximize.svg';\nimport { ReactComponent as Close } from '../../../../icons/close.svg';\n\nimport './TopBar.scss';\nimport Button from '../../sub-components/Button/Button';\n\nconst TopBar = ({\n  onDoubleClick,\n  title,\n  done,\n}) => (\n  <div\n    onDoubleClick={onDoubleClick}\n    className=\"TopBar\"\n  >\n    <span className=\"title\">{title}</span>\n    <div className=\"buttons\">\n      <Button type=\"button\" onClick={onDoubleClick}><Maximize /></Button>\n      <Button stopPropagation type=\"button\" onClick={done}><Close /></Button>\n    </div>\n  </div>\n);\n\nexport default React.memo(TopBar);\n\nTopBar.propTypes = {\n  done: func.isRequired,\n  title: string.isRequired,\n  onDoubleClick: func.isRequired,\n};\n","import React, { useState } from 'react';\nimport { Rnd } from 'react-rnd';\nimport {\n  arrayOf,\n  func,\n  string,\n  node,\n  number,\n} from 'prop-types';\n\nimport './Window.scss';\nimport TopBar from './TopBar/TopBar';\n\nconst Window = ({\n  onClick,\n  children,\n  order,\n  menu,\n  title = 'app',\n  classNames = [],\n  done = () => {},\n}) => {\n  const defaultSize = { width: 640, height: 460 };\n  const [size, setSize] = useState(defaultSize);\n  const [coordinates, setCoordinates] = useState();\n  const rndClasses = ['rnd'];\n  const windowClasses = ['Window'].concat(classNames);\n\n  const toggleFullscreen = () => {\n    if (size.width === '100%' && size.height === '100%') {\n      setSize(defaultSize);\n    } else {\n      setCoordinates({ x: 0, y: 0 });\n      setSize({ width: '100%', height: '100%' });\n    }\n  };\n\n  return (\n    <Rnd\n      position={coordinates}\n      className={`${rndClasses.join(' ')}`}\n      style={{ zIndex: order }}\n      size={size}\n      minWidth={320}\n      minHeight={220}\n      maxHeight=\"100%\"\n      maxWidth=\"100%\"\n      bounds=\"parent\"\n      dragHandleClassName=\"TopBar\"\n      enableResizing={{\n        top: false,\n        right: true,\n        bottom: true,\n        left: true,\n        topRight: false,\n        bottomRight: true,\n        bottomLeft: true,\n        topLeft: false,\n      }}\n      onDragStart={onClick}\n      onDragStop={(event, { node: element, x: newX, y: newY }) => {\n        if (coordinates && newX === coordinates.x && newY === coordinates.y) {\n          return;\n        }\n\n        if (newX === 0 && newY === 0 && size.height !== '100%') { // Upper left\n          setSize({ width: '50%', height: '50%' });\n          setCoordinates({ x: 0, y: 0 });\n        } else if (newX === 0 && (newY + element.offsetHeight + 35) >= window.innerHeight && size.height !== '100%') { // Lower left\n          setSize({ width: '50%', height: '50%' });\n          setCoordinates({ x: 0, y: ((window.innerHeight - 36) / 2) });\n        } else if (newY === 0 && newX + element.offsetWidth >= window.innerWidth && size.height !== '100%') { // Upper right\n          setSize({ width: '50%', height: '50%' });\n          setCoordinates({ x: window.innerWidth / 2, y: 0 });\n        } else if (newX + element.offsetWidth >= window.innerWidth && newY + element.offsetHeight + 35 >= window.innerHeight && size.height !== '100%') { // Lower right\n          setSize({ width: '50%', height: '50%' });\n          setCoordinates({ x: window.innerWidth / 2, y: ((window.innerHeight - 36) / 2) });\n        } else if (newX === 0 && newY > 0) { // Left\n          setSize({ width: '50%', height: '100%' });\n          setCoordinates({ x: 0, y: 0 });\n        } else if (newX + element.offsetWidth >= window.innerWidth && newY > 0) { // Right\n          setSize({ width: '50%', height: '100%' });\n          setCoordinates({ x: window.innerWidth / 2, y: 0 });\n        } else {\n          setCoordinates({ x: newX, y: newY });\n        }\n      }}\n      onResizeStart={onClick}\n      onResizeStop={(event, direction, element) => {\n        setSize({ width: element.offsetWidth, height: element.offsetHeight });\n      }}\n    >\n      <div\n        role=\"complementary\"\n        onClick={onClick}\n        className={`${windowClasses.join(' ')}`}\n      >\n        <TopBar\n          done={done}\n          title={title}\n          onDoubleClick={() => {\n            toggleFullscreen();\n          }}\n        />\n        <div className=\"windowBox\">\n          {\n            menu\n            && (\n              <div className=\"menu\">\n                {menu}\n              </div>\n            )\n          }\n          <div className=\"content\">\n            {children}\n          </div>\n        </div>\n      </div>\n    </Rnd>\n  );\n};\n\nexport default React.memo(Window);\n\nWindow.propTypes = {\n  order: number,\n  onClick: func.isRequired,\n  children: node.isRequired,\n  menu: node,\n  title: string,\n  classNames: arrayOf(string),\n  done: func,\n};\n\nWindow.defaultProps = {\n  done: () => {},\n  classNames: [],\n  title: 'app',\n  menu: undefined,\n  order: undefined,\n};\n","import React from 'react';\nimport {\n  func,\n  arrayOf,\n  string,\n  shape,\n  node,\n} from 'prop-types';\nimport Window from '../../Window/Window';\n\nimport './Dialog.scss';\n\nconst Dialog = ({\n  children,\n  title,\n  error,\n  text,\n  done,\n  classNames = [],\n}) => (\n  <Window\n    done={done}\n    order={10}\n    title={title}\n    classNames={['Dialog'].concat(classNames)}\n    onClick={() => {}}\n  >\n    <div className=\"inputs\">\n      {\n        error\n          && <div>{error.type}</div>\n      }\n      {\n        text\n          && <div>{text}</div>\n      }\n      {children}\n    </div>\n  </Window>\n);\n\nexport default React.memo(Dialog);\n\nDialog.propTypes = {\n  done: func.isRequired,\n  children: node,\n  error: shape({\n    type: string.isRequired,\n    text: arrayOf(string).isRequired,\n  }),\n  title: string,\n  text: string,\n  classNames: arrayOf(string),\n};\n\nDialog.defaultProps = {\n  children: undefined,\n  error: undefined,\n  title: undefined,\n  text: undefined,\n  classNames: [],\n};\n","export const ALIAS = 'alias';\nexport const DEVICE = 'device';\nexport const DOCFILE = 'docFile';\nexport const FORUM = 'forum';\nexport const FORUMPOST = 'forumPost';\nexport const FORUMTHREAD = 'forumThread';\nexport const GAMECODE = 'gameCode';\nexport const INVITATION = 'invitation';\nexport const MESSAGE = 'message';\nexport const POSITION = 'position';\nexport const ROOM = 'room';\nexport const SIMPLEMSG = 'simpleMsg';\nexport const TEAM = 'team';\nexport const TEAMSCORING = 'teamScoring';\nexport const TRANSACTION = 'transaction';\nexport const USER = 'user';\nexport const WALLET = 'wallet';\n\nexport const ALIASES = 'aliases';\nexport const DEVICES = 'devices';\nexport const DOCFILES = 'docFiles';\nexport const FORUMS = 'forums';\nexport const FORUMPOSTS = 'forumPosts';\nexport const FORUMTHREADS = 'forumThreads';\nexport const GAMECODES = 'gameCodes';\nexport const INVITATIONS = 'invitations';\nexport const MESSAGES = 'messages';\nexport const POSITIONS = 'positions';\nexport const ROOMS = 'rooms';\nexport const SIMPLEMSGS = 'simpleMsgs';\nexport const TEAMS = 'teams';\nexport const TEAMSCORINGS = 'teamScorings';\nexport const TRANSACTIONS = 'transactions';\nexport const USERS = 'users';\nexport const WALLETS = 'wallets';\n\nexport const USERID = 'userId';\nexport const ROOMID = 'roomId';\nexport const CONFIG = 'config';\nexport const ONLINE = 'online';\nexport const ALIASID = 'aliasId';\nexport const WINDOWORDER = 'windowOrder';\nexport const WINDOWORDERS = 'windowOrders';\n","export const ChangeTypes = {\n  UPDATE: 'update',\n  CREATE: 'create',\n  REMOVE: 'remove',\n  RESET: 'reset',\n};\n\nexport const rootReducerSingle = (state, action) => {\n  const newState = new Map([...state]);\n  const { type, payload } = action;\n  const { changeType } = payload;\n  const object = payload[type];\n\n  switch (changeType) {\n    case ChangeTypes.CREATE: {\n      newState.set(object.objectId, object);\n\n      return newState;\n    }\n    case ChangeTypes.UPDATE: {\n      const existing = newState[object.objectId];\n      const updated = Object.assign(existing || {}, object);\n\n      if (existing === updated) {\n        return state;\n      }\n\n      newState.set(object.objectId, updated);\n\n      return newState;\n    }\n    case ChangeTypes.REMOVE: {\n      if (!newState.has(object.objectId)) {\n        return state;\n      }\n\n      newState.delete(object.objectId);\n\n      return newState;\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\nexport const rootReducerMultiple = (state, action) => {\n  const { type, payload } = action;\n  const { reset, changeType } = payload;\n  const newState = reset\n    ? new Map()\n    : new Map([...state]);\n  const objects = payload[type];\n\n  switch (changeType) {\n    case ChangeTypes.CREATE: {\n      objects.forEach((object) => newState.set(object.objectId, object));\n\n      return newState;\n    }\n    case ChangeTypes.UPDATE: {\n      objects\n        .forEach((object) => {\n          const existing = newState[object.objectId];\n          const updated = Object.assign(existing || {}, object);\n\n          if (existing !== updated) {\n            newState.set(object.objectId, updated);\n          }\n        });\n\n      return newState;\n    }\n    case ChangeTypes.REMOVE: {\n      objects.forEach((object) => newState.delete(object.objectId));\n\n      return newState;\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { ONLINE } from '../actionTypes';\n\nexport const Status = {\n  ONLINE: 'online',\n  OFFLINE: 'offline',\n  RECONNECTING: 'reconnecting',\n};\n\nexport default function onlineReducer(state = Status.OFFLINE, action) {\n  if (action.type === ONLINE) {\n    const { payload } = action;\n    const { online } = payload;\n\n    return online;\n  }\n\n  return state;\n}\n","import { CONFIG } from '../actionTypes';\nimport { AccessLevels } from '../../AccessCentral';\n\nconst defaultState = new Map();\n\ndefaultState.set('broadcastId', '111111111111111111111116');\ndefaultState.set('publicRoomId', '111111111111111111111110');\ndefaultState.set('defaultForum', '111111111111111111111120');\ndefaultState.set('defaultLanguage', 'en');\ndefaultState.set('centerCoordinates', { longitude: 0, latitude: 0 });\ndefaultState.set('cornerOneCoordinates', { longitude: 0, latitude: 0 });\ndefaultState.set('cornerTwoCoordinates', { longitude: 0, latitude: 0 });\ndefaultState.set('defaultZoomLevel', 15);\ndefaultState.set('yearModification', 0);\ndefaultState.set('dayModification', 0);\ndefaultState.set('requireOffName', false);\ndefaultState.set('activateTermination', false);\ndefaultState.set('allowedImages', { CHAT: false, PROFILE: false, DOCFILE: false });\ndefaultState.set('permissions', {});\ndefaultState.set('anonymousUser', {\n  accessLevel: AccessLevels.ANONYMOUS,\n  followingRooms: [],\n  objectId: '-1',\n  isAnonymous: true,\n});\n// customUserFields\n// device id\n\nexport default function ConfigReducer(state = defaultState, action) {\n  if (action.type === CONFIG) {\n    const { payload } = action;\n    const { entries } = payload;\n    const newState = new Map([...state]);\n\n    entries.forEach((keyValue) => newState.set(keyValue[0], keyValue[1]));\n\n    return newState;\n  }\n\n  return state;\n}\n","import { WINDOWORDER, WINDOWORDERS } from '../actionTypes';\n\nexport const WindowTypes = {\n  WALLET: 'wallet',\n  CHAT: 'chat',\n  WORLDMAP: 'worldMap',\n};\n\nconst defaultState = new Map();\n\nexport default function WindowOrderReducer(state = defaultState, action) {\n  if (action.type === WINDOWORDER) {\n    const { payload } = action;\n    const { id, type } = payload;\n    const newState = new Map([...state]);\n\n    if (newState.size > 0 && [...newState.keys()].indexOf(id) === newState.size - 1) {\n      return state;\n    }\n\n    newState.delete(id);\n    newState.set(id, type);\n\n    return newState;\n  }\n\n  if (action.type === WINDOWORDERS) {\n    const { payload } = action;\n    const { windows } = payload;\n    const newState = new Map([...state]);\n\n    windows.forEach(({ id, type }) => newState.set(id, type));\n\n    return newState;\n  }\n\n  return state;\n}\n","import { combineReducers } from 'redux';\n\nimport users from './users';\nimport aliases from './aliases';\nimport messages from './messages';\nimport online from './online';\nimport rooms from './rooms';\nimport positions from './positions';\nimport transactions from './transactions';\nimport userId from './userId';\nimport wallets from './wallets';\nimport config from './config';\nimport aliasId from './aliasId';\nimport windowOrder from './windowOrder';\n\nexport default combineReducers({\n  users,\n  aliases,\n  messages,\n  online,\n  rooms,\n  userId,\n  positions,\n  transactions,\n  wallets,\n  config,\n  aliasId,\n  windowOrder,\n});\n","import { USER, USERS } from '../actionTypes';\nimport { rootReducerSingle, rootReducerMultiple } from './root';\n\nexport default function usersReducer(state = new Map(), action) {\n  if (action.type === USER) {\n    return rootReducerSingle(state, action);\n  }\n\n  if (action.type === USERS) {\n    return rootReducerMultiple(state, action);\n  }\n\n  return state;\n}\n","import { ALIAS, ALIASES } from '../actionTypes';\nimport { rootReducerMultiple, rootReducerSingle } from './root';\n\nexport default function aliasesReducer(state = new Map(), action) {\n  if (action.type === ALIAS) {\n    return rootReducerSingle(state, action);\n  }\n\n  if (action.type === ALIASES) {\n    return rootReducerMultiple(state, action);\n  }\n\n  return state;\n}\n","import { MESSAGE, MESSAGES } from '../actionTypes';\nimport { rootReducerMultiple, rootReducerSingle } from './root';\n\nexport default function messagesReducer(state = new Map(), action) {\n  if (action.type === MESSAGE) {\n    return rootReducerSingle(state, action);\n  }\n\n  if (action.type === MESSAGES) {\n    return rootReducerMultiple(state, action);\n  }\n\n  return state;\n}\n","import { ROOM, ROOMS } from '../actionTypes';\nimport { rootReducerMultiple, rootReducerSingle } from './root';\n\nexport default function roomsReducer(state = new Map(), action) {\n  if (action.type === ROOM) {\n    return rootReducerSingle(state, action);\n  }\n\n  if (action.type === ROOMS) {\n    return rootReducerMultiple(state, action);\n  }\n\n  return state;\n}\n","import { USERID } from '../actionTypes';\n\nconst initialState = '-1';\n\nexport default function userIdReducer(state = initialState, action) {\n  if (action.type === USERID) {\n    const { payload } = action;\n    const { reset, userId } = payload;\n\n    return reset\n      ? initialState\n      : userId;\n  }\n\n  return state;\n}\n","import { POSITION, POSITIONS } from '../actionTypes';\nimport { rootReducerSingle, rootReducerMultiple } from './root';\n\nexport default function positionsReducer(state = new Map(), action) {\n  if (action.type === POSITION) {\n    return rootReducerSingle(state, action);\n  }\n\n  if (action.type === POSITIONS) {\n    return rootReducerMultiple(state, action);\n  }\n\n  return state;\n}\n","import { TRANSACTION, TRANSACTIONS } from '../actionTypes';\nimport { rootReducerSingle, rootReducerMultiple } from './root';\n\nexport default function transactionsReducer(state = new Map(), action) {\n  if (action.type === TRANSACTION) {\n    rootReducerSingle(state, action);\n  }\n\n  if (action.type === TRANSACTIONS) {\n    return rootReducerMultiple(state, action);\n  }\n\n  return state;\n}\n","import { WALLET, WALLETS } from '../actionTypes';\nimport { rootReducerSingle, rootReducerMultiple } from './root';\n\nexport default function transactionsReducer(state = new Map(), action) {\n  if (action.type === WALLET) {\n    rootReducerSingle(state, action);\n  }\n\n  if (action.type === WALLETS) {\n    return rootReducerMultiple(state, action);\n  }\n\n  return state;\n}\n","import { ALIASID } from '../actionTypes';\n\nconst initialState = null;\n\nexport default function userIdReducer(state = initialState, action) {\n  if (action.type === ALIASID) {\n    const { payload } = action;\n    const { reset, userId } = payload;\n\n    return reset\n      ? initialState\n      : userId;\n  }\n\n  return state;\n}\n","import { applyMiddleware, createStore } from 'redux';\nimport thunk from 'redux-thunk';\n\nimport rootReducer from './reducers';\n\nexport default createStore(rootReducer, applyMiddleware(thunk));\n","import { stringifyObject } from './Converters';\n\nconst StorageType = {\n  DEVICEID: 'deviceId',\n  TOKEN: 'token',\n  USERID: 'userId',\n};\n\nconst setLocalValue = (name, value) => {\n  if (typeof value === 'string') {\n    localStorage.setItem(name, value);\n  } else {\n    localStorage.setItem(name, stringifyObject(value));\n  }\n};\n\nconst getLocalValue = (name) => localStorage.getItem(name);\n\nconst removeLocalValue = (name) => localStorage.removeItem(name);\n\nconst removeToken = () => removeLocalValue(StorageType.TOKEN);\n\nconst removeUserId = () => removeLocalValue(StorageType.USERID);\n\nexport const resetUser = () => {\n  removeToken();\n  removeUserId();\n};\n\nexport const getDeviceId = () => getLocalValue(StorageType.DEVICEID);\n\nexport const setDeviceId = (value) => setLocalValue(StorageType.DEVICEID, value);\n\nexport const getToken = () => getLocalValue(StorageType.TOKEN);\n\nexport const setToken = (value) => setLocalValue(StorageType.TOKEN, value);\n\nexport const getUserId = () => getLocalValue(StorageType.USERID);\n\nexport const setUserId = (value) => setLocalValue(StorageType.USERID, value);\n","/**\n * Convert string representation to object\n * @param {string} value Value to be converted\n * @returns {Object|null} Converted object. null if the value was not set\n */\nexport const convertToObject = (value) => {\n  return value\n    ? JSON.parse(value)\n    : {};\n};\n\n/**\n * Convert string to boolean\n * @param {string} value Value to be converted\n * @returns {boolean|null} Converted boolean. null if the value was not a boolean\n */\nexport const convertToBoolean = (value) => {\n  if (value === 'true') {\n    return true;\n  }\n\n  if (value === 'false') {\n    return false;\n  }\n\n  return null;\n};\n\n/**\n * Convert string to int\n * @param {string} value Value to be converted\n * @returns {number|null} Converted number. null if the value was not a number\n */\nexport const convertToInt = (value) => {\n  if (Number.isNaN(value)) {\n    return null;\n  }\n\n  return parseInt(value, 10);\n};\n\n/**\n * Convert string to float\n * @param {string} value Value to be converted\n * @returns {number|null} Converted number. null if the value was not a number\n */\nexport const convertToFloat = (value) => {\n  if (Number.isNaN(value)) {\n    return null;\n  }\n\n  return parseFloat(value);\n};\n\n/**\n * Stringifies object for JSON storageManager\n * @param {Object} value Object to stringify\n * @returns {string} Stringified object\n */\nexport const stringifyObject = (value) => {\n  return JSON.stringify(value);\n};\n","import { ALIASID, USERID } from '../actionTypes';\nimport { resetUser, setToken, setUserId } from '../../StorageManager';\n\nexport const login = ({ userId, token }) => {\n  setToken(token);\n  setUserId(userId);\n\n  return {\n    type: USERID,\n    payload: { userId },\n  };\n};\n\nexport const logout = () => {\n  resetUser();\n\n  return (dispatch) => {\n    dispatch({\n      type: USERID,\n      payload: { reset: true },\n    });\n\n    dispatch({\n      type: ALIASID,\n      payload: { reset: true },\n    });\n  };\n};\n","import { Status } from '../reducers/online';\n\nexport const isOnline = (state) => state.online === Status.ONLINE;\nexport const isReconnecting = (state) => state.online === Status.RECONNECTING;\n","import { batch } from 'react-redux';\n\nimport { CONFIG, ONLINE } from '../actionTypes';\nimport { Status } from '../reducers/online';\n\nexport const online = () => ({\n  type: ONLINE,\n  payload: { online: Status.ONLINE },\n});\n\nexport const offline = () => ({\n  type: ONLINE,\n  payload: { online: Status.OFFLINE },\n});\n\nexport const startup = (config) => (dispatch) => {\n  batch(() => {\n    dispatch({\n      type: CONFIG,\n      payload: {\n        entries: Object.entries(config),\n      },\n    });\n    dispatch(online());\n  });\n};\n","import { getAliasId } from './aliasId';\n\nexport const getUserId = (state) => state.userId;\n\nexport const getCurrentIdentityId = (state) => getAliasId(state) || getUserId(state);\n","export const getAliasId = (state) => state.aliasId;\n","import { MESSAGE, MESSAGES } from '../actionTypes';\nimport { ChangeTypes } from '../reducers/root';\n\nexport const createMessages = ({ messages }) => {\n  if (messages.length === 1) {\n    return {\n      type: MESSAGE,\n      payload: {\n        changeType: ChangeTypes.CREATE,\n        message: messages[0],\n      },\n    };\n  }\n\n  return {\n    type: MESSAGES,\n    payload: {\n      messages,\n      changeType: ChangeTypes.CREATE,\n    },\n  };\n};\n","import store from '../../redux/store';\nimport { createMessages } from '../../redux/actions/messages';\nimport { ChangeTypes } from '../../redux/reducers/root';\n\nconst events = {\n  MSGCHAT: 'chatMsg',\n  MSGWHISPER: 'whisper',\n};\n\nexport const chatMessage = () => ({\n  event: events.MSGCHAT,\n  callback: ({ data, error }) => {\n    if (data && data.message) {\n      const { message, changeType } = data;\n\n      if (changeType === ChangeTypes.CREATE) {\n        store.dispatch(createMessages({ messages: [message] }));\n      }\n\n      return;\n    }\n\n    console.log(events.MSGCHAT, error, data);\n  },\n});\n\nexport const whisperMessage = () => ({\n  event: events.MSGWHISPER,\n  callback: ({ data, error }) => {\n    if (data && data.message) {\n      const { message, changeType } = data;\n\n      if (changeType === ChangeTypes.CREATE) {\n        store.dispatch(createMessages({ messages: [message] }));\n      }\n\n      return;\n    }\n\n    console.log(events.MSGWHISPER, error, data);\n  },\n});\n","import { USER, USERS } from '../actionTypes';\nimport { ChangeTypes } from '../reducers/root';\n\nexport const updateUsers = ({ users }) => {\n  if (users.length === 1) {\n    return {\n      type: USER,\n      payload: {\n        user: users[0],\n        changeType: ChangeTypes.UPDATE,\n      },\n    };\n  }\n\n  return {\n    type: USERS,\n    payload: {\n      users,\n      changeType: ChangeTypes.UPDATE,\n    },\n  };\n};\n\nexport const createUsers = ({ users }) => {\n  if (users.length === 1) {\n    return {\n      type: USER,\n      payload: {\n        user: users[0],\n        changeType: ChangeTypes.CREATE,\n      },\n    };\n  }\n\n  return {\n    type: USERS,\n    payload: {\n      users,\n      changeType: ChangeTypes.CREATE,\n    },\n  };\n};\n","import { batch } from 'react-redux';\n\nimport { ROOM, ROOMS } from '../actionTypes';\nimport { ChangeTypes } from '../reducers/root';\nimport { updateUsers } from './users';\n\nexport const createRooms = ({ rooms }) => {\n  if (rooms.length === 1) {\n    return {\n      type: ROOM,\n      payload: {\n        changeType: ChangeTypes.CREATE,\n        room: rooms[0],\n      },\n    };\n  }\n\n  return {\n    type: ROOMS,\n    payload: {\n      rooms,\n      changeType: ChangeTypes.CREATE,\n    },\n  };\n};\n\nexport const updateRooms = ({ rooms }) => {\n  if (rooms.length === 1) {\n    return {\n      type: ROOM,\n      payload: {\n        changeType: ChangeTypes.UPDATE,\n        room: rooms[0],\n      },\n    };\n  }\n\n  return {\n    type: ROOMS,\n    payload: {\n      rooms,\n      changeType: ChangeTypes.CREATE,\n    },\n  };\n};\n\nexport const removeRooms = ({ rooms }) => {\n  if (rooms.length === 1) {\n    return {\n      type: ROOM,\n      payload: {\n        changeType: ChangeTypes.REMOVE,\n        room: rooms[0],\n      },\n    };\n  }\n\n  return {\n    type: ROOMS,\n    payload: {\n      rooms,\n      changeType: ChangeTypes.REMOVE,\n    },\n  };\n};\n\nexport const followRoom = ({ room, user }) => (dispatch) => {\n  batch(() => {\n    dispatch(updateRooms({ rooms: [room] }));\n    dispatch(updateUsers({ users: [user] }));\n  });\n};\n","import store from '../../redux/store';\nimport { batch } from 'react-redux';\n\nimport { createRooms, removeRooms, updateRooms } from '../../redux/actions/rooms';\nimport { ChangeTypes } from '../../redux/reducers/root';\nimport { updateUsers } from '../../redux/actions/users';\n\nconst events = {\n  ROOM: 'room',\n  FOLLOWER: 'follower',\n  FOLLOW: 'followRoom',\n};\n\nexport const room = () => ({\n  event: events.ROOM,\n  callback: ({ error, data }) => {\n    if (data && data.room) {\n      const { room: sentRoom, changeType } = data;\n\n      if (changeType === ChangeTypes.CREATE) {\n        store.dispatch(createRooms({ rooms: [sentRoom] }));\n      } else if (changeType === ChangeTypes.UPDATE) {\n        store.dispatch(updateRooms({ rooms: [sentRoom] }));\n      } else if (changeType === ChangeTypes.REMOVE) {\n        store.dispatch(removeRooms({ rooms: [sentRoom] }));\n      }\n\n      return;\n    }\n\n    console.log('Error', events.ROOM, error, data);\n  },\n});\n\nexport const follow = () => ({\n  event: events.FOLLOW,\n  callback: ({ error, data }) => {\n    if (data && data.room && data.user) {\n      store.dispatch(async (dispatch) => {\n        batch(() => {\n          dispatch(updateRooms({ rooms: [data.room] }));\n          dispatch(updateUsers({ users: [data.user] }));\n\n          console.log(store.getState());\n        });\n      });\n\n      return;\n    }\n\n    console.log('Error', events.FOLLOW, error, data);\n  },\n});\n","import { ChangeTypes } from '../../redux/reducers/root';\nimport store from '../../redux/store';\nimport { createUsers, updateUsers } from '../../redux/actions/users';\n\nconst events = {\n  USER: 'user',\n};\n\nexport const user = () => ({\n  event: events.USER,\n  callback: ({ data }) => {\n    if (data && data.user) {\n      const { user: sentUser, changeType } = data;\n\n      console.log(data);\n\n      if (changeType === ChangeTypes.CREATE) {\n        store.dispatch(createUsers({ users: [sentUser] }));\n      } else if (changeType === ChangeTypes.UPDATE) {\n        store.dispatch(updateUsers({ users: [sentUser] }));\n      }\n    }\n  },\n});\n","import store from '../redux/store';\nimport { isOnline, isReconnecting } from '../redux/selectors/online';\nimport {\n  offline,\n  online,\n  startup,\n} from '../redux/actions/online';\nimport {\n  getDeviceId,\n  setDeviceId,\n  getToken as getStoredToken,\n  getUserId as getStoredUserId,\n} from '../StorageManager';\nimport {\n  logout as logoutAction,\n  login as loginAction,\n} from '../redux/actions/auth';\nimport { getUserId } from '../redux/selectors/userId';\nimport { chatMessage, chatMessages, whisperMessage } from './listeners/messages';\nimport { follow, room } from './listeners/rooms';\nimport { user } from './listeners/users';\n\nconst socket = (() => {\n  let socketUri = typeof ioUri !== 'undefined' // eslint-disable-line no-undef\n    ? ioUri // eslint-disable-line no-undef\n    : '/';\n\n  if (process.env.NODE_ENV === 'development') {\n    socketUri = `${window.location.hostname}:8888`;\n  }\n\n  console.log(socketUri);\n\n  return window.io(socketUri, { forceNew: true });\n})();\n\nexport const SendEvents = {\n  ALIAS: 'createAlias',\n  USER: 'createUser',\n  MESSAGE: 'sendMessage',\n  ROOM: 'createRoom',\n  INVITATION: 'createInvitation',\n  DOCFILE: 'createDocFile',\n  FORUM: 'createForum',\n  FORUMPOST: 'createForumPost',\n  FORUMTHREAD: 'createForumThread',\n  GAMECODE: 'createGameCode',\n  SIMPLEMSG: 'sendSimpleMsg',\n  TEAM: 'createTeam',\n  TRANSACTION: 'createTransaction',\n  DEVICE: 'createDevice',\n  FOLLOW: 'followRoom',\n  GETMSGBYROOM: 'getMessagesByRoom',\n  REMOVEROOM: 'removeRoom',\n};\n\nexport const GetEvents = {\n  ALIASES: 'getAliases',\n  USERS: 'getUsers',\n  MESSAGES: 'getMessages',\n  ROOMS: 'getRooms',\n  INVITATIONS: 'getInvitations',\n  DOCFILES: 'getDocFiles',\n  FORUMS: 'getForums',\n  FORUMPOSTS: 'getForumPosts',\n  FORUMTHREADS: 'getForumThreads',\n  GAMECODES: 'getGameCodes',\n  SIMPLEMSGS: 'getSimpleMsgs',\n  TEAMS: 'getTeams',\n  TRANSACTIONS: 'getTransactions',\n  WALLETS: 'getWallets',\n  DEVICES: 'getDevices',\n};\n\nexport const ActionEvents = {\n  LOGIN: 'login',\n};\n\nexport const ListenerEvents = {\n  RECONNECT: 'reconnect',\n  STARTUP: 'startup',\n  DISCONNECT: 'disconnect',\n  MSGCHAT: 'chatMsg',\n  MSGWHISPER: 'whisper',\n};\n\n// export const EmitTypes = {\n//   FORUM: 'forum',\n//   FORUMTHREAD: 'forumThread',\n//   FORUMPOST: 'forumPost',\n\n//   DEVICE: 'device',\n//   DOCFILE: 'docFile',\n\n//   BROADCAST: 'broadcast',\n//   GAMECODE: 'gameCode',\n//   ALIAS: 'alias',\n//   CREATEPOSITION: 'createPosition',\n//   POSITION: 'position',\n\n//   TEAM: 'team',\n//   INVITATION: 'invitation',\n//   TEAMMEMBER: 'team member',\n//   LOGOUT: 'logout',\n//   BAN: 'ban',\n//   WALLET: 'wallet',\n//   TRANSACTION: 'transaction',\n//   TEAMSCORING: 'teamScoring',\n//   TERMINATE: 'terminate',\n//   SENDMSG: 'sendMessage',\n//   UPDATEPOSITION: 'updatePosition',\n//   UPDATEPOSITIONCOORDINATES: 'updatePositionCoordinates',\n//   UNLOCKDOCFILE: 'unlockDocFile',\n//   BANUSER: 'banUser',\n//   UNBANUSER: 'unbanUser',\n//   VERIFYUSER: 'verifyUser',\n//   CHANGEPASSWORD: 'changePassword',\n//   UPDATEUSER: 'updateUser',\n//   UPDATEWALLET: 'updateWallet',\n//   UNFOLLOW: 'unfollowRoom',\n//   CREATETRANSACTION: 'createTransaction',\n//   INVITETEAM: 'inviteToTeam',\n//   LEAVETEAM: 'leaveTeam',\n//   SIMPLEMSG: 'simpleMsg',\n//   INVITEROOM: 'inviteToRoom',\n//   DECLINEINVITE: 'decline',\n//   ACCEPTTEAM: 'acceptTeamInvitation',\n//   ACCEPTROOM: 'acceptRoomInvitation',\n//   SENDROOMINVITE: 'sendInvitationToRoom',\n//   GETUSERBYCODE: 'getUserByCode',\n//   USEGAMECODE: 'useGameCode',\n//   CONNECTUSER: 'connectUser',\n// };\n\nexport const addSocketListener = async ({ event, callback }) => {\n  socket.on(event, (params) => { console.log(event, params); callback(params); });\n};\n\nexport const reconnect = () => {\n  if (!isReconnecting(store.getState())) {\n    socket.disconnect();\n    socket.connect();\n  }\n};\n\n/**\n * Emit event through socket.io.\n * @param {string} event Event to emit.\n * @param {Object} [params] Parameters to send in the emit.\n */\nexport const emitSocketEvent = async (event, params = {}) => new Promise((resolve, reject) => {\n  const paramsToSend = params;\n  paramsToSend.token = getStoredToken();\n\n  if (!isOnline(store.getState())) {\n    reconnect();\n  }\n\n  socket.emit(event, paramsToSend, ({ error, data }) => {\n    if (error) {\n      reject(error);\n    } else {\n      resolve(data);\n    }\n  });\n});\n\nif (process.env.NODE_ENV === 'development') {\n  setInterval(() => {\n    emitSocketEvent('ping').catch(() => {\n      console.log('ping failed');\n    });\n  }, 1000);\n}\n\naddSocketListener({\n  event: ListenerEvents.RECONNECT,\n  callback: () => {\n    if (getUserId(store.getState)) {\n      emitSocketEvent('updateId', {})\n        .then(() => {\n          store.dispatch(online());\n        })\n        .catch((error) => {\n          console.log(error);\n          store.dispatch(logoutAction());\n        });\n    }\n  },\n});\n\naddSocketListener({\n  event: ListenerEvents.STARTUP,\n  callback: ({ data }) => {\n    const userId = getStoredUserId();\n    const token = getStoredToken();\n\n    if (userId && token) {\n      store.dispatch(loginAction({\n        userId,\n        token,\n      }));\n    }\n\n    if (!getDeviceId()) {\n      setDeviceId('1234567890123456');\n    }\n\n    store.dispatch(startup(data));\n\n    if (userId || token) {\n      emitSocketEvent('updateId', {})\n        .then(() => {\n          store.dispatch(online());\n        })\n        .catch((error) => {\n          console.log(error);\n          store.dispatch(logoutAction());\n        });\n    }\n  },\n});\n\naddSocketListener({\n  event: ListenerEvents.DISCONNECT,\n  callback: () => {\n    store.dispatch(offline());\n\n    reconnect();\n  },\n});\n\n// Messages\naddSocketListener(chatMessage());\naddSocketListener(whisperMessage());\n\n// Rooms\naddSocketListener(room());\naddSocketListener(follow());\n\n// Users\naddSocketListener(user());\n","import store from '../../redux/store';\nimport { login as loginAction, logout as logoutAction } from '../../redux/actions/auth';\nimport { ActionEvents, emitSocketEvent } from '../SocketManager';\n\nexport const login = async (username, password) => {\n  const result = await emitSocketEvent(ActionEvents.LOGIN, { user: { username, password } });\n\n  const { user, token } = result;\n\n  store.dispatch(loginAction({ userId: user.objectId, token }));\n\n  return result;\n};\n\nexport const logout = async () => {\n  store.dispatch(logoutAction());\n};\n","import React, { useState } from 'react';\nimport { string, bool, func } from 'prop-types';\n\nconst Input = ({\n  onChange,\n  type = 'text',\n  required = false,\n  placeholder = '',\n}) => {\n  const [hasFocus, setHasFocus] = useState(false);\n  const [isEmpty, setIsEmpty] = useState(false);\n\n  const checkEmpty = (event) => {\n    if (hasFocus && required) {\n      setIsEmpty(event.target.value !== '');\n    }\n  };\n\n  return (\n    <input\n      type={type}\n      defaultValue=\"\"\n      className={`Input ${isEmpty ? 'empty' : ''}`}\n      onFocus={() => setHasFocus(true)}\n      onBlur={checkEmpty}\n      onChange={(event) => onChange(event.target.value)}\n      placeholder={placeholder}\n    />\n  );\n};\n\nexport default Input;\n\nInput.propTypes = {\n  onChange: func.isRequired,\n  required: bool,\n  placeholder: string,\n  type: string,\n};\n\nInput.defaultProps = {\n  placeholder: '',\n  required: false,\n  type: 'text',\n};\n","import React, { useState } from 'react';\nimport { func } from 'prop-types';\nimport Dialog from './Dialog/Dialog';\nimport { login } from '../../../socket/actions/auth';\nimport Input from '../sub-components/Input';\nimport Button from '../sub-components/Button/Button';\n\nconst LoginDialog = ({ done }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState();\n\n  const onSubmit = async () => {\n    login(username, password)\n      .then(() => {\n        // TODO Notification: You are logged in\n        done();\n      })\n      .catch((loginError) => {\n        setError(loginError);\n      });\n  };\n\n  return (\n    <Dialog\n      classNames={['LoginDialog']}\n      done={done}\n      error={error}\n      title=\"Login\"\n    >\n      <Input\n        placeholder=\"Username\"\n        onChange={setUsername}\n      />\n      <Input\n        placeholder=\"Password\"\n        onChange={setPassword}\n        type=\"password\"\n      />\n      <Button\n        type=\"submit\"\n        onClick={onSubmit}\n      >\n        Login\n      </Button>\n    </Dialog>\n  );\n};\n\nexport default React.memo(LoginDialog);\n\nLoginDialog.propTypes = {\n  done: func.isRequired,\n};\n","import React, { useState } from 'react';\nimport {\n  arrayOf,\n  bool,\n  element,\n  func,\n  string,\n} from 'prop-types';\n\nconst Select = ({\n  onChange,\n  children,\n  required = false,\n  placeholder = '',\n  multiple = false,\n}) => {\n  const [hasFocus, setHasFocus] = useState(false);\n  const [isEmpty, setIsEmpty] = useState(false);\n\n  const checkEmpty = (event) => {\n    const selectedOptions = Array\n      .from(event.target.selectedOptions)\n      .filter((option) => option.value !== '');\n\n    if (hasFocus && required) {\n      setIsEmpty(selectedOptions.length === 0);\n    }\n  };\n\n  const onChangeFunc = (event) => {\n    checkEmpty(event);\n    onChange(Array\n      .from(event.target.selectedOptions)\n      .map((option) => option.value)\n      .filter((value) => value !== ''));\n  };\n\n  return (\n    <select\n      className={`Select ${isEmpty ? 'empty' : ''}`}\n      onFocus={() => setHasFocus(true)}\n      onBlur={checkEmpty}\n      onChange={onChangeFunc}\n      placeholder={placeholder}\n      multiple={multiple}\n    >\n      {children}\n    </select>\n  );\n};\n\nexport default Select;\n\nSelect.propTypes = {\n  multiple: bool,\n  children: arrayOf(element),\n  placeholder: string,\n  onChange: func.isRequired,\n  required: bool,\n};\n\nSelect.defaultProps = {\n  multiple: false,\n  children: undefined,\n  placeholder: '',\n  required: false,\n};\n","import React, { useState } from 'react';\nimport {\n  bool,\n  func,\n  string,\n} from 'prop-types';\n\nconst Textarea = ({\n  onChange,\n  required = false,\n  placeholder = '',\n}) => {\n  const [hasFocus, setHasFocus] = useState(false);\n  const [isEmpty, setIsEmpty] = useState(false);\n\n  const checkEmpty = (event) => {\n    const value = event.target.value.trim();\n\n    if (hasFocus && required) {\n      setIsEmpty(value !== '');\n    }\n  };\n\n  return (\n    <input\n      defaultValue=\"\"\n      className={isEmpty ? 'empty' : ''}\n      onFocus={() => setHasFocus(true)}\n      onBlur={checkEmpty}\n      onChange={(event) => onChange(event.target.value)}\n      placeholder={placeholder}\n    />\n  );\n};\n\nexport default Textarea;\n\nTextarea.propTypes = {\n  placeholder: string,\n  onChange: func.isRequired,\n  required: bool,\n};\n\nTextarea.defaultProps = {\n  placeholder: '',\n  required: false,\n};\n","import {\n  SendEvents,\n  emitSocketEvent,\n} from '../SocketManager';\nimport { getDeviceId } from '../../StorageManager';\n\nexport const createUser = async (params) => {\n  const paramsToSend = params;\n  paramsToSend.user.registerDevice = getDeviceId();\n\n  return emitSocketEvent(SendEvents.USER, paramsToSend);\n};\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { func } from 'prop-types';\nimport Dialog from './Dialog/Dialog';\nimport { login } from '../../../socket/actions/auth';\nimport Select from '../sub-components/Select';\nimport Input from '../sub-components/Input';\nimport Textarea from '../sub-components/Textarea';\nimport { getRequireOffName } from '../../../redux/selectors/config';\nimport Button from '../sub-components/Button/Button';\nimport { createUser } from '../../../socket/actions/users';\n\nconst RegisterDialog = ({ done }) => {\n  const [offName, setOffName] = useState();\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n  const [repeatPassword, setRepeatPassword] = useState();\n  const [description, setDescription] = useState();\n  const [pronouns, setPronouns] = useState();\n  const [image, setImage] = useState();\n  const [error, setError] = useState();\n  const requireOffName = useSelector(getRequireOffName);\n\n  const onSubmit = async () => {\n    if ((requireOffName && !offName) || !username || !password || !repeatPassword || !pronouns) {\n      return;\n    }\n\n    if (password !== repeatPassword) {\n      return;\n    }\n\n    const params = {\n      image,\n      user: {\n        offName,\n        username,\n        password,\n        description,\n        pronouns,\n      },\n    };\n\n    try {\n      await createUser(params);\n\n      // TODO If no auto-login, Notification: User registered\n\n      await login(username, password);\n\n      // TODO Notification: You are logged in as user\n\n      done();\n    } catch (registerError) {\n      setError(registerError);\n    }\n  };\n\n  return (\n    <Dialog\n      error={error}\n      done={done}\n      title=\"Register user\"\n    >\n      {\n        requireOffName\n          && (\n            <Input\n              placeholder=\"Out-of-game name\"\n              onChange={setOffName}\n            />\n          )\n      }\n      <Input\n        placeholder=\"Username\"\n        onChange={setUsername}\n      />\n      <Select\n        multiple\n        required\n        onChange={setPronouns}\n      >\n        <option value=\"\">---Choose pronouns---</option>\n        <option value=\"they\">They/Them</option>\n        <option value=\"she\">She/Her</option>\n        <option value=\"he\">He/Him</option>\n        <option value=\"it\">It</option>\n      </Select>\n      <Input\n        placeholder=\"Password\"\n        onChange={setPassword}\n        type=\"password\"\n      />\n      <Input\n        placeholder=\"Repeat password\"\n        onChange={setRepeatPassword}\n        type=\"password\"\n      />\n      <Textarea\n        placeholder=\"Description\"\n        onChange={setDescription}\n      />\n      <div className=\"buttons\">\n        <Button\n          type=\"submit\"\n          onClick={onSubmit}\n        >\n          Register\n        </Button>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default React.memo(RegisterDialog);\n\nRegisterDialog.propTypes = {\n  done: func.isRequired,\n};\n","export const getAllAliases = (state) => state.aliases;\n\nexport const getAlias = (state, { id }) => state.aliases.get(id);\n","import { createSelector } from 'reselect';\nimport createCachedSelector from 're-reselect';\n\nimport { getAlias, getAllAliases } from './aliases';\nimport { getUserId } from './userId';\nimport { getAnonymousUser } from './config';\n\nexport const getAllUsers = (state) => state.users;\n\nexport const getUser = (state, { id }) => state.users.get(id);\n\nexport const getCurrentUser = (state) => state.users.get(getUserId(state)) || getAnonymousUser(state);\n\nexport const getCurrentAccessLevel = createSelector(\n  [getCurrentUser],\n  (user) => user.accessLevel,\n);\n\nexport const getIdentities = createSelector(\n  [getAllUsers, getAllAliases],\n  (users, aliases) => [...users.values(), ...aliases.values()],\n);\n\nexport const getIdentitiesByIds = createCachedSelector(\n  [\n    getAllUsers,\n    getAllAliases,\n    (_, { ids }) => ids,\n  ],\n  (users, aliases, ids) => {\n    const map = new Map();\n\n    ids.forEach((id) => map.set(id, users.get(id) || aliases.get(id)));\n\n    return map;\n  },\n)((_, { ids }) => `identities-${ids.join('')}`);\n\nexport const getIdentityById = createSelector(\n  [getUser, getAlias],\n  (user, alias) => user || alias,\n);\n\nexport const getOthersIdentities = createSelector(\n  [getIdentities, getUserId],\n  (identities, userId) => identities\n    .filter((identity) => identity.objectId !== userId && identity.ownerId !== userId && !identity.userIds.includes(userId)),\n);\n\nexport const getCurrentUserIdentities = createSelector(\n  [getIdentities, getUserId],\n  (identities, userId) => identities\n    .filter((identity) => identity.objectId === userId || identity.ownerId === userId || identity.userIds.includes(userId)),\n);\n","import { createPortal } from 'react-dom';\n\nexport const createDialog = (dialog) => createPortal(dialog, document.querySelector('#MainWindow'));\n","import React from 'react';\nimport {\n  arrayOf,\n  func,\n  node,\n  string,\n} from 'prop-types';\n\nconst ListItem = ({\n  children,\n  classNames = [],\n  onClick = () => {},\n}) => (\n  <li\n    className={['ListItem'].concat(classNames).join(' ')}\n    onClick={onClick}\n  >\n    {children}\n  </li>\n);\n\nexport default React.memo(ListItem);\n\nListItem.propTypes = {\n  children: node.isRequired,\n  onClick: func,\n  classNames: arrayOf(string),\n};\n\nListItem.defaultProps = {\n  onClick: () => {},\n  classNames: [],\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 3,\n  y1: 12,\n  x2: 21,\n  y2: 12\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 3,\n  y1: 6,\n  x2: 21,\n  y2: 6\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 3,\n  y1: 18,\n  x2: 21,\n  y2: 18\n});\n\nvar SvgMenu = function SvgMenu(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-menu\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMenu, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/menu.74354d60.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func } from 'prop-types';\n\nimport List from '../../common/lists/List/List';\nimport { AccessLevels } from '../../../AccessCentral';\nimport LoginDialog from '../../common/dialogs/LoginDialog';\nimport RegisterDialog from '../../common/dialogs/RegisterDialog';\nimport { logout } from '../../../socket/actions/auth';\nimport { getCurrentAccessLevel } from '../../../redux/selectors/users';\nimport { createDialog } from '../../helper';\nimport ListItem from '../../common/lists/List/Item/ListItem';\nimport { ReactComponent as Menu } from '../../../icons/menu.svg';\n\nconst MainList = ({ onDialog }) => {\n  const accessLevel = useSelector(getCurrentAccessLevel);\n  const items = [];\n\n  if (accessLevel === AccessLevels.ANONYMOUS) {\n    items.push(\n      <ListItem\n        key=\"register\"\n        onClick={() => {\n          onDialog(createDialog(<RegisterDialog done={() => onDialog()} />));\n        }}\n      >\n        Create user\n      </ListItem>,\n      <ListItem\n        key=\"login\"\n        onClick={() => {\n          onDialog(createDialog(<LoginDialog done={() => onDialog()} />));\n        }}\n      >\n        Login\n      </ListItem>,\n    );\n  }\n\n  if (accessLevel >= AccessLevels.STANDARD) {\n    items.push(\n      <ListItem\n        key=\"logout\"\n        onClick={() => {\n          logout();\n        }}\n      >\n        Logout\n      </ListItem>,\n    );\n  }\n\n  return (\n    <List\n      dropdown\n      title={<Menu />}\n    >\n      {items}\n    </List>\n  );\n};\n\nexport default MainList;\n\nMainList.propTypes = {\n  onDialog: func.isRequired,\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"\n});\n\nvar SvgChat = function SvgChat(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-message-square\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgChat, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/chat.20a18654.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 8,\n  y1: 2,\n  x2: 8,\n  y2: 18\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 16,\n  y1: 6,\n  x2: 16,\n  y2: 22\n});\n\nvar SvgMap = function SvgMap(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-map\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMap, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/map.5a12a8a8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 1,\n  y: 4,\n  width: 22,\n  height: 16,\n  rx: 2,\n  ry: 2\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"line\", {\n  x1: 1,\n  y1: 10,\n  x2: 23,\n  y2: 10\n});\n\nvar SvgWallet = function SvgWallet(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 3,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    className: \"feather feather-credit-card\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgWallet, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/wallet.2f800c77.svg\";\nexport { ForwardRef as ReactComponent };","import { WINDOWORDER, WINDOWORDERS } from '../actionTypes';\n\nexport const changeWindowOrder = ({ windows }) => {\n  if (windows.length === 1) {\n    const [{ type, id }] = windows;\n\n    return {\n      type: WINDOWORDER,\n      payload: { id, type },\n    };\n  }\n\n  return {\n    type: WINDOWORDERS,\n    payload: { windows },\n  };\n};\n","import React from 'react';\nimport List from '../../common/lists/List/List';\nimport ListItem from '../../common/lists/List/Item/ListItem';\n\nimport { ReactComponent as Chat } from '../../../icons/chat.svg';\nimport { ReactComponent as Map } from '../../../icons/map.svg';\nimport { ReactComponent as Wallet } from '../../../icons/wallet.svg';\nimport Button from '../../common/sub-components/Button/Button';\nimport { WindowTypes } from '../../../redux/reducers/windowOrder';\nimport store from '../../../redux/store';\nimport { changeWindowOrder } from '../../../redux/actions/windowOrder';\n\nconst OpenApps = () => {\n  const changeOrder = ({ id, type }) => store.dispatch(changeWindowOrder({ windows: [{ id, type }] }));\n\n  return (\n    <List classNames={['OpenApps']}>\n      <ListItem key=\"wallet\"><Button onClick={() => changeOrder({ id: WindowTypes.WALLET, type: WindowTypes.WALLET })}><Wallet /></Button></ListItem>\n      <ListItem key=\"map\"><Button onClick={() => changeOrder({ id: WindowTypes.WORLDMAP, type: WindowTypes.WORLDMAP })}><Map /></Button></ListItem>\n      <ListItem key=\"chat\"><Button onClick={() => changeOrder({ id: WindowTypes.CHAT, type: WindowTypes.CHAT })}><Chat /></Button></ListItem>\n    </List>\n  );\n};\n\nexport default React.memo(OpenApps);\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport Clock from './sub-components/Clock';\nimport MainList from './lists/MainList';\nimport { isOnline } from '../../redux/selectors/online';\n\nimport './MenuBar.scss';\nimport OpenApps from './lists/OpenApps';\n\nconst MenuBar = () => {\n  const [dialog, setDialog] = useState();\n  const online = useSelector(isOnline);\n  const content = [];\n  const classes = [];\n\n  if (!online) {\n    classes.push('warning');\n  }\n\n  return (\n    <div\n      className={`${classes.join(' ')}`}\n      id=\"MenuBar\"\n    >\n      <MainList onDialog={setDialog} />\n      <OpenApps />\n      {content}\n      <Clock />\n      {dialog}\n    </div>\n  );\n};\n\nexport default MenuBar;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { arrayOf, element } from 'prop-types';\nimport {\n  ALIASES,\n  DOCFILES,\n  FORUMPOSTS,\n  FORUMS,\n  FORUMTHREADS,\n  GAMECODES,\n  INVITATIONS,\n  MESSAGES,\n  ROOMS,\n  SIMPLEMSGS,\n  TEAMS,\n  TRANSACTIONS,\n  USERS,\n  WALLETS,\n  DEVICES,\n} from '../redux/actionTypes';\nimport {\n  emitSocketEvent,\n  GetEvents,\n} from '../socket/SocketManager';\nimport { ChangeTypes } from '../redux/reducers/root';\nimport { getUserId } from '../redux/selectors/userId';\n\nconst DataHandler = () => {\n  const dispatch = useDispatch();\n  const userId = useSelector(getUserId);\n\n  const retrieveAll = ({ reset } = {}) => {\n    [\n      { type: USERS, event: GetEvents.USERS },\n      { type: ALIASES, event: GetEvents.ALIASES },\n      { type: MESSAGES, event: GetEvents.MESSAGES },\n      { type: ROOMS, event: GetEvents.ROOMS },\n      { type: INVITATIONS, event: GetEvents.INVITATIONS },\n      { type: DOCFILES, event: GetEvents.DOCFILES },\n      { type: FORUMS, event: GetEvents.FORUMS },\n      { type: FORUMPOSTS, event: GetEvents.FORUMPOSTS },\n      { type: FORUMTHREADS, event: GetEvents.FORUMTHREADS },\n      { type: GAMECODES, event: GetEvents.GAMECODES },\n      { type: SIMPLEMSGS, event: GetEvents.SIMPLEMSGS },\n      { type: TEAMS, event: GetEvents.TEAMS },\n      { type: TRANSACTIONS, event: GetEvents.TRANSACTIONS },\n      { type: WALLETS, event: GetEvents.WALLETS },\n      { type: DEVICES, event: GetEvents.DEVICES },\n    ].forEach(async (getter) => {\n      const { event, type } = getter;\n\n      emitSocketEvent(event, {})\n        .then((result) => {\n          dispatch({\n            type,\n            payload: {\n              reset,\n              changeType: ChangeTypes.CREATE,\n              [type]: result[type],\n            },\n          });\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    });\n  };\n\n  useEffect(() => {\n    retrieveAll({ reset: true });\n  }, [userId]);\n\n  return (<></>);\n};\n\nexport default DataHandler;\n","import { createSelector } from 'reselect';\nimport { getCurrentUser } from './users';\n\nexport const getAllWallets = (state) => state.wallets;\n\nexport const getWalletById = (state, walletId) => state.wallets.get(walletId);\n\nexport const getWalletIdsByCurrentUser = createSelector(\n  [getAllWallets, getCurrentUser],\n  (wallets, currentUser) => [...wallets.values()]\n    .filter((wallet) => {\n      const ownerId = wallet.ownerAliasId || wallet.ownerId;\n\n      return ownerId === currentUser.objectId || currentUser.aliases.includes(ownerId);\n    })\n    .map(({ objectId }) => objectId),\n);\n","import { createSelector } from 'reselect';\nimport { getWalletById, getWalletIdsByCurrentUser } from './wallets';\n\nexport const SortBy = {\n  DATE: 'date',\n  AMOUNT: 'amount',\n};\n\nexport const getAllTransactions = (state) => state.transactions;\n\nexport const getTransactionById = (state, transactionId) => state.transaction.get(transactionId);\n\nexport const getIdentityIdsByTransaction = (state, transactionId) => {\n  const transaction = getTransactionById(state, transactionId);\n  const toWallet = getWalletById(state, transaction.toWalletId);\n  const fromWallet = getWalletById(state, transaction.fromWalletId);\n\n  return ([fromWallet.ownerAliasId || fromWallet.ownerId, toWallet.ownerAliasId || toWallet.ownerId]);\n};\n\nexport const getTransactionIdsByWallets = (walletIds) => createSelector(\n  [getAllTransactions],\n  (transactions) => [...transactions.values()]\n    .filter(({ fromWalletId, toWalletId }) => walletIds.includes(fromWalletId) || walletIds.includes(toWalletId))\n    .map(({ objectId }) => objectId),\n);\n\nexport const getTransactionIdsByCurrentUser = createSelector(\n  [getAllTransactions, getWalletIdsByCurrentUser],\n  (transactions, walletIds) => [...transactions.values()]\n    .filter(({ fromWalletId, toWalletId }) => walletIds.includes(fromWalletId) || walletIds.includes(toWalletId))\n    .map(({ objectId }) => objectId),\n);\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { string } from 'prop-types';\nimport ListItem from '../../../../common/lists/List/Item/ListItem';\nimport { getIdentityIdsByTransaction, getTransactionById } from '../../../../../redux/selectors/transactions';\n\nconst TransactionItem = ({ transactionId }) => {\n  const transaction = useSelector((state) => getTransactionById(state, transactionId));\n  const [from, to] = useSelector((state) => getIdentityIdsByTransaction(state, getIdentityIdsByTransaction(state, transactionId)));\n\n  return (\n    <ListItem\n      classNames={['TransactionItem']}\n      key={transactionId}\n    >\n      <span>{transaction.amount}</span>\n      <span>{from.aliasName || from.username}</span>\n      <span>{to.aliasName || to.username}</span>\n    </ListItem>\n  );\n};\n\nexport default React.memo(TransactionItem);\n\nTransactionItem.propTypes = {\n  transactionId: string.isRequired,\n};\n","import React  from 'react';\nimport { arrayOf, string } from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport List from '../../../common/lists/List/List';\nimport TransactionItem from './Item/TransactionItem';\nimport { getTransactionIdsByWallets } from '../../../../redux/selectors/transactions';\n\nconst TransactionList = ({ walletIds }) => {\n  const transactionIds = useSelector(getTransactionIdsByWallets(walletIds));\n\n  const transactionMapper = () => transactionIds.map((transactionId) => <TransactionItem transactionId={transactionId} />);\n\n  return (\n    <List\n      large\n      classNames={['TransactionList']}\n    >\n      {transactionMapper()}\n    </List>\n  );\n};\n\nexport default React.memo(TransactionList);\n\nTransactionList.propTypes = {\n  walletIds: arrayOf(string).isRequired,\n};\n","import React, { useCallback } from 'react';\nimport { string } from 'prop-types';\nimport { useSelector } from 'react-redux';\n\nimport Window from '../common/Window/Window';\nimport TransactionList from './lists/Transaction/TransactionList';\nimport { getWalletIdsByCurrentUser } from '../../redux/selectors/wallets';\nimport store from '../../redux/store';\nimport { changeWindowOrder } from '../../redux/actions/windowOrder';\nimport { WindowTypes } from '../../redux/reducers/windowOrder';\n\nconst Wallet = ({ id }) => {\n  const walletIds = useSelector(getWalletIdsByCurrentUser);\n\n  const onClick = useCallback(() => {\n    store.dispatch(changeWindowOrder({ windows: [{ id, type: WindowTypes.WALLET }] }));\n  }, []);\n\n  return (\n    <Window\n      classNames={['Wallet']}\n      title=\"wallet\"\n      onClick={onClick}\n    >\n      <TransactionList walletIds={walletIds} />\n    </Window>\n  );\n};\n\nexport default React.memo(Wallet);\n\nWallet.propTypes = {\n  id: string.isRequired,\n};\n","import React, { useEffect, useRef, useState } from 'react';\n\nimport './MapView.scss';\n\nconst MapView = () => {\n  const [map, setMap] = useState();\n  const mapRef = useRef();\n\n  const createMap = () => {\n    if (typeof window.google === 'undefined' || typeof window.MarkerClusterer === 'undefined' || typeof window.MapLabel === 'undefined') {\n      setTimeout(createMap, 1000);\n\n      return;\n    }\n\n    const worldMap = new window.google.maps.Map(mapRef.current, {\n      disableDefaultUI: true,\n      fullscreenControl: false,\n      keyboardShortcuts: false,\n      mapTypeControl: false,\n      noClear: true,\n      zoomControl: false,\n      panControl: false,\n      overviewMapControl: false,\n      rotateControl: false,\n      scaleControl: false,\n      streetViewControl: false,\n      center: { lat: -34.397, lng: 150.644 },\n      zoom: 8,\n      styles: [{\n        elementType: 'geometry',\n        stylers: [\n          { color: '#13002d' },\n        ],\n      }, {\n        elementType: 'labels',\n        stylers: [\n          { visibility: 'off' },\n        ],\n      }, {\n        featureType: 'poi',\n        stylers: [\n          { visibility: 'off' },\n        ],\n      }, {\n        featureType: 'administrative',\n        stylers: [\n          { color: '#370087' },\n        ],\n      }, {\n        featureType: 'landscape.natural.terrain',\n        stylers: [\n          { color: '#44003a' },\n        ],\n      }, {\n        featureType: 'road',\n        stylers: [\n          { color: '#6e6c6d' },\n          { weight: 0.5 },\n        ],\n      }, {\n        featureType: 'transit',\n        stylers: [\n          { visibility: 'off' },\n        ],\n      }, {\n        featureType: 'water',\n        stylers: [\n          { color: '#7d006c' },\n        ],\n      }],\n    });\n\n    setMap(worldMap);\n  };\n\n  useEffect(() => {\n    createMap();\n  }, []);\n\n  return (\n    <div\n      ref={mapRef}\n      className=\"MapView\"\n    />\n  );\n};\n\nexport default MapView;\n","import { createSelector } from 'reselect';\n\nexport const getAllPositions = (state) => state.positions;\n\nexport const getPositionNamesByType = (type) => createSelector(\n  [getAllPositions],\n  (positions) => [...positions.values()]\n    .filter(({ positionType }) => type === positionType)\n    .map(({ positionName, objectId }) => ({ positionName, objectId })),\n);\n","import React, { useMemo } from 'react';\nimport { string } from 'prop-types';\nimport { useSelector } from 'react-redux';\n\nimport List from '../../../common/lists/List/List';\nimport { getPositionNamesByType } from '../../../../redux/selectors/positions';\nimport ListItem from '../../../common/lists/List/Item/ListItem';\n\nconst PositionList = ({ title, positionType }) => {\n  const positionsSelector = useMemo(getPositionNamesByType, []);\n  const positions = useSelector((state) => positionsSelector(state, positionType));\n\n  const positionMapper = () => positions.map((position) => (\n    <ListItem\n      key={position.objectId}\n      onClick={() => { console.log(position.objectId); }}\n    >\n      {position.positionName}\n    </ListItem>\n  ));\n\n  return (\n    <div\n      key=\"positionsList\"\n      className=\"PositionsList\"\n    >\n      <List\n        title={title}\n      >\n        {positionMapper()}\n      </List>\n    </div>\n  );\n};\n\nexport default React.memo(PositionList);\n\nPositionList.propTypes = {\n  title: string,\n  positionType: string.isRequired,\n};\n\nPositionList.defaultProps = {\n  title: undefined,\n};\n","import React from 'react';\nimport PositionList from '../lists/Position/PositionList';\n\nconst Positions = ({ positionTypes = [] }) => {\n  const listMapper = () => positionTypes.map((positionType) => (\n    <PositionList\n      title={positionType}\n      positionType={positionType}\n    />\n  ));\n\n  return (\n    <div className=\"lists Positions\">\n      {listMapper()}\n    </div>\n  );\n};\n\nexport default Positions;\n","import React, { useCallback } from 'react';\nimport { string } from 'prop-types';\nimport Window from '../common/Window/Window';\nimport MapView from './views/MapView';\nimport Positions from './views/Positions';\n\nimport './WorldMap.scss';\nimport store from '../../redux/store';\nimport { changeWindowOrder } from '../../redux/actions/windowOrder';\nimport { WindowTypes } from '../../redux/reducers/windowOrder';\n\nconst WorldMap = ({ id }) => {\n  const onClick = useCallback(() => {\n    store.dispatch(changeWindowOrder({ windows: [{ id, type: WindowTypes.WORLDMAP }] }));\n  }, []);\n\n  return (\n    <Window\n      classNames={['WorldMap']}\n      title=\"map\"\n      onClick={onClick}\n      menu={(\n        <>\n          <Positions />\n        </>\n      )}\n    >\n      <MapView />\n    </Window>\n  );\n};\n\nexport default React.memo(WorldMap);\n\nWorldMap.propTypes = {\n  id: string.isRequired,\n};\n","import createCachedSelector from 're-reselect';\nimport { getCurrentUser, getCurrentUserIdentities, getIdentitiesByIds } from './users';\n\nexport const getAllRooms = (state) => state.rooms;\n\nexport const getRoom = (state, { id }) => state.rooms.get(id);\n\nconst getRooms = createCachedSelector(\n  [getAllRooms],\n  (rooms) => [...rooms.values()].filter((room) => !room.isWhisper && !room.isUser),\n)(() => 'normalRooms');\n\nexport const getWhisperRooms = createCachedSelector(\n  [getAllRooms],\n  (rooms) => [...rooms.values()]\n    .filter((room) => room.isWhisper)\n    .map(({ objectId, participantIds }) => ({ objectId, participantIds })),\n)(() => 'whisperRooms');\n\nexport const getUnfollowedRoomIds = createCachedSelector(\n  [getRooms, getCurrentUser],\n  (rooms, user) => rooms\n    .filter((room) => !user.followingRooms.includes(room.objectId)).map(({ roomName, objectId }) => ({ roomName, objectId }))\n    .sort((roomA, roomB) => {\n      const a = roomA.roomName.toLowerCase();\n      const b = roomB.roomName.toLowerCase();\n\n      if (a > b) {\n        return 1;\n      }\n\n      if (b < a) {\n        return 1;\n      }\n\n      return 0;\n    })\n    .map(({ objectId }) => objectId),\n)(() => 'unfollowedRooms');\n\nexport const getFollowedRoomsIds = createCachedSelector(\n  [getRooms, getCurrentUser],\n  (rooms, user) => rooms\n    .filter((room) => user.followingRooms.includes(room.objectId))\n    .map(({ objectId }) => objectId),\n)(() => 'followedRooms');\n\nexport const getWhisperRoom = createCachedSelector(\n  [\n    getWhisperRooms,\n    (_, { identityId, currentIdentityId }) => ({ identityId, currentIdentityId }),\n  ],\n  (rooms, { currentIdentityId, identityId }) => rooms.find((room) => room.participantIds.includes(currentIdentityId) && room.participantIds.includes(identityId)),\n)((_, { currentIdentityId, identityId }) => `whisper-${currentIdentityId}-${identityId}`);\n\nexport const getWhisperRoomName = createCachedSelector(\n  [\n    getIdentitiesByIds,\n    getCurrentUserIdentities,\n    (_, { ids: participantIds }) => participantIds,\n  ],\n  (identities, currentIdentities, participantIds) => {\n    const participant = identities.get(participantIds[0]);\n    const secondParticipant = identities.get(participantIds[1]);\n    const name = currentIdentities\n      .find(({ objectId }) => participant.objectId === objectId || participant.ownerId === objectId || participant.userIds.includes(objectId))\n      ? `${participant.username || participant.aliasName} > ${secondParticipant.username || participant.aliasName}`\n      : `${secondParticipant.username || participant.aliasName} > ${participant.username || participant.aliasName}`;\n\n    return name;\n  },\n)((_, { ids }) => `w-name-${ids.join(' ')}`);\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func, string } from 'prop-types';\nimport Dialog from './Dialog/Dialog';\nimport { getIdentityById } from '../../../redux/selectors/users';\nimport Button from '../sub-components/Button/Button';\nimport { getRoom, getWhisperRoom } from '../../../redux/selectors/rooms';\nimport store from '../../../redux/store';\nimport { getCurrentIdentityId } from '../../../redux/selectors/userId';\n\nconst IdentityDialog = ({ identityId, done }) => {\n  const identity = useSelector((state) => getIdentityById(state, { id: identityId }));\n  const currentIdentityId = useSelector(getCurrentIdentityId);\n\n  return (\n    <Dialog\n      done={done}\n    >\n      <Button\n        type=\"button\"\n        onClick={() => {\n          const room = getWhisperRoom(store.getState(), { identityId, currentIdentityId }) || getRoom(store.getState(), { id: identityId });\n\n          done({ roomId: room.objectId });\n        }}\n      >\n        Message\n      </Button>\n    </Dialog>\n  );\n};\n\nexport default React.memo(IdentityDialog);\n\nIdentityDialog.propTypes = {\n  done: func.isRequired,\n  identityId: string.isRequired,\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func } from 'prop-types';\nimport List from './List/List';\nimport { getOthersIdentities } from '../../../redux/selectors/users';\nimport UserDialog from '../dialogs/UserDialog';\nimport { createDialog } from '../../helper';\nimport ListItem from './List/Item/ListItem';\n\nexport const choices = {\n  WHISPER: 'whisper',\n};\n\nconst UserList = ({ onDialog, onDone }) => {\n  const identities = useSelector(getOthersIdentities);\n\n  const userMapper = () => identities.map((identity) => (\n    <ListItem\n      key={identity.objectId}\n      onClick={() => {\n        onDialog((createDialog(\n          <UserDialog\n            done={(params) => {\n              onDone(params);\n              onDialog();\n            }}\n            identityId={identity.objectId}\n          />,\n        )));\n      }}\n    >\n      {identity.username || identity.aliasName}\n    </ListItem>\n  ));\n\n  return (\n    <List\n      dropdown\n      classNames={['UserList']}\n      title=\"Users\"\n    >\n      {userMapper()}\n    </List>\n  );\n};\n\nexport default React.memo(UserList);\n\nUserList.propTypes = {\n  onDialog: func.isRequired,\n  onDone: func.isRequired,\n};\n","import { SendEvents, emitSocketEvent } from '../SocketManager';\nimport { getRoom } from '../../redux/selectors/rooms';\nimport store from '../../redux/store';\nimport { getCurrentIdentityId } from '../../redux/selectors/userId';\nimport { createMessages } from '../../redux/actions/messages';\n\nconst MessageType = {\n  CHAT: 'chat',\n  WHISPER: 'whisper',\n  BROADCAST: 'broadcast',\n  MESSAGE: 'message',\n};\n\nexport const sendMessage = async ({ text, roomId, image }) => {\n  const room = getRoom(store.getState(), { id: roomId });\n  const participantIds = room.isWhisper\n    ? room.participantIds\n    : [];\n  const message = {\n    roomId,\n    text: text.split('\\n'),\n  };\n\n  if (room.isUser) {\n    message.messageType = MessageType.WHISPER;\n    participantIds.push(getCurrentIdentityId(store.getState()));\n    participantIds.push(roomId);\n  } else if (room.isWhisper) {\n    message.messageType = MessageType.WHISPER;\n  } else {\n    message.messageType = MessageType.CHAT;\n  }\n\n  const result = await emitSocketEvent(SendEvents.MESSAGE, {\n    message,\n    image,\n    participantIds,\n  });\n\n  store.dispatch(createMessages({ messages: [result.message] }));\n\n  return { message: result.message, switchRoom: true };\n};\n\nexport const getMessagesByRoom = async ({ roomId }) => {\n  const result = await emitSocketEvent(SendEvents.GETMSGBYROOM, { roomId });\n\n  store.dispatch(createMessages({ messages: result.messages }));\n\n  return true;\n};\n","import { SendEvents, emitSocketEvent } from '../SocketManager';\nimport store from '../../redux/store';\nimport { followRoom as followRoomAction, removeRooms } from '../../redux/actions/rooms';\nimport { getMessagesByRoom } from './messages';\n\nexport const createRoom = async ({ room }) => {\n  const result = await emitSocketEvent(SendEvents.ROOM, { room });\n\n  await store.dispatch(followRoomAction({ room: result.room, user: result.user }));\n\n  return { room: result.room };\n};\n\nexport const followRoom = async ({ roomId, password }) => {\n  const result = await emitSocketEvent(SendEvents.FOLLOW, { roomId, password });\n\n  await getMessagesByRoom({ roomId });\n\n  await store.dispatch(followRoomAction({ room: result.room, user: result.user }));\n\n  return { room: result.room, user: result.user };\n};\n\nexport const removeRoom = async ({ roomId }) => {\n  const result = await emitSocketEvent(SendEvents.REMOVEROOM, { roomId });\n\n  await store.dispatch(removeRooms({ rooms: [{ objectId: roomId }] }));\n\n  return { room: result.room };\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func, string } from 'prop-types';\n\nimport { followRoom } from '../../../../../socket/actions/rooms';\nimport ListItem from '../../../../common/lists/List/Item/ListItem';\nimport { getRoom } from '../../../../../redux/selectors/rooms';\n\nconst RoomItem = ({ roomId, onChange }) => {\n  const room = useSelector((state) => getRoom(state, { id: roomId }));\n\n  return (\n    <ListItem\n      key={roomId}\n      onClick={() => {\n        followRoom({ roomId: room.objectId })\n          .then(() => onChange({ roomId: room.objectId }))\n          .catch((followError) => console.log(followError));\n      }}\n    >\n      {room.roomName}\n    </ListItem>\n  );\n};\n\nexport default React.memo(RoomItem);\n\nRoomItem.propTypes = {\n  roomId: string.isRequired,\n  onChange: func.isRequired,\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func } from 'prop-types';\n\nimport List from '../../../common/lists/List/List';\nimport { getUnfollowedRoomIds } from '../../../../redux/selectors/rooms';\nimport RoomItem from './Item/RoomItem';\n\nconst RoomList = ({ onChange }) => {\n  const roomIds = useSelector(getUnfollowedRoomIds);\n\n  const roomMapper = () => roomIds.map((roomId) => (\n    <RoomItem\n      key={roomId}\n      roomId={roomId}\n      onChange={onChange}\n    />\n  ));\n\n  return (\n    <List\n      dropdown\n      key=\"roomList\"\n      classNames={['RoomList']}\n      title=\"Rooms\"\n    >\n      {roomMapper()}\n    </List>\n  );\n};\n\nexport default React.memo(RoomList);\n\nRoomList.propTypes = {\n  onChange: func.isRequired,\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport {\n  arrayOf,\n  func, shape,\n  string,\n} from 'prop-types';\n\nimport ListItem from '../../../../common/lists/List/Item/ListItem';\nimport { getWhisperRoomName } from '../../../../../redux/selectors/rooms';\n\nconst WhisperItem = ({ room, onChange }) => {\n  const roomName = useSelector((state) => getWhisperRoomName(state, { ids: room.participantIds }));\n\n  return (\n    <ListItem\n      key={room.objectId}\n      onClick={() => {\n        onChange({ roomId: room.objectId, roomName });\n      }}\n    >\n      {roomName}\n    </ListItem>\n  );\n};\n\nexport default React.memo(WhisperItem);\n\nWhisperItem.propTypes = {\n  room: shape({\n    participantIds: arrayOf(string),\n  }).isRequired,\n  onChange: func.isRequired,\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func } from 'prop-types';\nimport { getWhisperRooms } from '../../../../redux/selectors/rooms';\nimport List from '../../../common/lists/List/List';\nimport WhisperItem from './Item/WhisperItem';\n\nconst WhisperList = ({ onChange }) => {\n  const rooms = useSelector(getWhisperRooms);\n\n  const roomMapper = () => rooms.map((room) => <WhisperItem key={room.objectId} room={room} onChange={onChange} />);\n\n  return (\n    <List\n      dropdown\n      key=\"whisperList\"\n      classNames={['WhisperList']}\n      title=\"PM\"\n    >\n      {roomMapper()}\n    </List>\n  );\n};\n\nexport default React.memo(WhisperList);\n\nWhisperList.propTypes = {\n  onChange: func.isRequired,\n};\n","import React from 'react';\nimport { func, string } from 'prop-types';\nimport { useSelector } from 'react-redux';\n\nimport ListItem from '../../../../common/lists/List/Item/ListItem';\nimport { getRoom } from '../../../../../redux/selectors/rooms';\n\nconst FollowingItem = ({ roomId, onChange }) => {\n  const room = useSelector((state) => getRoom(state, { id: roomId }));\n\n  return (\n    <ListItem\n      key={roomId}\n      onClick={() => {\n        onChange({ roomId });\n      }}\n    >\n      {room.roomName}\n    </ListItem>\n  );\n};\n\nexport default React.memo(FollowingItem);\n\nFollowingItem.propTypes = {\n  roomId: string.isRequired,\n  onChange: func.isRequired,\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func } from 'prop-types';\nimport List from '../../../common/lists/List/List';\nimport { getFollowedRoomsIds } from '../../../../redux/selectors/rooms';\nimport FollowingItem from './Item/FollowingItem';\n\nconst FollowingList = ({ onChange }) => {\n  const roomIds = useSelector(getFollowedRoomsIds);\n\n  const roomMapper = () => roomIds.map((roomId) => (\n    <FollowingItem\n      key={roomId}\n      roomId={roomId}\n      onChange={onChange}\n    />\n  ));\n\n  return (\n    <List\n      dropdown\n      key=\"followingList\"\n      classNames={['FollowingList']}\n      title=\"Joined\"\n    >\n      {roomMapper()}\n    </List>\n  );\n};\n\nexport default React.memo(FollowingList);\n\nFollowingList.propTypes = {\n  onChange: func.isRequired,\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func } from 'prop-types';\nimport { AccessLevels } from '../../../AccessCentral';\nimport UserList from '../../common/lists/UserList';\nimport RoomList from '../lists/Room/RoomList';\nimport WhisperList from '../lists/Whisper/WhisperList';\nimport FollowingList from '../lists/Following/FollowingList';\nimport { getCurrentAccessLevel } from '../../../redux/selectors/users';\n\nconst Rooms = ({ onChange, onDialog }) => {\n  const accessLevel = useSelector(getCurrentAccessLevel);\n\n  return (\n    <>\n      {\n        accessLevel >= AccessLevels.STANDARD && (\n          <>\n            <FollowingList\n              key=\"following\"\n              onChange={onChange}\n            />\n            <WhisperList\n              key=\"whisper\"\n              onChange={onChange}\n            />\n            <RoomList\n              key=\"room\"\n              onChange={onChange}\n              onDialog={onDialog}\n            />\n          </>\n        )\n      }\n      <UserList\n        onDone={onChange}\n        onDialog={onDialog}\n        key=\"user\"\n      />\n    </>\n  );\n};\n\nexport default React.memo(Rooms);\n\nRooms.propTypes = {\n  onChange: func.isRequired,\n  onDialog: func.isRequired,\n};\n","import React from 'react';\nimport { arrayOf, func, string } from 'prop-types';\n\nconst Image = React.forwardRef(({\n  image,\n  onRemove,\n  classNames = [],\n  altText = '',\n} = {}, ref) => (\n  <div className={`${['Image'].concat(classNames).join(' ')}`}>\n    {\n      onRemove && (\n        <div\n          role=\"complementary\"\n          onClick={(event) => {\n            event.stopPropagation();\n\n            onRemove();\n          }}\n        >\n          X\n        </div>\n      )\n    }\n    <img\n      ref={ref}\n      src={image}\n      alt={altText}\n    />\n  </div>\n));\n\nexport default Image;\n\nImage.propTypes = {\n  image: string.isRequired,\n  altText: string,\n  classNames: arrayOf(string),\n  onRemove: func,\n};\n\nImage.defaultProps = {\n  altText: '',\n  classNames: [],\n  onRemove: undefined,\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport { func } from 'prop-types';\n\nimport Image from '../sub-components/Image';\nimport Button from '../sub-components/Button/Button';\n\nimport imageIcon from './imageIcon.png';\n\nimport './ImageUpload.scss';\n\nconst ImageUpload = ({ onChange } = {}) => {\n  const inputRef = useRef(null);\n  const previewRef = useRef(null);\n  const [previewImage, setPreviewImage] = useState();\n\n  useEffect(() => {\n    onChange(previewImage);\n  }, [previewImage]);\n\n  const onChangeFunc = ({ target }) => {\n    const files = target.files || [];\n    const file = files[0];\n\n    if (file) {\n      const reader = new FileReader();\n\n      reader.addEventListener('load', () => {\n        if (reader.result) {\n          setPreviewImage({\n            imageName: file.name,\n            source: reader.result,\n            width: previewRef.current.naturalWidth,\n            height: previewRef.current.naturalHeight,\n          });\n        }\n      });\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <div\n      className=\"ImageUpload\"\n    >\n      <input\n        key=\"uploadInput\"\n        className=\"hide\"\n        ref={inputRef}\n        type=\"file\"\n        accept=\"image/png, image/jpeg, image/pjpeg\"\n        onChange={onChangeFunc}\n      />\n      <Button\n        type=\"button\"\n        onClick={() => { inputRef.current.click(); }}\n      >\n        <Image\n          onRemove={() => setPreviewImage()}\n          ref={previewRef}\n          classNames={['previewImage'].concat([!previewImage ? 'hide' : ''])}\n          image={previewImage ? previewImage.source : ''}\n          altText=\"Image preview\"\n        />\n        <Image\n          image={imageIcon}\n          altText=\"Upload image\"\n        />\n      </Button>\n    </div>\n  );\n};\n\nexport default React.memo(ImageUpload);\n\nImageUpload.propTypes = {\n  onChange: func.isRequired,\n};\n\nImageUpload.defaultProps = {\n};\n","import React, { useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { func, number, string } from 'prop-types';\nimport { useForm } from 'react-hook-form';\n\nimport ImageUpload from '../../../common/ImageUpload/ImageUpload';\n\nimport { AccessLevels } from '../../../../AccessCentral';\nimport { isOnline } from '../../../../redux/selectors/online';\nimport { getCurrentAccessLevel } from '../../../../redux/selectors/users';\nimport { getAllowedImages } from '../../../../redux/selectors/config';\n\nimport './InputArea.scss';\nimport Button from '../../../common/sub-components/Button/Button';\nimport { sendMessage } from '../../../../socket/actions/messages';\n\nconst InputArea = ({\n  roomId,\n  onSend,\n  minAccessLevel = AccessLevels.STANDARD,\n}) => {\n  const { register, handleSubmit, reset } = useForm();\n  const inputRef = useRef(null);\n  const buttonRef = useRef(null);\n  const [image, setImage] = useState();\n  const online = useSelector(isOnline);\n  const accessLevel = useSelector(getCurrentAccessLevel);\n  const allowedImages = useSelector(getAllowedImages);\n  const textareaClasses = [];\n\n  const resize = () => {\n    if (inputRef.current) {\n      const textarea = inputRef.current;\n\n      if (!textarea.style.height || (textarea.scrollHeight.toString() !== textarea.style.height.split('px')[0])) {\n        textarea.style.height = 'auto';\n        textarea.style.height = `${textarea.scrollHeight}px`;\n        inputRef.current.scrollIntoView();\n      }\n    }\n  };\n\n  const submit = ({\n    text,\n  }) => {\n    sendMessage({\n      roomId,\n      image,\n      text,\n    }).then(({ message, switchRoom }) => {\n      if (image) {\n        setImage(undefined);\n      }\n\n      reset();\n      resize();\n\n      if (switchRoom) {\n        onSend({ roomId: message.roomId });\n      }\n    }).catch((error) => {\n      console.log(error);\n    });\n  };\n\n  return (\n    <div className=\"InputArea\">\n      <form onSubmit={handleSubmit(submit)}>\n        {accessLevel >= minAccessLevel && (\n          <div\n            key=\"buttonBox\"\n            className=\"buttonBox\"\n          >\n            {\n              allowedImages.CHAT\n              && (\n                <ImageUpload\n                  onChange={setImage}\n                />\n              )\n            }\n          </div>\n        )}\n        <div className=\"input\">\n          <textarea\n            name=\"text\"\n            key=\"input\"\n            rows={1}\n            ref={(element) => {\n              register(element);\n\n              inputRef.current = element;\n            }}\n            onKeyDown={(event) => {\n              const { key, altKey } = event;\n\n              if (altKey && key === 'Enter' && buttonRef.current) {\n                buttonRef.current.click();\n              }\n            }}\n            placeholder={online ? 'Alt+Enter to send message' : 'Offline. Reconnecting to server...'}\n            className={textareaClasses.join(' ')}\n            onChange={(event) => resize(event.target)}\n          />\n          <Button\n            ref={buttonRef}\n            disabled={!online}\n            key=\"send\"\n            type=\"submit\"\n            classNames={['sendButton']}\n            onClick={() => {}}\n          >\n            Send\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default React.memo(InputArea);\n\nInputArea.propTypes = {\n  minAccessLevel: number,\n  roomId: string.isRequired,\n  onSend: func.isRequired,\n};\n\nInputArea.defaultProps = {\n  minAccessLevel: AccessLevels.STANDARD,\n};\n","import createCachedSelector from 're-reselect';\n\nexport const getMessageById = (state, { id }) => state.messages.get(id);\n\nexport const getAllMessages = (state) => state.messages;\n\nexport const getMessagesByRoom = createCachedSelector(\n  [\n    getAllMessages,\n    (_, { roomId }) => roomId,\n  ],\n  (messages, roomId) => [...messages.values()].filter((message) => message.roomId === roomId),\n)((_, { roomId }) => roomId);\n\nexport const getMessageIdsByRoom = createCachedSelector(\n  [getMessagesByRoom],\n  (messages) => messages.map(({ objectId }) => objectId),\n)((_, { roomId }) => `id-${roomId}`);\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func, string } from 'prop-types';\nimport { getIdentityById } from '../../../../redux/selectors/users';\nimport { getTimestamp } from '../../../../redux/selectors/config';\nimport { createDialog } from '../../../helper';\n\nimport './MessageInfo.scss';\nimport UserDialog from '../../../common/dialogs/UserDialog';\n\nconst MessageInfo = ({ identityId, timeCreated, onDialog }) => {\n  const identity = useSelector((state) => getIdentityById(state, { id: identityId }));\n  const timestamp = useSelector((state) => getTimestamp(state, { date: timeCreated }));\n\n  return (\n    <p className=\"MessageInfo\">\n      <span\n        role=\"button\"\n        tabIndex={0}\n        className=\"clickable username\"\n        onClick={() => {\n          if (identity) {\n            onDialog(createDialog(<UserDialog identityId={identity.objectId} done={() => onDialog()} />));\n          }\n        }}\n      >\n        {identity ? identity.username || identity.aliasName : '-'}\n      </span>\n      <span className=\"time\">\n        {timestamp.fullStamp}\n      </span>\n    </p>\n  );\n};\n\nexport default React.memo(MessageInfo);\n\nMessageInfo.propTypes = {\n  identityId: string.isRequired,\n  timeCreated: string.isRequired,\n  onDialog: func.isRequired,\n};\n","import React from 'react';\nimport {\n  func,\n  string,\n} from 'prop-types';\nimport { useSelector } from 'react-redux';\n\nimport MessageInfo from '../../../sub-components/MessageInfo/MessageInfo';\nimport ListItem from '../../../../common/lists/List/Item/ListItem';\nimport { getMessageById } from '../../../../../redux/selectors/messages';\n\nimport './MessageItem.scss';\n\nconst MessageItem = ({ messageId, onDialog }) => {\n  const message = useSelector((state) => getMessageById(state, { id: messageId }));\n\n  return (\n    <ListItem\n      classNames={['MessageItem']}\n      key={messageId}\n    >\n      <MessageInfo\n        identityId={message.ownerAliasId || message.ownerId}\n        timeCreated={message.customTimeCreated || message.timeCreated}\n        onDialog={onDialog}\n      />\n      <div className=\"text\">\n        {/* eslint-disable-next-line react/no-array-index-key */}\n        {message.text.map((line, index) => <p key={index}>{line}</p>)}\n      </div>\n    </ListItem>\n  );\n};\n\nexport default React.memo(MessageItem);\n\nMessageItem.propTypes = {\n  messageId: string.isRequired,\n  onDialog: func.isRequired,\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func, string } from 'prop-types';\n\nimport { getMessageIdsByRoom } from '../../../../redux/selectors/messages';\nimport List from '../../../common/lists/List/List';\nimport MessageItem from './Item/MessageItem';\n\nimport './MessageList.scss';\n\nconst MessageList = ({ roomId, onDialog }) => {\n  const messageIds = useSelector((state) => getMessageIdsByRoom(state, { roomId }));\n\n  const messageMapper = () => messageIds.map((messageId) => (\n    <MessageItem\n      key={messageId}\n      messageId={messageId}\n      onDialog={onDialog}\n    />\n  ));\n\n  return (\n    <List\n      large\n      scrollTo={{\n        buffer: true,\n        direction: 'bottom',\n      }}\n      classNames={['MessageList']}\n    >\n      {messageMapper()}\n    </List>\n  );\n};\n\nexport default React.memo(MessageList);\n\nMessageList.propTypes = {\n  roomId: string,\n  onDialog: func.isRequired,\n};\n\nMessageList.defaultProps = {\n  roomId: undefined,\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { func, string } from 'prop-types';\nimport { AccessLevels } from '../../../../AccessCentral';\nimport InputArea from '../../sub-components/InputArea/InputArea';\nimport MessagesList from '../../lists/Message/MessageList';\nimport { getCurrentAccessLevel } from '../../../../redux/selectors/users';\n\nimport './Messages.scss';\n\nconst Messages = ({ roomId, onDialog, onSend }) => {\n  const accessLevel = useSelector(getCurrentAccessLevel);\n\n  return (\n    <div className=\"Messages\">\n      <div className=\"spacer\" />\n      <MessagesList\n        key=\"messagesList\"\n        roomId={roomId}\n        onDialog={onDialog}\n      />\n      {accessLevel >= AccessLevels.STANDARD && (\n        <InputArea\n          onSend={onSend}\n          roomId={roomId}\n          key=\"inputArea\"\n        />\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(Messages);\n\nMessages.propTypes = {\n  roomId: string,\n  onDialog: func.isRequired,\n  onSend: func.isRequired,\n};\n\nMessages.defaultProps = {\n  roomId: undefined,\n};\n","import React from 'react';\nimport { node } from 'prop-types';\nimport List from './List/List';\nimport ListItem from './List/Item/ListItem';\n\nconst FileMenu = ({ children }) => (\n  <List\n    dropdown\n    classNames={['FileMenu']}\n    title=\"File\"\n  >\n    {children}\n    <ListItem\n      key=\"quit\"\n      onClick={() => { console.log('quit'); }}\n    >\n      Quit\n    </ListItem>\n  </List>\n);\n\nexport default React.memo(FileMenu);\n\nFileMenu.propTypes = {\n  children: node.isRequired,\n};\n","import React, { useState } from 'react';\nimport { func } from 'prop-types';\nimport Dialog from '../../common/dialogs/Dialog/Dialog';\nimport Input from '../../common/sub-components/Input';\nimport Button from '../../common/sub-components/Button/Button';\nimport { createRoom } from '../../../socket/actions/rooms';\n\nconst CreateRoomDialog = ({ done }) => {\n  const [roomName, setRoomName] = useState();\n  const [password, setPassword] = useState();\n  const [repeatPassword, setRepeatPassword] = useState();\n  const [topic, setTopic] = useState();\n  const [error, setError] = useState();\n\n  const onSubmit = () => {\n    if (!roomName) {\n      return;\n    }\n\n    if (password && password !== repeatPassword) {\n      return;\n    }\n\n    const room = {\n      roomName,\n      password,\n      topic,\n    };\n\n    createRoom({ room })\n      .then(({ newRoom }) => done({ roomId: newRoom.objectId }))\n      .catch((createError) => setError(createError));\n  };\n\n  return (\n    <Dialog\n      classNames={['CreateRoomDialog']}\n      done={done}\n      error={error}\n      title=\"New room\"\n    >\n      <Input\n        required\n        onChange={setRoomName}\n        placeholder=\"Name of the room\"\n      />\n      <Input\n        onChange={setTopic}\n        placeholder=\"Topic (shown when joining the room)\"\n      />\n      <Input\n        onChange={setPassword}\n        type=\"password\"\n        placeholder=\"Password\"\n      />\n      <Input\n        onChange={setRepeatPassword}\n        type=\"password\"\n        placeholder=\"Repeat password\"\n      />\n      <div className=\"buttons\">\n        <Button\n          type=\"submit\"\n          onClick={onSubmit}\n        >\n          Create\n        </Button>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default React.memo(CreateRoomDialog);\n\nCreateRoomDialog.propTypes = {\n  done: func.isRequired,\n};\n","import React, { useState } from 'react';\nimport { func, string } from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport Dialog from '../../common/dialogs/Dialog/Dialog';\nimport { getRoom } from '../../../redux/selectors/rooms';\nimport Button from '../../common/sub-components/Button/Button';\nimport { removeRoom } from '../../../socket/actions/rooms';\n\nconst RemoveRoomDialog = ({ done, roomId }) => {\n  const [error, setError] = useState();\n  const room = useSelector((state) => getRoom(state, { id: roomId }));\n\n  const onSubmit = () => {\n    removeRoom({ roomId })\n      .then(() => done())\n      .catch((removeError) => setError(removeError));\n  };\n\n  return (\n    <Dialog\n      classNames={['RemoveRoomDialog']}\n      error={error}\n      done={done}\n      title={`Delete room ${room ? room.roomName : ''}`}\n      text={`Are you sure you want to delete ${room ? room.roomName : ''}?`}\n    >\n      <Button\n        type=\"button\"\n        onClick={() => done()}\n      >\n        No\n      </Button>\n      <Button\n        type=\"button\"\n        onClick={onSubmit}\n      >\n        Yes\n      </Button>\n    </Dialog>\n  );\n};\n\nexport default React.memo(RemoveRoomDialog);\n\nRemoveRoomDialog.propTypes = {\n  done: func.isRequired,\n  roomId: string.isRequired,\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { string } from 'prop-types';\nimport { useSelector } from 'react-redux';\nimport Rooms from './views/Rooms';\nimport Messages from './views/Messages/Messages';\nimport Window from '../common/Window/Window';\nimport FileMenu from '../common/lists/FileMenu';\nimport CreateRoomDialog from './dialogs/CreateRoomDialog';\nimport RemoveRoomDialog from './dialogs/RemoveRoomDialog';\nimport { getRoom, getWhisperRoomName } from '../../redux/selectors/rooms';\nimport { createDialog } from '../helper';\n\nimport './Chat.scss';\nimport ListItem from '../common/lists/List/Item/ListItem';\nimport { getPublicRoomId } from '../../redux/selectors/config';\nimport store from '../../redux/store';\nimport { getCurrentUser, getIdentityById } from '../../redux/selectors/users';\nimport { hasAccessTo } from '../../AccessCentral';\nimport { changeWindowOrder } from '../../redux/actions/windowOrder';\nimport { WindowTypes } from '../../redux/reducers/windowOrder';\n\nconst Chat = ({ id }) => {\n  const [dialog, setDialog] = useState();\n  const [roomId, setRoomId] = useState(getPublicRoomId(store.getState()));\n  const room = useSelector((state) => getRoom(state, { id: roomId }));\n  const currentUser = useSelector(getCurrentUser);\n\n  useEffect(() => {\n    if ((!currentUser || currentUser.isAnonymous || !room) && roomId !== getPublicRoomId(store.getState())) {\n      setRoomId(getPublicRoomId(store.getState()));\n    }\n  }, [room, currentUser]);\n\n  const title = (() => {\n    if (!room) {\n      return 'Chat';\n    }\n\n    if (room.isUser) {\n      const identity = getIdentityById(store.getState(), { id: roomId });\n\n      return `PM: ${identity.aliasName || identity.username}`;\n    }\n\n    if (room.isWhisper) {\n      return `PM: ${getWhisperRoomName(store.getState(), { ids: room.participantIds })}`;\n    }\n\n    return `Chat: ${room.roomName}`;\n  })();\n\n  const onChange = useCallback(({ roomId: newRoomId } = {}) => {\n    if (newRoomId) {\n      setRoomId(newRoomId);\n    }\n  }, []);\n\n  const onDialog = useCallback(setDialog, []);\n\n  const createRoomDialog = useCallback(() => setDialog(createDialog(\n    <CreateRoomDialog\n      done={\n        ({ roomId: newRoomId }) => {\n          setDialog();\n\n          if (newRoomId) {\n            setRoomId(newRoomId);\n          }\n        }\n      }\n    />,\n  )), []);\n\n  const createRemoveDialog = useCallback(() => setDialog(createDialog(\n    <RemoveRoomDialog roomId={roomId} done={() => setDialog()} />,\n  )), [roomId]);\n\n  const onClick = useCallback(() => {\n    store.dispatch(changeWindowOrder({ windows: [{ id, type: WindowTypes.CHAT }] }));\n  }, []);\n\n  return (\n    <>\n      <Window\n        classNames={['Chat']}\n        title={title}\n        onClick={onClick}\n        menu={(\n          <>\n            <FileMenu key=\"fileMenu\">\n              <ListItem\n                key=\"createRoom\"\n                onClick={createRoomDialog}\n              >\n                New room\n              </ListItem>\n              {hasAccessTo({\n                objectToAccess: room,\n                toAuth: currentUser,\n              }).hasFullAccess && (\n                <>\n                  <ListItem\n                    key=\"configRoom\"\n                    onClick={() => setDialog(createDialog(<RemoveRoomDialog roomId={roomId} done={() => setDialog()} />))}\n                  >\n                    Config room\n                  </ListItem>\n                  <ListItem\n                    key=\"removeRoom\"\n                    onClick={createRemoveDialog}\n                  >\n                    Delete room\n                  </ListItem>\n                </>\n              )}\n            </FileMenu>\n            <Rooms\n              key=\"rooms\"\n              onChange={onChange}\n              onDialog={onDialog}\n            />\n          </>\n        )}\n      >\n        <Messages\n          key=\"messages\"\n          roomId={roomId}\n          onDialog={onDialog}\n          onSend={onChange}\n        />\n      </Window>\n      {dialog}\n    </>\n  );\n};\n\nexport default React.memo(Chat);\n\nChat.propTypes = {\n  id: string.isRequired,\n};\n","import createCachedSelector from 're-reselect';\n\nexport const getOrder = (state) => state.windowOrder;\n\nexport const getIndexById = createCachedSelector(\n  [\n    getOrder,\n    (_, { id }) => id,\n  ],\n  (order, id) => [...order.keys()].indexOf(id),\n)((_, { id }) => `index-${id}`);\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport Wallet from '../Wallet/Wallet';\nimport WorldMap from '../WorldMap/WorldMap';\nimport Chat from '../Chat/Chat';\nimport { getOrder } from '../../redux/selectors/windowOrder';\nimport { WindowTypes } from '../../redux/reducers/windowOrder';\n\nimport './MainWindow.scss';\n\nconst MainWindow = () => {\n  const order = useSelector(getOrder);\n  const windows = [];\n\n  console.log(order);\n\n  order.forEach((type, key) => {\n    if (type === WindowTypes.CHAT) {\n      windows.push(<Chat key={key} id={key} />);\n    } else if (type === WindowTypes.WALLET) {\n      windows.push(<Wallet key={key} id={key} />);\n    } else if (type === WindowTypes.WORLDMAP) {\n      windows.push(<WorldMap key={key} id={key} />);\n    }\n  });\n\n  return (\n    <div id=\"MainWindow\">\n      {windows}\n    </div>\n  );\n};\n\nexport default React.memo(MainWindow);\n","import React from 'react';\n\nimport MenuBar from './library/components/MenuBar/MenuBar';\nimport DataHandler from './library/components/DataHandler';\nimport MainWindow from './library/components/MainWindow/MainWindow';\n\nfunction App() {\n  return (\n    <>\n      <DataHandler />\n      <MenuBar />\n      <MainWindow />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport App from './App';\nimport store from './library/redux/store';\n\nimport './index.scss';\n\nconst ElementQueries = require('css-element-queries');\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n\nElementQueries.ElementQueries.listen();\n"],"sourceRoot":""}